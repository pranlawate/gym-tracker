<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>BWS Workout Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header .today {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }

        .settings-icon {
            font-size: 20px;
            cursor: pointer;
            opacity: 0.9;
            transition: transform 0.3s;
        }

        .settings-icon:hover {
            transform: rotate(90deg);
        }

        .settings-panel {
            display: none;
            background: #0f0f0f;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
        }

        .settings-panel.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .settings-btn {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #2a2a2a;
            border: none;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .settings-btn:hover {
            background: #333;
        }

        .phase-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .phase-btn {
            flex: 1;
            padding: 8px 16px;
            background: #2a2a2a;
            border: none;
            border-radius: 15px;
            color: #e0e0e0;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .phase-btn.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }

        .nav {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding: 15px;
            background: #1a1a1a;
            position: sticky;
            top: 80px;
            z-index: 99;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .nav::-webkit-scrollbar {
            display: none;
        }

        .nav-btn {
            flex-shrink: 0;
            padding: 10px 20px;
            background: #2a2a2a;
            border: none;
            border-radius: 20px;
            color: #e0e0e0;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .workout-day {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s;
        }

        .workout-day.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .exercise {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #2a2a2a;
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .exercise-title {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 5px;
        }

        .exercise-meta {
            font-size: 13px;
            color: #888;
            margin-bottom: 8px;
        }

        .equipment {
            background: #2a2a2a;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            color: #aaa;
            margin-bottom: 10px;
            display: inline-block;
        }

        .video-link {
            display: inline-block;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 13px;
            font-weight: 600;
            margin-top: 5px;
        }

        .form-cues {
            background: #0f0f0f;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .form-cues h4 {
            font-size: 13px;
            color: #667eea;
            margin-bottom: 8px;
        }

        .form-cues ul {
            list-style: none;
            font-size: 13px;
            color: #aaa;
        }

        .form-cues li:before {
            content: "‚Ä¢ ";
            color: #667eea;
            font-weight: bold;
            margin-right: 5px;
        }

        .sets-tracker {
            margin-top: 15px;
        }

        .set-row {
            display: grid;
            grid-template-columns: auto 60px 1fr 1fr 60px;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #0f0f0f;
            border-radius: 8px;
        }

        .set-row input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .set-row input[type="number"] {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 8px;
            color: #e0e0e0;
            font-size: 14px;
            text-align: center;
        }

        .set-label {
            font-size: 14px;
            font-weight: 600;
            color: #888;
        }

        .timer {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 30px;
            border-radius: 30px;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.5);
            display: none;
            animation: slideUp 0.3s;
            z-index: 1000;
            cursor: pointer;
            transition: all 0.2s;
            max-width: 90%;
        }

        .timer:hover {
            transform: translateX(-50%) scale(1.02);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.6);
        }

        .timer:active {
            transform: translateX(-50%) scale(0.98);
        }

        .timer.active {
            display: block;
        }

        @keyframes slideUp {
            from { transform: translate(-50%, 100px); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }

        .timer-display {
            font-size: 28px;
            font-weight: 700;
            color: white;
            text-align: center;
        }

        .timer-label {
            font-size: 12px;
            color: rgba(255,255,255,0.8);
            text-align: center;
            margin-bottom: 5px;
        }

        .timer-exercise {
            font-size: 13px;
            color: rgba(255,255,255,0.95);
            text-align: center;
            margin-bottom: 3px;
            font-weight: 600;
        }

        .timer-hint {
            font-size: 10px;
            color: rgba(255,255,255,0.6);
            text-align: center;
            margin-top: 5px;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1a1a1a;
            padding: 15px;
            display: flex;
            gap: 10px;
            border-top: 1px solid #2a2a2a;
        }

        .bottom-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-rest {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .complete-workout {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .section-title {
            font-size: 16px;
            color: #667eea;
            margin: 20px 0 10px 0;
            font-weight: 600;
        }

        .warm-up {
            background: #0f1a0f;
            border-left: 3px solid #4caf50;
            text-align: center;
        }

        .warm-up .exercise-title {
            justify-content: center;
        }

        .alternatives {
            background: #1a1a0f;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .alternatives h4 {
            font-size: 13px;
            color: #ffa726;
            margin-bottom: 8px;
        }

        .alternatives ul {
            list-style: none;
            font-size: 12px;
            color: #aaa;
        }

        .alternatives a {
            color: #64b5f6;
            text-decoration: none;
        }

        .rest-day {
            text-align: center;
            padding: 60px 20px;
        }

        .rest-day h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .rest-day p {
            font-size: 16px;
            color: #888;
            line-height: 1.8;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }

        /* RPE Selector Styles */
        .rpe-select {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 8px 4px;
            color: #e0e0e0;
            font-size: 11px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .rpe-select option {
            white-space: normal;
            overflow-wrap: break-word;
        }

        .rpe-select.rpe-easy {
            background: #1a2e1a;
            border-color: #4caf50;
            color: #4caf50;
        }

        .rpe-select.rpe-moderate {
            background: #2e2a1a;
            border-color: #ffa726;
            color: #ffa726;
        }

        .rpe-select.rpe-hard {
            background: #2e1a1a;
            border-color: #f44336;
            color: #f44336;
        }

        /* Collapsible Form Cues */
        .tips-toggle {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #2a2a2a;
            border: none;
            border-radius: 6px;
            padding: 5px 10px;
            color: #667eea;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            margin-left: 10px;
        }

        .tips-toggle:hover {
            background: #333;
        }

        .tips-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .tips-content.expanded {
            max-height: 1000px;
            transition: max-height 0.5s ease-in;
        }

        .detailed-steps-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            margin-top: 10px;
        }

        .detailed-steps-content.expanded {
            max-height: 2000px;
            transition: max-height 0.5s ease-in;
        }

        .detailed-step {
            background: #1a1a1a;
            border-left: 3px solid #667eea;
            padding: 12px 15px;
            margin-bottom: 12px;
            border-radius: 8px;
        }

        .detailed-step h4 {
            color: #667eea;
            font-size: 15px;
            margin: 0 0 8px 0;
            font-weight: 700;
        }

        .detailed-step p {
            margin: 6px 0;
            line-height: 1.6;
            color: #e0e0e0;
        }

        .detailed-step ul {
            margin: 8px 0;
            padding-left: 20px;
        }

        .detailed-step li {
            margin: 5px 0;
            line-height: 1.6;
            color: #e0e0e0;
        }

        .detailed-steps-toggle {
            background: none;
            border: none;
            color: #667eea;
            cursor: pointer;
            font-size: 14px;
            padding: 4px 8px;
            border-radius: 5px;
            transition: background 0.2s;
        }

        .detailed-steps-toggle:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        /* Plate Calculator Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 25px;
            max-width: 90%;
            max-height: 85vh;
            width: 400px;
            border: 1px solid #2a2a2a;
            animation: slideUp 0.3s;
            overflow-y: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        .modal-content::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
        }

        .modal-close {
            background: none;
            border: none;
            color: #888;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
        }

        .calc-input-group {
            margin-bottom: 15px;
        }

        .calc-label {
            display: block;
            color: #888;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .calc-input {
            width: 100%;
            background: #0f0f0f;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 10px;
            color: #e0e0e0;
            font-size: 16px;
        }

        .calc-result {
            background: #0f0f0f;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .calc-result.active {
            display: block;
        }

        .calc-result-title {
            color: #667eea;
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .calc-result-text {
            color: #e0e0e0;
            font-size: 14px;
            line-height: 1.8;
        }

        .plate-list {
            list-style: none;
            padding-left: 0;
            margin-top: 10px;
        }

        .plate-item {
            padding: 5px 0;
            color: #aaa;
        }

        /* Progression Tracking Styles */
        .exercise-controls {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .progression-method-selector,
        .exercise-variant-selector,
        .progression-selector {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 5px 8px;
            color: #e0e0e0;
            font-size: 11px;
            cursor: pointer;
            flex: 1;
            min-width: 160px;
            max-width: 200px;
        }

        .progression-alert {
            background: #0f0f0f;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-size: 12px;
            border-left: 3px solid #667eea;
        }

        .progression-alert.good {
            border-left-color: #4caf50;
            background: #0f1a0f;
        }

        .progression-alert.warning {
            border-left-color: #ffa726;
            background: #1a1a0f;
        }

        .progression-alert.danger {
            border-left-color: #f44336;
            background: #1a0f0f;
        }

        .progression-alert-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #fff;
        }

        .progression-alert-text {
            color: #aaa;
            line-height: 1.5;
        }

        .history-btn {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #2a2a2a;
            border: none;
            border-radius: 6px;
            padding: 5px 10px;
            color: #4facfe;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            margin-left: 5px;
        }

        .history-btn:hover {
            background: #333;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 13px;
        }

        .history-table th {
            background: #0f0f0f;
            color: #667eea;
            padding: 10px;
            text-align: left;
            font-weight: 600;
        }

        .history-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #2a2a2a;
            color: #e0e0e0;
        }

        .history-table tr:hover {
            background: #0f0f0f;
        }

        .trend-up {
            color: #4caf50;
        }

        .trend-same {
            color: #ffa726;
        }

        .trend-down {
            color: #f44336;
        }

        .history-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .history-stat-box {
            background: #0f0f0f;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .history-stat-value {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
        }

        .history-stat-label {
            font-size: 11px;
            color: #888;
            margin-top: 3px;
        }

        .modal-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .modal-tab {
            flex: 1;
            padding: 8px;
            background: #2a2a2a;
            border: none;
            border-radius: 8px;
            color: #888;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .alternative-option {
            background: #0f0f0f;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .alternative-option:hover {
            background: #1a1a1a;
            border-color: #667eea;
        }

        .alternative-option-title {
            font-weight: 600;
            color: #fff;
            margin-bottom: 5px;
        }

        .alternative-option-desc {
            font-size: 12px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>
            <span>üí™ BWS Workout Tracker</span>
            <span class="settings-icon" onclick="toggleSettings()">‚öôÔ∏è</span>
        </h1>
        <div class="settings-panel" id="settings-panel">
            <div style="padding: 10px; border-bottom: 1px solid #333; margin-bottom: 10px;">
                <div style="font-size: 12px; color: #888; margin-bottom: 8px;">Current Program:</div>
                <div class="phase-selector">
                    <button class="phase-btn" data-phase="1">Phase 1</button>
                    <button class="phase-btn active" data-phase="2">Phase 2</button>
                </div>
            </div>
            <button class="settings-btn" onclick="showRPEGuide()">üìä What is RPE?</button>
            <button class="settings-btn" onclick="openPlateCalculator()">üßÆ Plate Calculator</button>
            <button class="settings-btn" onclick="showGoogleSheetsSetup()" id="sheets-setup-btn">
                <span id="sheets-status-icon">üîó</span>
                <span id="sheets-status-text">Connect Google Sheets</span>
            </button>
            <button class="settings-btn" onclick="testSheetsConnection()" id="test-sheets-btn" style="display: none;">‚úÖ Test Connection</button>
            <button class="settings-btn" onclick="clearLocalData()">üóëÔ∏è Clear Local Data</button>
        </div>
        <div class="today" id="today-date"></div>
    </div>

    <div class="nav" id="day-nav">
        <button class="nav-btn active" data-day="monday">MON</button>
        <button class="nav-btn" data-day="tuesday">TUE</button>
        <button class="nav-btn" data-day="wednesday">WED</button>
        <button class="nav-btn" data-day="thursday">THU</button>
        <button class="nav-btn" data-day="friday">FRI</button>
        <button class="nav-btn" data-day="saturday">SAT</button>
        <button class="nav-btn" data-day="sunday">SUN</button>
    </div>

    <div class="nav" id="phase1-nav" style="display: none;">
        <button class="nav-btn active" data-day="workout-a">Workout A</button>
        <button class="nav-btn" data-day="workout-b">Workout B</button>
    </div>

    <!-- MONDAY - Upper Body 1 -->
    <div class="workout-day active" id="monday">
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="mon-completed">0/5</div>
                <div class="stat-label">Exercises</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="mon-sets">0/17</div>
                <div class="stat-label">Sets</div>
            </div>
        </div>

        <div class="section-title">üî• Upper Body Warm-Up</div>

        <div class="exercise warm-up" data-exercise="mon-warmup-wrist">
            <div class="exercise-title">
                Wrist Circles
                <span class="exercise-subtitle">10 each direction</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Wrist Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the wrist muscles which will be heavily involved in many exercises.</p>
                    <p><strong>How:</strong> Clasp your palms together and move your wrists in a circular motion for 10-15 reps in both directions.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="mon-warmup-arm-circles">
            <div class="exercise-title">
                Arm Circles
                <span class="exercise-subtitle">10 forward, 10 back</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Arm Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the shoulder joint.</p>
                    <p><strong>How:</strong> Swing your arms forward in a circular motion for 10-15 reps and then repeat in the reverse direction.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="mon-warmup-band-overs">
            <div class="exercise-title">
                Band Over-and-Backs
                <span class="exercise-subtitle">5 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Over-and-Backs</h4>
                    <p><strong>Why:</strong> To mobilize the chest/shoulder area and help with shoulder/scapular stability.</p>
                    <p><strong>How:</strong> Hold your band at a little wider than shoulder-width apart. Bring the band over your head and back behind your body while keeping your arms straight. Keep the tension even as you move the band behind you (don't "release the slack"), and then bring it back over your head into the starting position.</p>
                    <p><strong>üí° Tip:</strong> If this is too difficult, widen your hand position. When it gets too easy, narrow your hand position. Avoid arching your back by slightly contracting your core.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="mon-warmup-band-pulls">
            <div class="exercise-title">
                Band Pull-Aparts
                <span class="exercise-subtitle">10 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Pull-Aparts</h4>
                    <p><strong>Why:</strong> To warm up the mid-back and rotator cuff musculature to help with your pressing.</p>
                    <p><strong>How:</strong> Hold your band at around shoulder-width apart with an overhand grip. Pull the band apart by squeezing your shoulder blades together. Keep your upper traps relaxed and focus on feeling your mid-back muscles working. Control back to the starting position and repeat.</p>
                    <p><strong>üí° Tip:</strong> You can use just one strand of the band OR a wider grip to make it easier, then narrow your grip overtime.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="mon-warmup-band-rotation">
            <div class="exercise-title">
                Band External Rotation
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Band External Rotation</h4>
                    <p><strong>Why:</strong> To warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Use either a band attached to a pole or a pulley system with the handle set up at elbow height. Stand beside the cable pulley or band and externally rotate the shoulder while keeping your elbow at 90 degrees and pinned to the side of your body. Control back to the starting position and repeat.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="mon-warmup-db-extensions">
            <div class="exercise-title">
                DB Shoulder Extensions
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üí™ DB Shoulder Extensions</h4>
                    <p><strong>Why:</strong> To further warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Using a light dumbbell in one arm, bring your arm up to shoulder height and bend your elbow to 90 degrees. Externally rotate your shoulder such that the dumbbell is lifted towards the ceiling, but keep your elbow locked in its position.</p>
                </div>
            </div>
        </div>

        <div class="section-title">üèãÔ∏è Working Sets</div>

        <div class="exercise" data-exercise="mon-e1">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="mon-e1-title">E1: Incline Dumbbell Press</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E1: Incline Dumbbell Press', 'mon-e1')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E1: Incline Dumbbell Press', 'mon-e1')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="mon-e1-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E1: Incline Dumbbell Press', 'mon-e1')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Upper Chest | 4 sets √ó 8-10 reps | Rest: 2-3 min | Standard exercise, optimal upper chest activation</div>
                    <div class="equipment">üìç Adjustable bench (30¬∞) + 2 dumbbells</div>
                    <a href="Exercise-Videos/CHEST_Incline-Press_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="mon-e1-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>‚ö†Ô∏è Warm-Up Sets (Do These First!):</h4>
                    <ul>
                        <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                        <li><strong>Set 2:</strong> 70% working weight √ó 3-4 reps (Rest: 60s)</li>
                        <li><strong>Set 3:</strong> 90% working weight √ó 1 rep (Rest: 2min)</li>
                    </ul>
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Bench angle: 30¬∞</li>
                        <li>Retract shoulder blades</li>
                        <li>Press until dumbbells almost touch</li>
                        <li>Lower to chest</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No incline bench? ‚Üí Reverse Grip Flat Press</li>
                        <li>No dumbbells? ‚Üí Band Decline Push-ups</li>
                        <li>Have cables? ‚Üí Low-to-High Cable Fly</li>
                    </ul>
                </div>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üìê STEP 1: Bench Angle</h4>
                    <p>Set up an incline bench at roughly <strong>30 degrees</strong>, which is optimal based on research (Lauver et al. 2015).</p>
                    <p><strong>üí° Tip:</strong> Try different angles (15-20¬∞ for shoulder-dominant pressers) to find what best activates your upper chest.</p>
                </div>
                <div class="detailed-step">
                    <h4>üéØ STEP 2: Setup</h4>
                    <ul>
                        <li>Use your <strong>thighs to kick dumbbells up</strong> one at a time into starting position</li>
                        <li>Stick chest up toward ceiling</li>
                        <li><strong>Pinch shoulder blades together</strong></li>
                        <li>Depress upper traps (bring shoulders down and away from ears)</li>
                        <li>Create a <strong>slight arch</strong> between lower back and bench</li>
                        <li>Maintain this position throughout the lift</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Press</h4>
                    <ul>
                        <li>Think about <strong>"squeezing your biceps together"</strong> to activate chest</li>
                        <li>Keep shoulder blades retracted and tight</li>
                        <li>Keep elbows <strong>slightly tucked</strong> as you press</li>
                        <li>Press up until dumbbells <strong>almost touch</strong></li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 4: Descent</h4>
                    <ul>
                        <li><strong>Slowly lower</strong> the weight (controlled eccentric)</li>
                        <li>Lower until dumbbell ends <strong>just about touch your chest</strong></li>
                        <li>Ensure shoulder blades stay retracted and tight</li>
                        <li>Perform next rep from this position</li>
                    </ul>
                </div>
            </div>
            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="mon-e2">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="mon-e2-title">E2: Chest-Supported Row</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E2: Chest-Supported Row', 'mon-e2')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E2: Chest-Supported Row', 'mon-e2')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2-3s squeeze)</option>
                            <option value="increased-volume">üìä Increased Volume (+1-2 sets)</option>
                            <option value="increased-reps">üìà Increased Reps (12-15)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                            <option value="rest-pause">‚èØÔ∏è Rest-Pause</option>
                        </select>
                        <select id="mon-e2-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E2: Chest-Supported Row', 'mon-e2')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Mid-Back (Compound) | 3 sets √ó 8-10 reps | Rest: 2 min | Removes lower back fatigue, allows heavier weight</div>
                    <div class="equipment">üìç Incline bench (45¬∞) + 2 dumbbells</div>
                    <a href="Exercise-Videos/BACK_Chest-Supported-Row_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="mon-e2-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Set:</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>Overhand grip, thumbless</li>
                    <li>Pull to upper abs</li>
                    <li>Squeeze shoulder blades</li>
                    <li>Don't flare elbows</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>No machine? ‚Üí <a href="Exercise-Videos/BACK_Single-Arm-Row_Dumbbell.mp4">Single arm DB row</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/BACK_Bent-Over-Row_Band.mp4">Bent over band row</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/BACK_Inverted-Row_Bedsheet.mp4">Bed sheet inverted row</a></li>
                </ul>
            </div>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Lie flat on an <strong>incline bench</strong> with your weighted bar on the ground.</p>
                    <p>Grab the bar with an <strong>overhand thumbless grip</strong> slightly wider than shoulder-width apart.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Pull</h4>
                    <ul>
                        <li>Pull bar toward <strong>upper abdominal area</strong> as far as bench allows</li>
                        <li>Focus on <strong>squeezing shoulder blades together</strong> to pull weight</li>
                        <li>Relax upper traps as much as possible</li>
                        <li>Head in <strong>neutral position</strong> (not sticking forward)</li>
                        <li>Elbows at <strong>90¬∞ angle</strong> at top to minimize wrist/elbow stress</li>
                        <li>Think about <strong>pulling with elbows</strong> to activate back</li>
                        <li>Keep elbows <strong>tucked</strong>, not flared out</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descent</h4>
                    <ul>
                        <li><strong>Control the weight down</strong> (don't just drop it)</li>
                        <li>Flex triceps at bottom position</li>
                        <li>Repeat for more reps</li>
                    </ul>
                </div>
            </div>


            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="mon-e3">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="mon-e3-title">E3: Lean-Away Cable Lateral Raises</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E3: Lean-Away Cable Lateral Raises', 'mon-e3')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E3: Lean-Away Cable Lateral Raises', 'mon-e3')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+1.25 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (2-1-2)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (1-2s hold)</option>
                            <option value="increased-volume">üìä Increased Volume (+1-2 sets)</option>
                            <option value="increased-reps">üìà Increased Reps (15-20)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                            <option value="21s">üî¢ 21s Method</option>
                        </select>
                        <select id="mon-e3-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E3: Lean-Away Cable Lateral Raises', 'mon-e3')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Side Delts (Isolation) | 3 sets √ó 10-12 reps | Rest: 45-60s | Constant tension from cables, lean increases stretch</div>
                    <div class="equipment">üìç Cable machine (low pulley) + D-handle</div>
                    <a href="Exercise-Videos/SHOULDERS_Lateral-Raise-Lean-Away_Cable.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="mon-e3-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Cable at lowest setting</li>
                    <li>Lean sideways away from cable</li>
                    <li>Raise to shoulder height</li>
                    <li>No momentum or swinging</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>No cable? ‚Üí <a href="Exercise-Videos/SHOULDERS_Lateral-Raise_Dumbbell.mp4">DB lateral raises</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/SHOULDERS_Lateral-Raise_Band.mp4">Band lateral raises</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/SHOULDERS_Lateral-Raise_Bodyweight.mp4">Sliding lateral raises</a></li>
                </ul>
            </div>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <ul>
                        <li>Set pulley to <strong>lowest position</strong> with handle attachment</li>
                        <li>Stand sideways next to pulley</li>
                        <li>Bring right foot slightly forward, left foot back</li>
                        <li>Grab pole with left hand</li>
                        <li>Grab handle with <strong>overhand grip</strong> from between your legs</li>
                        <li>Lean toward right until left arm is straight</li>
                        <li>Maintain this <strong>slight lean sideways</strong></li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Raise</h4>
                    <ul>
                        <li>Raise arm out to side until <strong>shoulder-height</strong></li>
                        <li>Think about raising <strong>"out" toward sides</strong> (not "up")</li>
                        <li><strong>Don't use momentum</strong> to swing weight</li>
                        <li>Try not to tense upper traps too much</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descent</h4>
                    <p>Control the weight on the way down of each rep.</p>
                    <p><strong>Switch sides</strong> and repeat the same protocol.</p>
                </div>
            </div>


            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="mon-e4">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="mon-e4-title">E4: Pull-Ups</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E4: Pull-Ups', 'mon-e4')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E4: Pull-Ups', 'mon-e4')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s hold)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (10-12)</option>
                            <option value="weighted">üí™ Weighted Pull-Ups</option>
                            <option value="rest-pause">‚èØÔ∏è Rest-Pause</option>
                        </select>
                        <select id="mon-e4-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E4: Pull-Ups', 'mon-e4')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Lats/Upper Back (Compound) | 3 sets √ó 6-8 reps | Rest: 2-3 min | Bodyweight, full range of motion, optimal lat development</div>
                    <div class="equipment">üìç Pull-up bar</div>
                    <a href="Exercise-Videos/BACK_Pull-Up_Bodyweight.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="mon-e4-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Overhand grip, slightly wider than shoulders</li>
                    <li>Pull with elbows, not arms</li>
                    <li>Eyes over bar at top</li>
                    <li>Full range of motion</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Can't do 6 reps? ‚Üí Assisted pull-up machine or lat pulldown</li>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/BACK_Pullover_Dumbbell.mp4">DB pullovers</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/BACK_Lat-Pulldown-Single-Arm_Band.mp4">Single arm banded pulldowns</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/BACK_Lat-Pulldown_Bedsheet.mp4">Bed sheet lat pulldown</a></li>
                </ul>
            </div>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <ul>
                        <li>Grab bar with <strong>overhand grip</strong> slightly wider than shoulder-width</li>
                        <li>Use <strong>thumbless grip</strong> (helps activate back better)</li>
                        <li><strong>Depress upper traps</strong> and maintain throughout pull</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Pull</h4>
                    <ul>
                        <li>Pull by <strong>driving elbows down to floor</strong></li>
                        <li>Think about <strong>pulling with elbows</strong>, not hands</li>
                        <li>Keep feet straight down (or cross feet if bar is low)</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>üîù STEP 3: Top Position</h4>
                    <ul>
                        <li>Pull until at least <strong>eyes reach over bar</strong></li>
                        <li>Ensure shoulders are <strong>not rounding forward</strong></li>
                        <li>Keep shoulder blades <strong>retracted back</strong></li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 4: Descent</h4>
                    <p>Lower body in a <strong>controlled manner</strong> until arms are straight.</p>
                    <p><strong>üí° Progression Tip:</strong> Once you can do 8+ reps, add weight using belt or dumbbell between feet.</p>
                </div>
            </div>


            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="mon-e5">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="mon-e5-title">E5: Incline Overhead DB Extensions</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E5: Incline Overhead DB Extensions', 'mon-e5')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E5: Incline Overhead DB Extensions', 'mon-e5')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+1.25 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (2-1-2)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s hold)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (15-20)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                            <option value="increased-rom">üìê Increased ROM</option>
                        </select>
                        <select id="mon-e5-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E5: Incline Overhead DB Extensions', 'mon-e5')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Triceps (Long Head) (Isolation) | 3 sets √ó 12-15 reps | Rest: 1.5-2 min | Incline position maximizes long head stretch</div>
                    <div class="equipment">üìç Incline bench (30-45¬∞) + 2 dumbbells</div>
                    <a href="Exercise-Videos/ARMS_Tricep-Extension-Incline_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="mon-e5-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Bench at 30¬∞</li>
                    <li>Dumbbells overhead</li>
                    <li>Elbows locked in position</li>
                    <li>Lower behind head</li>
                    <li>Full stretch at bottom</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Flat bench? ‚Üí Same movement works</li>
                    <li>No bench? ‚Üí Standing overhead extension</li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/ARMS_Tricep-Extension_Band.mp4">Banded overhead extensions</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/ARMS_Tricep-Extension_Bodyweight.mp4">Bodyweight extensions</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Set up an incline bench to around <strong>30 degrees</strong>. Lay your back on the bench with the dumbbells <strong>directly overhead</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 2: Descent</h4>
                    <p>While keeping your <strong>elbows locked in position</strong>, lower the dumbbells back behind your body as far as it will go.</p>
                    <p><strong>üí° Tip:</strong> The key is maintaining fixed elbow position - all movement comes from the elbow joint only.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Extension</h4>
                    <p>Press the weight back up to the starting position by using your <strong>triceps</strong> while keeping your elbow locked in position. Repeat.</p>
                    <p><strong>üéØ Focus:</strong> Think about moving only your forearms while your upper arms stay completely still.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- TUESDAY - Lower Body 1 -->
    <div class="workout-day" id="tuesday">
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="tue-completed">0/4</div>
                <div class="stat-label">Exercises</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="tue-sets">0/14</div>
                <div class="stat-label">Sets</div>
            </div>
        </div>

        <div class="section-title">üî• Lower Body Warm-Up</div>

        <div class="exercise warm-up" data-exercise="tue-warmup-cycling">
            <div class="exercise-title">
                Light Cycling
                <span class="exercise-subtitle">3-5 minutes</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üö¥ Light Cycling</h4>
                    <p><strong>Why:</strong> To start a general warm up of your legs in preparation for the rest of the routine.</p>
                    <p><strong>How:</strong> Use a static bicycle and keep a comfortable, slow pace for a few minutes. Alternatively, you can use an elliptical trainer, a treadmill or just walk a little.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="tue-warmup-glute-bridges">
            <div class="exercise-title">
                Glute Bridges
                <span class="exercise-subtitle">10-15 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üçë Glute Bridges (10-15 reps)</h4>
                    <p><strong>Why:</strong> To activate the glutes and posterior chain before heavy squats and deadlifts. Ensures proper glute recruitment during compound lifts.</p>
                    <p><strong>How:</strong> Lie on your back with knees bent and feet flat on the floor, hip-width apart. Press through your heels to lift your hips until your body forms a straight line from shoulders to knees. Squeeze your glutes hard at the top for 1 second, then lower back down with control.</p>
                    <p><strong>üí° Tip:</strong> Focus on feeling your glutes working, not your lower back or hamstrings. Keep your core engaged throughout.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="tue-warmup-leg-swings-fb">
            <div class="exercise-title">
                Forward & Back Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶µ Forward & Back Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something beside you. Swing your leg front and back as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="tue-warmup-leg-swings-ss">
            <div class="exercise-title">
                Side-to-Side Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Side-to-Side Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something in front of you. Swing your leg side to side as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="tue-warmup-spiderman">
            <div class="exercise-title">
                Spiderman Lunge w/ Thoracic Extension
                <span class="exercise-subtitle">5 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üï∑Ô∏è Spiderman Lunge w/ Thoracic Extension</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the thoracic spine and hips.</p>
                    <p><strong>How:</strong> Start in a plank position with your palms on the ground and shoulder-width apart. Take a lunge forward with one leg such that your foot is placed on the outside of the corresponding hand. The back leg can be bent with your knee on the ground.</p>
                    <p>Next, stay in this position and then rotate your torso and lift one arm towards the sky to try to create a straight line between your arms. Do this for both arms (rotate both ways) and then come back to the starting position and repeat with the other leg ‚Äì this counts as 1 rep.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="tue-warmup-ankle">
            <div class="exercise-title">
                Wall Ankle Mobilization
                <span class="exercise-subtitle">5 per side (2 sec hold)</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶∂ Wall Ankle Mobilization</h4>
                    <p><strong>Why:</strong> To mobilize the ankles which tends to limit squat depth/mobility in most people.</p>
                    <p><strong>How:</strong> Position yourself in front of a wall with one foot ahead and one foot behind. Lean your body forward such that your front knee moves towards the wall (it can touch the wall at the end position). Hold the stretch for 2 seconds, then move back to the starting position.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Ensure the heel of your front foot remains on the ground throughout each rep. Repeat with both sides.</p>
                </div>
            </div>
        </div>

        <div class="section-title">üèãÔ∏è Working Sets</div>

        <div class="exercise" data-exercise="tue-e1">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="tue-e1-title">E1: Back Squat</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E1: Back Squat', 'tue-e1')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E1: Back Squat', 'tue-e1')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Squats (3s bottom)</option>
                            <option value="increased-volume">üìä Increased Volume (+1-2 sets)</option>
                            <option value="increased-reps">üìà Increased Reps (10-12)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                            <option value="rest-pause">‚èØÔ∏è Rest-Pause</option>
                        </select>
                        <select id="tue-e1-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E1: Back Squat', 'tue-e1')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Quads/Glutes (Compound) | 4 sets √ó 6-8 reps | Rest: 3 min | King of leg exercises, maximum strength and mass builder</div>
                    <div class="equipment">üìç Squat rack + barbell + safety bars</div>
                    <a href="Exercise-Videos/LEGS_Squat-Back_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="tue-e1-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Sets (Do These First!):</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                    <li><strong>Set 2:</strong> 70% working weight √ó 3-4 reps (Rest: 60s)</li>
                    <li><strong>Set 3:</strong> 90% working weight √ó 1 rep (Rest: 2min)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>Bar on upper traps</li>
                    <li>Feet shoulder-width</li>
                    <li>Brace core</li>
                    <li>Squat to parallel</li>
                    <li>Push through heels</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/LEGS_Squat-Goblet-Paused_Dumbbell.mp4">DB paused goblet squat</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/LEGS_Squat-Paused_Band.mp4">Band paused squat</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/LEGS_Squat-Goblet-Weighted_Dumbbell.mp4">Paused goblet squat</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Placement</h4>
                    <p>Grab the bar with an <strong>overhand grip slightly wider than shoulder-width</strong>. Place the bar on your <strong>upper-back (traps)</strong> by dipping under the bar. Raise your chest up and retract your shoulder blades.</p>
                </div>
                <div class="detailed-step">
                    <h4>üìç STEP 2: Unrack</h4>
                    <p>Unrack the bar, take <strong>3 steps back</strong>, then adjust your footing. Your feet should be <strong>shoulder-width apart or a little wider</strong>. You can point your toes out slightly if this is more comfortable.</p>
                    <p><strong>üí° Tip:</strong> Play around with foot positioning to find what's comfortable for you.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descent</h4>
                    <p>Take a <strong>deep breath in and hold it</strong>. You want to use this breath to brace your core (think about contracting your abs how you would if someone were to punch your stomach). Move your hips back while bending your knees to squat down.</p>
                    <p>Squat down until your <strong>thighs are at least parallel to the ground</strong>. If you have the mobility to do so, then you can go further below parallel.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 4: Ascent</h4>
                    <p>Squat back up by <strong>pushing through your heels</strong>. Keep your knees in line with your toes by thinking about <strong>"spreading the floor apart"</strong> with your feet.</p>
                    <p><strong>‚ö†Ô∏è Avoid:</strong> Creeping up on your toes or collapsing your knees inward. Keep your lower back neutral and your chest up.</p>
                    <p><strong>üí® Breathing:</strong> You can exhale as you press up, or keep your breath held and then exhale at the top position. Then repeat for more reps.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="tue-e2">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="tue-e2-title">E2: Bulgarian Split Squat</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E2: Bulgarian Split Squat', 'tue-e2')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E2: Bulgarian Split Squat', 'tue-e2')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s bottom)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (12-15)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                            <option value="deficit">üìê Deficit Bulgarian</option>
                        </select>
                        <select id="tue-e2-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E2: Bulgarian Split Squat', 'tue-e2')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Quads/Glutes (Compound) | 3 sets √ó 8-10/leg | Rest: 45-60s | Best unilateral leg exercise, addresses imbalances</div>
                    <div class="equipment">üìç Flat bench + 2 dumbbells</div>
                    <a href="Exercise-Videos/LEGS_Bulgarian-Split-Squat_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="tue-e2-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Set:</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps per leg (Rest: 60s)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>Back foot elevated</li>
                    <li>Shorter step = more quads</li>
                    <li>Longer step = more glutes</li>
                    <li>Front thigh to parallel</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells ‚Üí <a href="Exercise-Videos/LEGS_Bulgarian-Split-Squat_Dumbbell.mp4">DB Bulgarian split squat</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/LEGS_Bulgarian-Split-Squat_Band.mp4">Band Bulgarian split squat</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/LEGS_Bulgarian-Split-Squat_Bodyweight.mp4">Bodyweight version</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Grab a <strong>dumbbell in each hand</strong> and place your back foot on the top of a bench or any elevated platform.</p>
                    <p><strong>üéØ Target Selection:</strong></p>
                    <ul>
                        <li><strong>Shorter step forward</strong> = more quads</li>
                        <li><strong>Longer step forward</strong> = more glutes</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 2: Descent</h4>
                    <p>After you get your setup right, bend your front knee until your <strong>thigh is at least parallel with the ground</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Ascent</h4>
                    <p>Push back up through your <strong>front foot</strong>. Your heel shouldn't raise off the floor and you want to keep your head, back, and hips aligned throughout each rep. Your upper body can lean forward slightly. Repeat for more reps.</p>
                    <p><strong>üí° Balance Tip:</strong> For those struggling with balance, simply get rid of the dumbbell in one hand and use that free hand to hold onto something for balance.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="tue-e3">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="tue-e3-title">E3: Swiss Ball Leg Curls</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E3: Swiss Ball Leg Curls', 'tue-e3')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E3: Swiss Ball Leg Curls', 'tue-e3')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (weighted vest)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (2-1-2)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s hold)</option>
                            <option value="increased-volume">üìä Increased Volume (+1-2 sets)</option>
                            <option value="increased-reps">üìà Increased Reps (15-20)</option>
                            <option value="single-leg">ü¶µ Single Leg Curls</option>
                            <option value="elevated">üìê Feet Elevated</option>
                        </select>
                        <select id="tue-e3-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E3: Swiss Ball Leg Curls', 'tue-e3')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Hamstrings (Isolation) | 4 sets √ó 8-12 reps | Rest: 1.5-2 min | Challenging bodyweight movement, builds hamstring strength</div>
                    <div class="equipment">üìç Stability ball / Swiss ball</div>
                    <a href="" class="video-link" style="display: none;">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="tue-e3-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Heels on ball</li>
                    <li>Glutes elevated</li>
                    <li>Curl ball to body</li>
                    <li>Control the descent</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Too difficult? ‚Üí Use lying leg curl machine</li>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/LEGS_Hamstring-Curl_Dumbbell.mp4">DB hamstring curls</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/LEGS_Hamstring-Curl_Band.mp4">Band hamstring curls</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/LEGS_Hamstring-Curl-Sliding_Bodyweight.mp4">Sliding hamstring curls</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Lay with your <strong>back on the ground</strong> with your heels <strong>hip-width apart</strong> on a stability ball and your hands placed out to your sides.</p>
                    <p>Lift your body into the air until your <strong>body is straight and elevated</strong> in the air.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Curl</h4>
                    <p>While keeping your <strong>core tight and body straight</strong>, curl the ball towards your body by bending your knees and lifting your hips into the air by contracting your hamstrings.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Ensure you aren't arching your back to compensate - it should instead remain in a neutral (straight) position.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Return</h4>
                    <p>Straighten your legs to return the stability ball to the starting position then repeat for another rep.</p>
                    <p><strong>üí° Tip:</strong> Perform all reps in a slow and controlled manner and keep your core and hamstrings engaged throughout each rep.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="tue-e4">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="tue-e4-title">E4: Single Leg Weighted Calf Raise</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E4: Single Leg Weighted Calf Raise', 'tue-e4')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E4: Single Leg Weighted Calf Raise', 'tue-e4')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+1.25 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (2-1-2)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s hold)</option>
                            <option value="increased-volume">üìä Increased Volume (+1-2 sets)</option>
                            <option value="increased-reps">üìà Increased Reps (15-20)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                            <option value="stretch-hold">üßò Stretch Hold (3s bottom)</option>
                        </select>
                        <select id="tue-e4-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E4: Single Leg Weighted Calf Raise', 'tue-e4')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Calves (Isolation) | 4 sets √ó 6-10/leg | Rest: 1-1.5 min | Unilateral, addresses imbalances, maximum ROM</div>
                    <div class="equipment">üìç Step/platform + 1 dumbbell</div>
                    <a href="Exercise-Videos/LEGS_Calf-Raise-Single_Bodyweight.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>

            <div id="tue-e4-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Toes on platform edge</li>
                    <li>Weight in opposite hand</li>
                    <li>Full stretch at bottom</li>
                    <li>Full contraction at top</li>
                    <li>Pause ¬Ω sec each end</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>All equipment works ‚Üí <a href="Exercise-Videos/LEGS_Calf-Raise-Single_Bodyweight.mp4">Same video</a></li>
                    <li>Seated version? ‚Üí <a href="Exercise-Videos/LEGS_Calf-Raise-Seated_Bodyweight.mp4">Seated calf raises</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Stand with the <strong>toes of one foot on an elevated platform</strong> and a weight held in the <strong>opposite hand</strong>. Ideally, you should be holding onto something for balance with your free hand.</p>
                    <p>Start with your <strong>heel touching the floor</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Raise</h4>
                    <p>By using your calves, lift directly straight up on your toes as high as possible. <strong>Pause for half a second at the top position</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descent</h4>
                    <p>Slowly lower your heel back down to the ground. <strong>Pause for half a second at the bottom position</strong> before performing another rep.</p>
                    <p><strong>üí° Progression Tip:</strong> If adding weight is too difficult for you, perform them with just your bodyweight until you gain the calf strength to add weight.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- REST DAY TEMPLATES -->
    <div class="workout-day" id="wednesday">
        <div class="rest-day">
            <h2>üßò Rest Day - Active Recovery</h2>
            <p style="color: #aaa; margin-bottom: 30px;">Recovery is when muscle growth happens. Choose light activities that promote blood flow without adding fatigue.</p>

            <div class="info-banner" style="margin: 15px; padding: 15px; background: #1a1a2e; border-left: 3px solid #667eea; border-radius: 8px;">
                <div class="section-title" style="margin-bottom: 12px;">Option 1: LISS Cardio (Low Intensity)</div>
                <p style="color: #aaa; margin-bottom: 8px;"><strong>Duration:</strong> 20-45 minutes | <strong>Intensity:</strong> Zone 2 (can hold conversation)</p>
                <p style="color: #888; font-size: 13px; line-height: 1.6;">
                    Incline treadmill walk (10-15% incline, 3 mph) ‚Ä¢ Cycling ‚Ä¢ Elliptical ‚Ä¢ Swimming ‚Ä¢ Light jogging
                </p>
                <p style="color: #888; font-size: 13px; margin-top: 8px;"><strong>Benefits:</strong> Promotes recovery, heart health, calorie burn without affecting muscle recovery</p>
            </div>

            <div class="info-banner" style="margin: 15px; padding: 15px; background: #1a1a2e; border-left: 3px solid #4caf50; border-radius: 8px;">
                <div class="section-title" style="margin-bottom: 8px;">Option 2: Mobility & Stretching</div>
                <p style="color: #888; font-size: 13px; line-height: 1.6;">
                    Full body stretching (15-20 min) ‚Ä¢ Foam rolling on sore muscles (10-15 min) ‚Ä¢ Yoga or dynamic mobility work<br>
                    <strong>Focus areas:</strong> Hip flexors, hamstrings, shoulders, thoracic spine
                </p>
            </div>

            <div class="info-banner" style="margin: 15px; padding: 15px; background: #1a1a2e; border-left: 3px solid #888; border-radius: 8px;">
                <div class="section-title" style="margin-bottom: 8px;">Option 3: Complete Rest</div>
                <p style="color: #888; font-size: 13px; line-height: 1.6;">
                    Light walk (20-30 min outdoors) ‚Ä¢ Sleep 8-9 hours ‚Ä¢ Hydration (bodyweight lbs √ó 0.5 = oz water) ‚Ä¢ Hit protein target (0.8-1g per lb)
                </p>
            </div>

            <div class="info-banner" style="margin: 15px; padding: 15px; background: #2e1a1a; border-left: 3px solid #f44336; border-radius: 8px;">
                <div class="section-title" style="margin-bottom: 8px;">‚ö†Ô∏è Avoid on Rest Days</div>
                <p style="color: #888; font-size: 13px; line-height: 1.6;">
                    ‚ùå HIIT workouts (save for Saturday) ‚Ä¢ ‚ùå Heavy lifting or training to failure ‚Ä¢ ‚ùå Long distance running ‚Ä¢ ‚ùå Anything creating significant muscle soreness
                </p>
            </div>
        </div>
    </div>

    <!-- THURSDAY - Upper Body 2 -->
    <div class="workout-day" id="thursday">
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="thu-completed">0/5</div>
                <div class="stat-label">Exercises</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="thu-sets">0/16</div>
                <div class="stat-label">Sets</div>
            </div>
        </div>

        <div class="section-title">üî• Upper Body Warm-Up</div>

        <div class="exercise warm-up" data-exercise="thu-warmup-wrist">
            <div class="exercise-title">
                Wrist Circles
                <span class="exercise-subtitle">10 each direction</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Wrist Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the wrist muscles which will be heavily involved in many exercises.</p>
                    <p><strong>How:</strong> Clasp your palms together and move your wrists in a circular motion for 10-15 reps in both directions.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="thu-warmup-arm-circles">
            <div class="exercise-title">
                Arm Circles
                <span class="exercise-subtitle">10 forward, 10 back</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Arm Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the shoulder joint.</p>
                    <p><strong>How:</strong> Swing your arms forward in a circular motion for 10-15 reps and then repeat in the reverse direction.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="thu-warmup-band-overs">
            <div class="exercise-title">
                Band Over-and-Backs
                <span class="exercise-subtitle">5 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Over-and-Backs</h4>
                    <p><strong>Why:</strong> To mobilize the chest/shoulder area and help with shoulder/scapular stability.</p>
                    <p><strong>How:</strong> Hold your band at a little wider than shoulder-width apart. Bring the band over your head and back behind your body while keeping your arms straight. Keep the tension even as you move the band behind you (don't "release the slack"), and then bring it back over your head into the starting position.</p>
                    <p><strong>üí° Tip:</strong> If this is too difficult, widen your hand position. When it gets too easy, narrow your hand position. Avoid arching your back by slightly contracting your core.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="thu-warmup-band-pulls">
            <div class="exercise-title">
                Band Pull-Aparts
                <span class="exercise-subtitle">10 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Pull-Aparts</h4>
                    <p><strong>Why:</strong> To warm up the mid-back and rotator cuff musculature to help with your pressing.</p>
                    <p><strong>How:</strong> Hold your band at around shoulder-width apart with an overhand grip. Pull the band apart by squeezing your shoulder blades together. Keep your upper traps relaxed and focus on feeling your mid-back muscles working. Control back to the starting position and repeat.</p>
                    <p><strong>üí° Tip:</strong> You can use just one strand of the band OR a wider grip to make it easier, then narrow your grip overtime.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="thu-warmup-band-rotation">
            <div class="exercise-title">
                Band External Rotation
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Band External Rotation</h4>
                    <p><strong>Why:</strong> To warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Use either a band attached to a pole or a pulley system with the handle set up at elbow height. Stand beside the cable pulley or band and externally rotate the shoulder while keeping your elbow at 90 degrees and pinned to the side of your body. Control back to the starting position and repeat.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="thu-warmup-db-extensions">
            <div class="exercise-title">
                DB Shoulder Extensions
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üí™ DB Shoulder Extensions</h4>
                    <p><strong>Why:</strong> To further warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Using a light dumbbell in one arm, bring your arm up to shoulder height and bend your elbow to 90 degrees. Externally rotate your shoulder such that the dumbbell is lifted towards the ceiling, but keep your elbow locked in its position.</p>
                </div>
            </div>
        </div>

        <div class="section-title">üèãÔ∏è Working Sets</div>

        <div class="exercise" data-exercise="thu-e1">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="thu-e1-title">E1: Barbell Bench Press</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E1: Barbell Bench Press', 'thu-e1')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E1: Barbell Bench Press', 'thu-e1')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s bottom)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (10-12)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="thu-e1-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E1: Barbell Bench Press', 'thu-e1')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Chest/Triceps (Compound) | 4 sets √ó 6-8 reps | Rest: 2.5-3 min | King of chest exercises, maximum strength builder</div>
                    <div class="equipment">üìç Flat bench press station with barbell + safety bars/rack</div>
                    <a href="Exercise-Videos/CHEST_Bench-Press_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="thu-e1-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Sets (Do These First!):</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                    <li><strong>Set 2:</strong> 70% working weight √ó 3-4 reps (Rest: 60s)</li>
                    <li><strong>Set 3:</strong> 90% working weight √ó 1 rep (Rest: 2min)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>Bar over eyes when lying</li>
                    <li>Pinky on/inside ring marks</li>
                    <li>Retract shoulder blades</li>
                    <li>Arch lower back</li>
                    <li>Bar touches chest every rep</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/CHEST_Flat-Press_Dumbbell.mp4">Flat DB press</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/CHEST_Close-Grip-Pushup_Band.mp4">Banded close grip push-ups</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/CHEST_Close-Grip-Pushup_Bodyweight.mp4">Close grip push-ups</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Positioning</h4>
                    <p>Lie down on the bench so that the bar is sitting <strong>directly over your eyes</strong>. Grab the bar with a width such that your <strong>pinky's just inside the ring marks</strong> (but experiment and see what grip-width works best for you).</p>
                    <p>Raise your chest up towards the ceiling and <strong>squeeze your shoulder-blades back and down</strong> by pinching your shoulder blades together. Keep your butt on the bench. Bring your feet back under your knees and plant them firmly on the ground.</p>
                    <p>As a result, there should be <strong>space between your lower back and the bench (an arch)</strong>. Squeeze your glutes to help you maintain a stable position.</p>
                </div>
                <div class="detailed-step">
                    <h4>üìç STEP 2: Unrack</h4>
                    <p>Straighten your arms to lift the bar up. Move the bar so that it's balanced <strong>directly over your shoulders</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descend</h4>
                    <p>Lower the bar to <strong>slightly below your nipples</strong> while slightly tucking your elbows and keeping your forearms vertical and directly under your wrists.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Make sure to use full range of motion such that the <strong>bar physically touches your chest</strong> at the bottom.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 4: Press</h4>
                    <p>Press the bar from below your nipples to <strong>directly above your shoulders</strong>. The bar should not travel straight up and down, but rather slightly back towards the starting position.</p>
                    <p><strong>üéØ Focus:</strong> Focus on moving the weight by squeezing your chest together (think about trying to bring your biceps together).</p>
                    <p><strong>‚ö†Ô∏è Maintain:</strong> Your shoulder-blades should be retracted and pulled down throughout the press, and your butt should remain in contact with the bench.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="165">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="165">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="165">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="165">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="thu-e2">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="thu-e2-title">E2: Seated Cable Row</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E2: Seated Cable Row', 'thu-e2')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E2: Seated Cable Row', 'thu-e2')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused at Peak (2s squeeze)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (12-15)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="thu-e2-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E2: Seated Cable Row', 'thu-e2')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Mid-Back/Lats (Compound) | 3 sets √ó 10-12 reps | Rest: 2 min | Constant tension, builds back thickness</div>
                    <div class="equipment">üìç Seated cable row machine with V-bar handle</div>
                    <a href="Exercise-Videos/BACK_Seated-Row_Cable.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="thu-e2-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Set:</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>V-bar attachment</li>
                    <li>Back straight</li>
                    <li>Depress shoulders</li>
                    <li>Pull to stomach</li>
                    <li>Squeeze shoulder blades</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/BACK_Single-Arm-Row_Dumbbell.mp4">Single arm DB row</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/BACK_Kneeling-Single-Arm-Row_Band.mp4">Kneeling band row</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/BACK_High-Row_Bedsheet.mp4">Bed sheet high row</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Grab the <strong>"V-bar" attachment</strong> and get into your starting position with your <strong>back straight</strong> and legs slightly bent.</p>
                    <p><strong>Depress (relax) your upper traps</strong> before pulling by bringing your shoulders down and away from your ears.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÖÔ∏è STEP 2: Pull</h4>
                    <p>Pull the weight by <strong>retracting your shoulder blades</strong> and pulling the V-bar towards your <strong>stomach</strong> while maintaining a relatively straight back. Avoid arching or excessively rounding your back as you pull.</p>
                    <p><strong>üí° Tip:</strong> Think about pulling with your elbows as you pull in order to better engage the back.</p>
                    <p><strong>‚ö†Ô∏è Critical:</strong> As you pull, you do NOT want your shoulders to roll forward and internally rotate as this places a lot of stress on the shoulder joint. Instead, focus on squeezing your shoulder blades back such that your shoulder doesn't roll forward and instead stays pulled back.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Eccentric</h4>
                    <p>Control the weight back until your <strong>arms are straight</strong> and then repeat for more reps. Avoid using momentum during each rep.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="thu-e3">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="thu-e3-title">E3: Standing Overhead Press</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E3: Standing Overhead Press', 'thu-e3')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E3: Standing Overhead Press', 'thu-e3')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Overhead (2s hold)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (12-15)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="thu-e3-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E3: Standing Overhead Press', 'thu-e3')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Shoulders/Triceps (Compound) | 3 sets √ó 8-10 reps | Rest: 2 min | Full body tension, best shoulder builder</div>
                    <div class="equipment">üìç Squat rack / power rack with barbell at shoulder height</div>
                    <a href="Exercise-Videos/SHOULDERS_Overhead-Press-Standing_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="thu-e3-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Set:</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>Grip slightly wider than shoulders</li>
                    <li>Engage core, squeeze glutes</li>
                    <li>Press straight up</li>
                    <li>Look through "window" at top</li>
                    <li>No leg momentum</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/SHOULDERS_Overhead-Press_Dumbbell.mp4">Standing DB shoulder press</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/SHOULDERS_Overhead-Press_Band.mp4">Standing band shoulder press</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/SHOULDERS_Pike-Pushup_Bodyweight.mp4">Pike push-ups</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Set up your rack such that the bar is around <strong>shoulder height</strong>. Grab the bar with an <strong>overhand grip slightly wider than shoulder-width</strong>.</p>
                    <p><strong>üí° Grip Key:</strong> Ensure your wrists are straight and your forearms are vertical when the bar is in the starting position ‚Äì so the grip width will vary based on the individual.</p>
                </div>
                <div class="detailed-step">
                    <h4>üìç STEP 2: Preparing the Press</h4>
                    <p>Lift the bar off the rack and take a couple steps away from the rack. <strong>Engage your core</strong> by contracting your abs slightly (think about as if someone was about to punch your stomach) and <strong>squeeze your glutes</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Press</h4>
                    <p>Take a <strong>deep breath in, hold it</strong>, and then press the bar up. You'll have to ensure your head is not sticking forward in order to do so.</p>
                    <p>Once the bar passes the top of your head, you can <strong>move your head forward</strong> ("look through the window") to allow the bar to be directly over your head in the finishing position.</p>
                    <p><strong>‚ö†Ô∏è Avoid:</strong> Don't use momentum with your legs and make sure that you aren't arching your lower back when pressing. A little bit of an arch is fine as long as it's not excessive, just make sure that your core still remains tight and engaged.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 4: Descend</h4>
                    <p>Bring the bar to your shoulders after each rep while <strong>exhaling your breath</strong>.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="thu-e4">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="thu-e4-title">E4: Kneeling Face Pulls</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E4: Kneeling Face Pulls', 'thu-e4')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E4: Kneeling Face Pulls', 'thu-e4')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused at Peak (2s squeeze)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (15-20)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="thu-e4-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E4: Kneeling Face Pulls', 'thu-e4')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Rear Delts/Upper Back (Isolation) | 3 sets √ó 12-15 reps | Rest: 45-60s | Kneeling position ensures strict form</div>
                    <div class="equipment">üìç Cable machine with rope attachment (set cable high)</div>
                    <a href="Exercise-Videos/SHOULDERS_Face-Pull-Kneeling_Cable.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="thu-e4-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Rope attachment, cable high</li>
                    <li>Kneel on one knee</li>
                    <li>Pull to face, elbows high</li>
                    <li>External rotation at end</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/SHOULDERS_Face-Pull_Dumbbell.mp4">DB face pulls</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/SHOULDERS_Face-Pull_Band.mp4">Banded face pulls</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/SHOULDERS_Face-Pull_Bedsheet.mp4">Bed sheet face pulls</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Set Up</h4>
                    <p>Set up a cable system so that the notch is <strong>a couple notches below from the very top</strong>. Grab the rope with an overhand grip, then get down on one knee.</p>
                    <p><strong>Relax your upper traps</strong> by bringing your shoulders down and away from your ears. You want to maintain this throughout each rep.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÖÔ∏è STEP 2: Pull</h4>
                    <p>Pull the rope <strong>towards your face</strong> while keeping your <strong>elbows high</strong>. Think about pulling with your elbows and squeezing your shoulder-blades together.</p>
                    <p>As you pull, you want to <strong>externally rotate your shoulder</strong> such that your knuckles are facing the ceiling. The end position is as if you were holding a <strong>"biceps flexing pose"</strong>. This helps further target the rotator cuff.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Eccentric</h4>
                    <p>Control the weight back to the starting position and then repeat for another rep.</p>
                    <p><strong>‚ö†Ô∏è Maintain:</strong> Ensure that you aren't excessively arching or rounding your back during each rep. You should feel a strong contraction in the middle of your back.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="30">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="30">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="30">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="thu-e5">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="thu-e5-title">E5: Incline Dumbbell Curls</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E5: Incline Dumbbell Curls', 'thu-e5')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E5: Incline Dumbbell Curls', 'thu-e5')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+1-2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused at Peak (2s squeeze)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (12-15)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="thu-e5-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E5: Incline Dumbbell Curls', 'thu-e5')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Biceps (Isolation) | 2 sets √ó 10-12 reps | Rest: 1-1.5 min | Maximum stretch on biceps, long head focus</div>
                    <div class="equipment">üìç Incline bench (30¬∞) + 2 dumbbells</div>
                    <a href="" class="video-link" style="display: none;">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="thu-e5-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Bench at 30¬∞</li>
                    <li>Arms hanging straight</li>
                    <li>Elbows locked in position</li>
                    <li>Curl to shoulders</li>
                    <li>No swinging</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>No bench? ‚Üí Alternating standing DB curls</li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/ARMS_Bicep-Curl_Band.mp4">Standing band curls</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/ARMS_Bicep-Curl_Bedsheet.mp4">Bed sheet bicep curls</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Set up an incline bench to around <strong>30 degrees</strong> (a similar angle as you'd use for incline presses). Grab two dumbbells and lay with your back on the bench and your <strong>arms hanging straight</strong> by your sides.</p>
                    <p>Your head can lay flat on the bench if comfortable.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Curl</h4>
                    <p>While keeping your <strong>elbows locked in position</strong>, curl both dumbbells up towards your shoulders. Your elbows should remain locked and should not move (a little movement is acceptable) throughout the curl.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Ensure that your upper traps don't tighten up (elevate) as you curl the weight up. Keep them relaxed as much as possible.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descent</h4>
                    <p>Lower the weights back to the starting position (<strong>arms almost fully extended</strong>) in a controlled manner, while keeping your elbows locked in the same position.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="105">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="105">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="105">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- FRIDAY - Lower Body 2 -->
    <div class="workout-day" id="friday">
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="fri-completed">0/4</div>
                <div class="stat-label">Exercises</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="fri-sets">0/13</div>
                <div class="stat-label">Sets</div>
            </div>
        </div>

        <div class="section-title">üî• Lower Body Warm-Up</div>

        <div class="exercise warm-up" data-exercise="fri-warmup-cycling">
            <div class="exercise-title">
                Light Cycling
                <span class="exercise-subtitle">3-5 minutes</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üö¥ Light Cycling</h4>
                    <p><strong>Why:</strong> To start a general warm up of your legs in preparation for the rest of the routine.</p>
                    <p><strong>How:</strong> Use a static bicycle and keep a comfortable, slow pace for a few minutes. Alternatively, you can use an elliptical trainer, a treadmill or just walk a little.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="fri-warmup-glute-bridges">
            <div class="exercise-title">
                Glute Bridges
                <span class="exercise-subtitle">10-15 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üçë Glute Bridges (10-15 reps)</h4>
                    <p><strong>Why:</strong> To activate the glutes and posterior chain before heavy squats and deadlifts. Ensures proper glute recruitment during compound lifts.</p>
                    <p><strong>How:</strong> Lie on your back with knees bent and feet flat on the floor, hip-width apart. Press through your heels to lift your hips until your body forms a straight line from shoulders to knees. Squeeze your glutes hard at the top for 1 second, then lower back down with control.</p>
                    <p><strong>üí° Tip:</strong> Focus on feeling your glutes working, not your lower back or hamstrings. Keep your core engaged throughout.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="fri-warmup-leg-swings-fb">
            <div class="exercise-title">
                Forward & Back Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶µ Forward & Back Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something beside you. Swing your leg front and back as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="fri-warmup-leg-swings-ss">
            <div class="exercise-title">
                Side-to-Side Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Side-to-Side Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something in front of you. Swing your leg side to side as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="fri-warmup-spiderman">
            <div class="exercise-title">
                Spiderman Lunge w/ Thoracic Extension
                <span class="exercise-subtitle">5 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üï∑Ô∏è Spiderman Lunge w/ Thoracic Extension</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the thoracic spine and hips.</p>
                    <p><strong>How:</strong> Start in a plank position with your palms on the ground and shoulder-width apart. Take a lunge forward with one leg such that your foot is placed on the outside of the corresponding hand. The back leg can be bent with your knee on the ground.</p>
                    <p>Next, stay in this position and then rotate your torso and lift one arm towards the sky to try to create a straight line between your arms. Do this for both arms (rotate both ways) and then come back to the starting position and repeat with the other leg ‚Äì this counts as 1 rep.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="fri-warmup-ankle">
            <div class="exercise-title">
                Wall Ankle Mobilization
                <span class="exercise-subtitle">5 per side (2 sec hold)</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶∂ Wall Ankle Mobilization</h4>
                    <p><strong>Why:</strong> To mobilize the ankles which tends to limit squat depth/mobility in most people.</p>
                    <p><strong>How:</strong> Position yourself in front of a wall with one foot ahead and one foot behind. Lean your body forward such that your front knee moves towards the wall (it can touch the wall at the end position). Hold the stretch for 2 seconds, then move back to the starting position.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Ensure the heel of your front foot remains on the ground throughout each rep. Repeat with both sides.</p>
                </div>
            </div>
        </div>

        <div class="section-title">üèãÔ∏è Working Sets</div>

        <div class="exercise" data-exercise="fri-e1">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="fri-e1-title">E1: Deadlift (Conventional)</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E1: Deadlift (Conventional)', 'fri-e1')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E1: Deadlift (Conventional)', 'fri-e1')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5-5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Deadlifts (2s at knee)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (8-10)</option>
                            <option value="deficit">üîº Deficit Deadlifts</option>
                        </select>
                        <select id="fri-e1-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E1: Deadlift (Conventional)', 'fri-e1')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Hamstrings/Glutes/Back (Compound) | 3 sets √ó 6-8 reps | Rest: 3 min | King of posterior chain exercises</div>
                    <div class="equipment">üìç Barbell with weight plates on lifting platform OR squat rack</div>
                    <a href="Exercise-Videos/LEGS_Deadlift-Conventional_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="fri-e1-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Sets (Do These First!):</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                    <li><strong>Set 2:</strong> 70% working weight √ó 3-4 reps (Rest: 60s)</li>
                    <li><strong>Set 3:</strong> 90% working weight √ó 1 rep (Rest: 2min)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>Mid-foot under bar</li>
                    <li>Hip-width stance</li>
                    <li>Overhand grip outside shins</li>
                    <li>Chest up, back straight</li>
                    <li>Bar close to legs</li>
                    <li>Push through heels</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>‚ö†Ô∏è Most technical lift - review form regularly!</li>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/LEGS_Romanian-Deadlift_Dumbbell.mp4">DB Romanian deadlift</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/LEGS_Deadlift_Band.mp4">Band deadlift</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/LEGS_Reverse-Hyperextension_Bodyweight.mp4">Lying reverse hyperextensions</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Stand with your <strong>mid-foot under the bar</strong> when looking down. Your feet should be about <strong>hip-width apart</strong> (or slightly wider) and toes can be slightly pointed out. The stance is a little narrower than that of the squat.</p>
                    <p>Bend over at the hips and grab the bar with an <strong>overhand grip that is about shoulder-width apart</strong> or just outside of your shins. Your arms should be straight.</p>
                </div>
                <div class="detailed-step">
                    <h4>üìç STEP 2: Starting Position</h4>
                    <p>Drop into the starting position by <strong>bending your knees and lifting your chest</strong> until your back is straight. The bar should be <strong>as close to your shins as possible</strong> and should still be over your mid-foot.</p>
                    <p>This is your starting position ‚Äì with your head in line with your back and hips and your lower back straight. Also note that your <strong>butt should be between your knees and head</strong>, rather than too low or too high.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Pull</h4>
                    <p>Take a <strong>deep breath in and hold this breath</strong>. You want to use this breath to brace your core (think about contracting your abs how you would if someone were to punch your stomach).</p>
                    <p>Pull slightly until you feel tension with the bar, then pull the weight off the floor by <strong>straightening your legs and pushing your hips forward simultaneously</strong>. Keep the bar <strong>as close as possible to your legs</strong> as you pull up ‚Äì the bar should travel in a vertical path.</p>
                    <p><strong>‚ö†Ô∏è Critical:</strong> Don't round your back as you pull. Breathe out at the top.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 4: Descent</h4>
                    <p>Return the weight to the floor by first <strong>bending at the hips and then by bending the knees</strong>. Again, the bar should be as close to the legs as possible.</p>
                    <p><strong>üí° Tip:</strong> I'd suggest letting the weight come to a dead stop on the floor and then readjusting your form before your next rep. Once you get better at the deadlift, you can perform your reps in more of a continuous fashion (e.g. "touch and go").</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="fri-e2">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="fri-e2-title">E2: Leg Press</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E2: Leg Press', 'fri-e2')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E2: Leg Press', 'fri-e2')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+5-10 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s bottom)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (12-15)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="fri-e2-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E2: Leg Press', 'fri-e2')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Quads/Glutes (Compound) | 3 sets √ó 10-12 reps | Rest: 2-3 min | Great for quad growth, no spinal load</div>
                    <div class="equipment">üìç Leg press machine (45¬∞ angled OR horizontal)</div>
                    <a href="" class="video-link" style="display: none;">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="fri-e2-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>‚ö†Ô∏è Warm-Up Set:</h4>
                <ul>
                    <li><strong>Set 1:</strong> 50% working weight √ó 8 reps (Rest: 60s)</li>
                </ul>
                <h4>Form Cues:</h4>
                <ul>
                    <li>Feet shoulder-width</li>
                    <li>Knees in line with toes</li>
                    <li>Lower to parallel or deeper</li>
                    <li>Don't lock knees at top</li>
                    <li>Keep lower back on pad</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells? ‚Üí <a href="Exercise-Videos/LEGS_Squat_Dumbbell.mp4">DB squat</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/LEGS_Squat-Paused_Band.mp4">Band paused squat</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/LEGS_Squat-Goblet-Weighted_Dumbbell.mp4">Paused goblet squat</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üí° MACHINE TIP</h4>
                    <p>I would advise using the <strong>"decline" leg press machine</strong> if you have access to it at your gym, since it provides a more effective range of motion and better weight loading. The same steps/tips apply to any leg press variation/machine.</p>
                </div>
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Place your feet <strong>shoulder-width apart</strong> with your toes pointed either straight or slightly pointed outwards. Your feet should be positioned in the <strong>middle of the foot plate</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Push</h4>
                    <p>By pushing mainly with the <strong>heels of your feet</strong> and using your quadriceps, push the weight until your legs are almost fully extended ‚Äì but <strong>DO NOT lock out your knees</strong>. They should be slightly bent at the end position.</p>
                    <p><strong>üí° Decline Press Tip:</strong> If using the decline leg press, this step will instead require you to unhook the safety bars and then lower the weight into the bottom position before pressing with the above tips.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descent</h4>
                    <p>Slowly lower the weight back to the starting position. But at the bottom position, ensure that your <strong>lower back is not rising off the back rest</strong>.</p>
                    <p><strong>‚ö†Ô∏è Critical:</strong> You want to descend until you reach just before the point that your lower back starts to come off the back rest ‚Äì as this indicates your end range of motion.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="150">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="fri-e3">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="fri-e3-title">E3: Reverse Lunges</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E3: Reverse Lunges', 'fri-e3')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E3: Reverse Lunges', 'fri-e3')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg per DB)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Lunges (2s bottom)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (10-12/leg)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="fri-e3-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E3: Reverse Lunges', 'fri-e3')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Quads/Glutes (Compound) | 3 sets √ó 8-10 per leg | Rest: 45-60s | Easier on knees than forward lunges</div>
                    <div class="equipment">üìç 2 dumbbells OR barbell on back OR just bodyweight</div>
                    <a href="Exercise-Videos/LEGS_Reverse-Lunge_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="fri-e3-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Step back with one leg</li>
                    <li>Front thigh to parallel</li>
                    <li>Upper back straight</li>
                    <li>Push through front heel</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>Dumbbells ‚Üí <a href="Exercise-Videos/LEGS_Reverse-Lunge_Dumbbell.mp4">Reverse lunges</a></li>
                    <li>Bands? ‚Üí <a href="Exercise-Videos/LEGS_Split-Squat-Stationary_Band.mp4">Band stationary split squat</a></li>
                    <li>Bodyweight? ‚Üí <a href="Exercise-Videos/LEGS_Reverse-Lunge-Sliding_Bodyweight.mp4">Weighted sliding reverse lunges</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Stand straight with either <strong>dumbbells held by your side</strong> or with a <strong>weighted bar on your back</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 2: Descent</h4>
                    <p>Move one foot back and place the <strong>toes of that foot on the ground</strong> behind you. Bend your front leg to lower your body until your <strong>back knee just about touches the ground</strong>.</p>
                    <p>Your shin should be <strong>near-vertical</strong> at the bottom position.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Ascent</h4>
                    <p>By pushing up with the <strong>heel of your front foot</strong>, raise your body back up to the starting position. Your back should <strong>remain straight</strong> throughout the process.</p>
                </div>
                <div class="detailed-step">
                    <h4>üîÑ STEP 4</h4>
                    <p>Repeat with the other leg.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="exercise" data-exercise="fri-e4">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="fri-e4-title">E4: Seated Weighted Calf Raise</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E4: Seated Weighted Calf Raise', 'fri-e4')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E4: Seated Weighted Calf Raise', 'fri-e4')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5-5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-1-3)</option>
                            <option value="paused">‚è∏Ô∏è Paused Reps (2s stretch)</option>
                            <option value="increased-volume">üìä Increased Volume (+1 set)</option>
                            <option value="increased-reps">üìà Increased Reps (15-20)</option>
                            <option value="drop-sets">üìâ Drop Sets</option>
                        </select>
                        <select id="fri-e4-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E4: Seated Weighted Calf Raise', 'fri-e4')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Calves (Soleus) (Isolation) | 4 sets √ó 10-15 reps | Rest: 1-1.5 min | Targets soleus (knee bent calf muscle)</div>
                    <div class="equipment">üìç Seated calf raise machine OR bench + barbell/dumbbells on thighs</div>
                    <a href="" class="video-link" style="display: none;">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="fri-e4-progression-alert"></div>

            <div class="tips-content">
                <div class="form-cues">
                <h4>Form Cues:</h4>
                <ul>
                    <li>Balls of feet on platform</li>
                    <li>Weight on thighs/knees</li>
                    <li>Pause at bottom (full stretch)</li>
                    <li>Raise as high as possible</li>
                    <li>Pause at top, full ROM</li>
                </ul>
            </div>
                <div class="alternatives">
                <h4>‚ö° Alternatives:</h4>
                <ul>
                    <li>All equipment works ‚Üí <a href="Exercise-Videos/LEGS_Calf-Raise-Seated_Bodyweight.mp4">Same video</a></li>
                </ul>
            </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üí° MACHINE TIP</h4>
                    <p>Ideally you want to perform these on a <strong>seated calf raise machine</strong>. But if unable to do so, use the following tips. The same general guidelines apply for whichever seated calf raise variation you perform.</p>
                </div>
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>If you don't have access to a seated calf raise machine, sit on a bench with <strong>two dumbbells placed on your thighs</strong> and your <strong>toes elevated on weight plates</strong> or any elevated platform. Your heels should be touching the ground.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Raise</h4>
                    <p>Raise both toes <strong>straight up as high as possible</strong> while keeping the dumbbells on your thighs. Hold this <strong>top position for half a second</strong>.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Descent</h4>
                    <p>Lower your heels until they <strong>touch the ground</strong>, pause for half a second, then repeat for another rep.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="75">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- SATURDAY - Accessory & Weak Points -->
    <div class="workout-day" id="saturday">
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="sat-completed">0/4</div>
                <div class="stat-label">Exercises</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="sat-sets">0/12</div>
                <div class="stat-label">Sets</div>
            </div>
        </div>

        <div class="workout-header">
            <h2>üéØ Saturday - Accessory Day</h2>
            <p class="workout-subtitle">Arms & Abs | 30-45 min | RPE 7-8</p>
        </div>

        <div class="info-banner" style="margin: 15px; padding: 12px; background: #1a1a2e; border-left: 3px solid #667eea; border-radius: 8px;">
            <strong>üìã Saturday Guidelines:</strong>
            <ul style="margin: 8px 0 0 20px; color: #aaa; font-size: 13px; line-height: 1.6;">
                <li>‚úÖ Keep RPE at 7-8 (don't train to failure)</li>
                <li>‚úÖ If very sore from Friday, skip this day</li>
                <li>‚ùå Don't add compound lifts (squat, deadlift, bench, OHP)</li>
                <li>‚ùå Don't exceed 45-60 minutes total workout time</li>
            </ul>
        </div>

        <!-- Exercise 1: Weighted Cable Crunch -->
        <div class="exercise" data-exercise="sat-e1">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="sat-e1-title">E1: Weighted Cable Crunch</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E1: Weighted Cable Crunch', 'sat-e1')">üìà History</button>
                    </div>
                    <div class="exercise-meta">Abs (Isolation) | 3 sets √ó 12-15 reps | Rest: 60s | Best weighted ab exercise, progressive overload friendly</div>
                    <div class="equipment">Cable machine with rope attachment</div>
                    <a href="Exercise-Videos/ABS_Crunch-Cable_Cable.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="sat-e1-progression-alert"></div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Attach rope to <strong>high pulley</strong> on cable machine.</p>
                    <p>Kneel down facing the machine, grab rope ends and position them <strong>behind your head</strong> at neck level.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 2: Crunch Down</h4>
                    <ul>
                        <li>Contract your abs to <strong>crunch your torso down</strong></li>
                        <li>Bring <strong>elbows toward knees</strong></li>
                        <li>Keep <strong>hips stationary</strong> - movement comes from abs only, not hip flexion</li>
                        <li>Think about "shortening the distance" between ribcage and pelvis</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Return</h4>
                    <ul>
                        <li><strong>Slow, controlled return</strong> to starting position (3 seconds)</li>
                        <li>Don't let the weight pull you up - resist the weight</li>
                        <li>Feel the stretch in your abs at the top</li>
                        <li>Maintain tension throughout the movement</li>
                    </ul>
                </div>
            </div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Kneel facing cable, hold rope behind head</li>
                        <li>Crunch down by contracting abs, bring elbows to knees</li>
                        <li>Keep hips stationary - movement from abs only</li>
                        <li>Slow controlled eccentric (3 seconds up)</li>
                    </ul>
                </div>
            </div>
            <div class="sets-tracker">
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 1</span>
                        <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                        <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 2</span>
                        <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                        <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 3</span>
                        <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                        <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                </div>
        </div>

        <!-- Exercise 2: Lying Leg Raises -->
        <div class="exercise" data-exercise="sat-e2">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="sat-e2-title">E2: Lying Leg Raises</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E2: Lying Leg Raises', 'sat-e2')">üìà History</button>
                    </div>
                    <div class="exercise-meta">Abs (Isolation) | 3 sets √ó 10-15 reps | Rest: 60s | Lower ab focus, builds core strength</div>
                    <div class="equipment">Mat or flat bench</div>
                    <a href="Exercise-Videos/ABS_Leg-Raise-Lying_Bodyweight.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="sat-e2-progression-alert"></div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Lie flat on your back on a mat or bench.</p>
                    <p>Place hands <strong>under glutes</strong> for support or grab bench sides.</p>
                    <p>Legs together, <strong>slightly bent</strong> at knees (or straight for harder variation).</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Raise Legs</h4>
                    <ul>
                        <li>Contract lower abs to <strong>lift legs to 90 degrees</strong></li>
                        <li>Keep legs together throughout the movement</li>
                        <li>Don't use momentum - controlled lift</li>
                        <li>Press lower back into floor/bench</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower Down</h4>
                    <ul>
                        <li><strong>Slowly lower</strong> legs back down (3-4 seconds)</li>
                        <li>Don't let feet touch the floor - <strong>constant tension</strong></li>
                        <li>Stop when legs are 1-2 inches from floor</li>
                        <li>Keep abs engaged throughout</li>
                    </ul>
                </div>
            </div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Lie flat on back, hands under glutes for support</li>
                        <li>Keep legs straight, raise to 90 degrees</li>
                        <li>Lower slowly without touching floor (constant tension)</li>
                        <li>Don't arch lower back - press it into floor</li>
                    </ul>
                </div>
            </div>
            <div class="sets-tracker">
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 1</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 2</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 3</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                </div>
        </div>

        <!-- Exercise 3: Hollow Body Holds -->
        <div class="exercise" data-exercise="sat-e3">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="sat-e3-title">E3: Hollow Body Holds</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E3: Hollow Body Holds', 'sat-e3')">üìà History</button>
                    </div>
                    <div class="exercise-meta">Abs (Isometric) | 3 sets √ó 30-60s | Rest: 60s | Full core engagement, builds stability and endurance</div>
                    <div class="equipment">Mat</div>
                    <a href="Exercise-Videos/ABS_Hollow-Body-Hold_Bodyweight.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="sat-e3-progression-alert"></div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Lie flat on your back on a mat.</p>
                    <p>Arms extended <strong>overhead</strong>, legs straight.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Hollow Position</h4>
                    <ul>
                        <li><strong>Press lower back into floor</strong> - no arch!</li>
                        <li>Lift <strong>shoulders and legs</strong> off ground (2-6 inches)</li>
                        <li>Arms stay overhead, pointing behind you</li>
                        <li>Body forms a "banana" or "hollow" shape</li>
                        <li>Engage entire core - think "bracing for a punch"</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚è±Ô∏è STEP 3: Hold</h4>
                    <ul>
                        <li>Hold this position for <strong>30-60 seconds</strong></li>
                        <li>Keep breathing - don't hold your breath</li>
                        <li>Maintain lower back pressed to floor</li>
                        <li>If too hard: bend knees or bring arms to sides</li>
                    </ul>
                </div>
            </div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Lie on back, press lower back into floor</li>
                        <li>Lift shoulders and legs slightly off ground</li>
                        <li>Arms extended overhead or by sides</li>
                        <li>Maintain constant core tension - no sagging</li>
                        <li>Breathe normally, don't hold breath</li>
                    </ul>
                </div>
            </div>
            <div class="sets-tracker">
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 1</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Seconds" class="reps-input">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 2</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Seconds" class="reps-input">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 3</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Seconds" class="reps-input">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                </div>
        </div>

        <!-- Exercise 4: Thread the Needle Plank -->
        <div class="exercise" data-exercise="sat-e4">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="sat-e4-title">E4: Thread the Needle Plank</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E4: Thread the Needle Plank', 'sat-e4')">üìà History</button>
                    </div>
                    <div class="exercise-meta">Abs/Obliques (Compound) | 3 sets √ó 10-12 reps/side | Rest: 60s | Rotational core strength, oblique development</div>
                    <div class="equipment">Mat</div>
                    <a href="Exercise-Videos/ABS_Thread-the-Needle-Plank_Bodyweight.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="sat-e4-progression-alert"></div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Start in <strong>side plank position</strong> on your elbow.</p>
                    <p>Bottom elbow under shoulder, feet stacked, hips lifted.</p>
                    <p>Top arm extended <strong>straight up</strong> toward ceiling.</p>
                </div>
                <div class="detailed-step">
                    <h4>üîÑ STEP 2: Thread Through</h4>
                    <ul>
                        <li><strong>Rotate torso</strong> and thread top arm <strong>under your body</strong></li>
                        <li>Reach as far through as possible</li>
                        <li>Feel the twist in your obliques</li>
                        <li>Keep hips stable - don't let them sag</li>
                    </ul>
                </div>
                <div class="detailed-step">
                    <h4>‚Ü©Ô∏è STEP 3: Return</h4>
                    <ul>
                        <li><strong>Rotate back</strong> and return arm to starting position (up toward ceiling)</li>
                        <li>Controlled movement throughout</li>
                        <li>Complete all reps on one side, then switch to other side</li>
                        <li>Maintain plank position - core tight</li>
                    </ul>
                </div>
            </div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Start in side plank position (on elbow)</li>
                        <li>Thread top arm under torso, rotating through core</li>
                        <li>Return to starting position with arm extended up</li>
                        <li>Keep hips elevated throughout movement</li>
                        <li>Focus on controlled rotation from obliques</li>
                    </ul>
                </div>
            </div>
            <div class="sets-tracker">
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 1</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Reps/side" class="reps-input">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 2</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Reps/side" class="reps-input">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                    <div class="set-row">
                        <input type="checkbox" class="set-check" data-rest="60" onchange="updateStats('saturday')">
                        <span class="set-label">Set 3</span>
                        <input type="number" placeholder="Weight" class="weight-input" value="BW" readonly>
                        <input type="number" placeholder="Reps/side" class="reps-input">
                        <select class="rpe-select" onchange="updateRPEColor(this)">
                            <option value="">RPE</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6 - Easy</option>
                            <option value="7">7 - Moderate</option>
                            <option value="8">8 - Hard</option>
                            <option value="9">9 - Very Hard</option>
                            <option value="10">10 - Max</option>
                        </select>
                    </div>
                </div>

            </div>
        </div>

        <div class="info-banner" style="margin: 15px; padding: 12px; background: #1a1a2e; border-left: 3px solid #4CAF50; border-radius: 8px;">
            <strong>üí° Optional Add-ons (after main workout):</strong>
            <ul style="margin: 8px 0 0 20px; color: #aaa; font-size: 13px; line-height: 1.6;">
                <li><strong>Cardio:</strong> 20-30 min LISS (incline walk, cycling) or light HIIT (max 10-15 min, 2x/week total)</li>
                <li><strong>Weak Points:</strong> Add 3-4 sets of lagging muscle groups (shoulders, calves, back)</li>
            </ul>
        </div>
    </div>

    <div class="workout-day" id="sunday">
        <div class="rest-day">
            <h2>üò¥ Full Rest</h2>
            <p>Recovery is when muscle growth happens.<br><br>Focus on:<br>Sleep 7-9 hours<br>Nutrition<br>Hydration<br>Light activity only</p>
        </div>
    </div>

    <!-- ===== PHASE 1: WORKOUT A (Full Body - Mon/Wed/Fri) ===== -->
    <div class="workout-day phase-1" id="workout-a" style="display: none;">
        <div class="workout-header">
            <h2>üî• Workout A (Phase 1)</h2>
            <div class="workout-stats">
                <span>Exercises: <span id="wa-completed">0/5</span></span> |
                <span>Sets: <span id="wa-sets">0/17</span></span>
            </div>
        </div>

        <div class="section-title">üî• Full Body Warm-Up</div>

        <div class="exercise warm-up" data-exercise="wa-warmup-cycling">
            <div class="exercise-title">
                Light Cycling
                <span class="exercise-subtitle">3-5 minutes</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üö¥ Light Cycling</h4>
                    <p><strong>Why:</strong> To start a general warm up of your body in preparation for the full-body routine.</p>
                    <p><strong>How:</strong> Use a static bicycle and keep a comfortable, slow pace for a few minutes. Alternatively, you can use an elliptical trainer, a treadmill or just walk a little.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-glute-bridges">
            <div class="exercise-title">
                Glute Bridges
                <span class="exercise-subtitle">10-15 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üçë Glute Bridges (10-15 reps)</h4>
                    <p><strong>Why:</strong> To activate the glutes and posterior chain before squats. Ensures proper glute recruitment during compound lifts.</p>
                    <p><strong>How:</strong> Lie on your back with knees bent and feet flat on the floor, hip-width apart. Press through your heels to lift your hips until your body forms a straight line from shoulders to knees. Squeeze your glutes hard at the top for 1 second, then lower back down with control.</p>
                    <p><strong>üí° Tip:</strong> Focus on feeling your glutes working, not your lower back or hamstrings. Keep your core engaged throughout.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-leg-swings-fb">
            <div class="exercise-title">
                Forward & Back Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶µ Forward & Back Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something beside you. Swing your leg front and back as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-leg-swings-ss">
            <div class="exercise-title">
                Side-to-Side Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Side-to-Side Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something in front of you. Swing your leg side to side as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-spiderman">
            <div class="exercise-title">
                Spiderman Lunge w/ Thoracic Extension
                <span class="exercise-subtitle">5 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üï∑Ô∏è Spiderman Lunge w/ Thoracic Extension</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the thoracic spine and hips.</p>
                    <p><strong>How:</strong> Start in a plank position with your palms on the ground and shoulder-width apart. Take a lunge forward with one leg such that your foot is placed on the outside of the corresponding hand. The back leg can be bent with your knee on the ground.</p>
                    <p>Next, stay in this position and then rotate your torso and lift one arm towards the sky to try to create a straight line between your arms. Do this for both arms (rotate both ways) and then come back to the starting position and repeat with the other leg ‚Äì this counts as 1 rep.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-ankle">
            <div class="exercise-title">
                Wall Ankle Mobilization
                <span class="exercise-subtitle">5 per side (2 sec hold)</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶∂ Wall Ankle Mobilization</h4>
                    <p><strong>Why:</strong> To mobilize the ankles which tends to limit squat depth/mobility in most people.</p>
                    <p><strong>How:</strong> Position yourself in front of a wall with one foot ahead and one foot behind. Lean your body forward such that your front knee moves towards the wall (it can touch the wall at the end position). Hold the stretch for 2 seconds, then move back to the starting position.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Ensure the heel of your front foot remains on the ground throughout each rep. Repeat with both sides.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-wrist">
            <div class="exercise-title">
                Wrist Circles
                <span class="exercise-subtitle">10 each direction</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Wrist Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the wrist muscles which will be heavily involved in pressing exercises.</p>
                    <p><strong>How:</strong> Clasp your palms together and move your wrists in a circular motion for 10-15 reps in both directions.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-arm-circles">
            <div class="exercise-title">
                Arm Circles
                <span class="exercise-subtitle">10 forward, 10 back</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Arm Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the shoulder joint.</p>
                    <p><strong>How:</strong> Swing your arms forward in a circular motion for 10-15 reps and then repeat in the reverse direction.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-band-overs">
            <div class="exercise-title">
                Band Over-and-Backs
                <span class="exercise-subtitle">5 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Over-and-Backs</h4>
                    <p><strong>Why:</strong> To mobilize the chest/shoulder area and help with shoulder/scapular stability.</p>
                    <p><strong>How:</strong> Hold your band at a little wider than shoulder-width apart. Bring the band over your head and back behind your body while keeping your arms straight. Keep the tension even as you move the band behind you (don't "release the slack"), and then bring it back over your head into the starting position.</p>
                    <p><strong>üí° Tip:</strong> If this is too difficult, widen your hand position. When it gets too easy, narrow your hand position. Avoid arching your back by slightly contracting your core.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-band-pulls">
            <div class="exercise-title">
                Band Pull-Aparts
                <span class="exercise-subtitle">10 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Pull-Aparts</h4>
                    <p><strong>Why:</strong> To warm up the mid-back and rotator cuff musculature to help with your pressing.</p>
                    <p><strong>How:</strong> Hold your band at around shoulder-width apart with an overhand grip. Pull the band apart by squeezing your shoulder blades together. Keep your upper traps relaxed and focus on feeling your mid-back muscles working. Control back to the starting position and repeat.</p>
                    <p><strong>üí° Tip:</strong> You can use just one strand of the band OR a wider grip to make it easier, then narrow your grip overtime.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-band-rotation">
            <div class="exercise-title">
                Band External Rotation
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Band External Rotation</h4>
                    <p><strong>Why:</strong> To warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Use either a band attached to a pole or a pulley system with the handle set up at elbow height. Stand beside the cable pulley or band and externally rotate the shoulder while keeping your elbow at 90 degrees and pinned to the side of your body. Control back to the starting position and repeat.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wa-warmup-db-extensions">
            <div class="exercise-title">
                DB Shoulder Extensions
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üí™ DB Shoulder Extensions</h4>
                    <p><strong>Why:</strong> To further warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Using a light dumbbell in one arm, bring your arm up to shoulder height and bend your elbow to 90 degrees. Externally rotate your shoulder such that the dumbbell is lifted towards the ceiling, but keep your elbow locked in its position.</p>
                </div>
            </div>
        </div>

        <div class="section-title">üèãÔ∏è Working Sets</div>

        <!-- E1: Barbell Bench Press -->
        <div class="exercise" data-exercise="wa-e1">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wa-e1-title">E1: Barbell Bench Press</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E1: Barbell Bench Press', 'wa-e1')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E1: Barbell Bench Press', 'wa-e1')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wa-e1-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E1: Barbell Bench Press', 'wa-e1')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Chest | 3 sets √ó 8-10 reps | Rest: 2-3 min | King of chest exercises, maximum strength builder</div>
                    <div class="equipment">üìç Barbell + Bench</div>
                    <a href="Exercise-Videos/CHEST_Bench-Press_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wa-e1-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Feet flat on floor, drive through heels</li>
                        <li>Arch lower back, create shelf with shoulder blades</li>
                        <li>Retract shoulders, keep them down</li>
                        <li>Bar to mid-chest (nipple line)</li>
                        <li>Drive up explosively, lock out at top</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No barbell? ‚Üí Dumbbell Bench Press</li>
                        <li>No bench? ‚Üí Floor Press</li>
                        <li>Bodyweight? ‚Üí Push-ups</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Lie on the bench with your <strong>eyes directly under the bar</strong>. Plant your feet flat on the floor. Create an arch in your lower back and retract your shoulder blades to create a stable shelf.</p>
                    <p><strong>üí° Tip:</strong> Imagine trying to squeeze a pencil between your shoulder blades.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 2: Unrack & Descent</h4>
                    <p>Grip the bar slightly wider than shoulder-width. Unrack the bar and position it over your mid-chest. Lower the bar with control to your <strong>nipple line</strong>, keeping your elbows at about a 45¬∞ angle to your body.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Don't flare your elbows out to 90¬∞ - this stresses the shoulders.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Press</h4>
                    <p>Drive the bar back up explosively, pressing through your chest and triceps. Lock out at the top with the bar over your shoulders. Maintain your arch and shoulder blade position throughout.</p>
                    <p><strong>üéØ Focus:</strong> Think about driving your back into the bench as you press up.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E2: Back Squat -->
        <div class="exercise" data-exercise="wa-e2">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wa-e2-title">E2: Back Squat</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E2: Back Squat', 'wa-e2')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E2: Back Squat', 'wa-e2')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1 set)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                        </select>
                        <select id="wa-e2-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E2: Back Squat', 'wa-e2')">
                            <!-- Options will be populated dynamically by JavaScript -->
                        </select>
                    </div>
                    <div class="exercise-meta">Legs (Quads) | 4 sets √ó 8-10 reps | Rest: 2-3 min | King of leg exercises, maximum strength and mass builder</div>
                    <div class="equipment">üìç Barbell + Squat Rack</div>
                    <a href="Exercise-Videos/LEGS_Squat-Back_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wa-e2-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Bar rests on traps (high bar) or rear delts (low bar)</li>
                        <li>Chest up, core braced</li>
                        <li>Break at hips and knees together</li>
                        <li>Depth to parallel (hip crease at knee level)</li>
                        <li>Drive through heels, extend hips and knees</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No squat rack? ‚Üí Goblet Squat (dumbbell)</li>
                        <li>Bodyweight? ‚Üí Bulgarian Split Squat</li>
                        <li>Front squat variation ‚Üí Front Squat</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Position the bar on your back traps (high bar) or rear delts (low bar). Step under the bar and place your feet <strong>shoulder-width apart</strong>. Grip the bar with hands just outside shoulders. Unrack and step back.</p>
                    <p><strong>üí° Tip:</strong> Take a deep breath and brace your core like you're about to be punched in the stomach.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 2: Descent</h4>
                    <p>Keep your <strong>chest up</strong> and eyes forward. Break at the hips and knees simultaneously, sitting back as if into a chair. Descend until your <strong>hip crease is at or below knee level</strong> (parallel or deeper). Keep knees tracking over toes.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Don't let your knees cave inward. Push them out to track over your toes.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 3: Ascent</h4>
                    <p><strong>Drive through your heels</strong> and mid-foot to stand back up. Extend hips and knees together. Keep your chest up and core braced throughout. Lock out at the top by fully extending hips and knees.</p>
                    <p><strong>üéØ Focus:</strong> Think about pushing the floor away from you rather than lifting the weight up.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E3: Chest-Supported Row -->
        <div class="exercise" data-exercise="wa-e3">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wa-e3-title">E3: Chest-Supported Row</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E3: Chest-Supported Row', 'wa-e3')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E3: Chest-Supported Row', 'wa-e3')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2s top)</option>
                            <option value="reps">üìà Increase Reps (12-15)</option>
                        </select>
                        <select id="wa-e3-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E3: Chest-Supported Row', 'wa-e3')">
                        </select>
                    </div>
                    <div class="exercise-meta">Back | 3 sets √ó 8-10 reps | Rest: 1.5-2 min | Removes lower back fatigue, allows heavier weight</div>
                    <div class="equipment">üìç Incline Bench + Dumbbells</div>
                    <a href="Exercise-Videos/BACK_Chest-Supported-Row_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wa-e3-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Chest pressed firmly against incline bench</li>
                        <li>Pull elbows back (not wide to sides)</li>
                        <li>Squeeze shoulder blades together at top</li>
                        <li>Control the negative (lowering phase)</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No incline bench? ‚Üí Bent-Over Dumbbell Row</li>
                        <li>No dumbbells? ‚Üí Inverted Row (bodyweight)</li>
                        <li>Want cables? ‚Üí Seated Cable Row</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Set an incline bench to 30-45 degrees. Lie face down with your <strong>chest pressed firmly against the pad</strong>. Let your arms hang straight down holding dumbbells with a neutral grip (palms facing each other).</p>
                    <p><strong>üí° Tip:</strong> Position yourself so the dumbbells don't touch the floor at the bottom of the movement.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Row</h4>
                    <p>Pull the dumbbells up by driving your <strong>elbows straight back</strong> toward the ceiling. Keep your elbows close to your sides (not flared out). Squeeze your shoulder blades together at the top for a 1-second hold.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Don't lift your chest off the bench - stay glued to the pad throughout the movement.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower</h4>
                    <p>Lower the dumbbells with control back to the starting position with <strong>arms fully extended</strong>. Feel the stretch in your lats before starting the next rep.</p>
                    <p><strong>üéØ Focus:</strong> Think about pulling with your elbows, not your hands - this maximizes back engagement.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E4: Dumbbell Lateral Raises -->
        <div class="exercise" data-exercise="wa-e4">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wa-e4-title">E4: Dumbbell Lateral Raises</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E4: Dumbbell Lateral Raises', 'wa-e4')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E4: Dumbbell Lateral Raises', 'wa-e4')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wa-e4-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E4: Dumbbell Lateral Raises', 'wa-e4')">
                        </select>
                    </div>
                    <div class="exercise-meta">Shoulders (Side Delts) | 3 sets √ó 10-15 reps | Rest: 45-60s | Classic side delt builder, easier to progressive overload</div>
                    <div class="equipment">üìç Dumbbells</div>
                    <a href="Exercise-Videos/SHOULDERS_Lateral-Raise-Standing_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wa-e4-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Slight forward lean (15-20 degrees)</li>
                        <li>Raise to shoulder height (no higher)</li>
                        <li>Lead with elbows, not hands</li>
                        <li>Control the descent</li>
                        <li>Avoid using momentum or swinging</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No dumbbells? ‚Üí Band Lateral Raises</li>
                        <li>Want cables? ‚Üí Cable Lateral Raises</li>
                        <li>Seated variation ‚Üí Seated Lateral Raises</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Stand with feet shoulder-width apart, holding dumbbells at your sides with a <strong>slight forward lean</strong> (15-20 degrees). Keep a slight bend in your elbows (10-15 degrees) and maintain this angle throughout.</p>
                    <p><strong>üí° Tip:</strong> Start with lighter weights - lateral raises are all about control and proper form, not heavy weight.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Raise</h4>
                    <p>Lift the dumbbells out to the sides, <strong>leading with your elbows</strong> (not your hands). Raise until your arms are parallel to the floor at shoulder height. Imagine pouring water from a pitcher at the top.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Don't raise above shoulder height - this shifts tension from side delts to traps. Avoid swinging or using momentum.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower</h4>
                    <p>Lower the dumbbells with control back to the starting position at your sides. Take <strong>2-3 seconds on the descent</strong> to maximize time under tension.</p>
                    <p><strong>üéØ Focus:</strong> Think about your elbows drawing semicircles out to the sides - this keeps tension on the side delts.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E5: Single Leg Weighted Calf Raise -->
        <div class="exercise" data-exercise="wa-e5">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wa-e5-title">E5: Single Leg Weighted Calf Raise</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E5: Single Leg Weighted Calf Raise', 'wa-e5')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E5: Single Leg Weighted Calf Raise', 'wa-e5')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wa-e5-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E5: Single Leg Weighted Calf Raise', 'wa-e5')">
                        </select>
                    </div>
                    <div class="exercise-meta">Calves | 4 sets √ó 6-10 reps | Rest: 1-1.5 min | Unilateral, addresses imbalances, maximum ROM</div>
                    <div class="equipment">üìç Step/Platform + Dumbbell</div>
                    <a href="Exercise-Videos/LEGS_Calf-Raise-Single_Bodyweight.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wa-e5-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>One leg on step edge, other leg relaxed</li>
                        <li>Hold dumbbell in same-side hand</li>
                        <li>Full stretch at bottom (heel below toes)</li>
                        <li>Rise to toes with peak contraction</li>
                        <li>Control down, don't bounce</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>Too hard? ‚Üí Two-Leg Standing Calf Raise</li>
                        <li>No weight? ‚Üí Bodyweight Single Leg Raise</li>
                        <li>Machine available? ‚Üí Seated Calf Raise Machine</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Stand on the edge of a step or platform with the <strong>ball of one foot on the edge</strong> and heel hanging off. Hold a dumbbell in the same-side hand, and use your other hand for balance support on a wall or rail.</p>
                    <p><strong>üí° Tip:</strong> Let your non-working leg hang relaxed behind the working leg - don't rest it on the platform.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Rise</h4>
                    <p>Push through the ball of your foot to rise up onto your toes as high as possible. Hold the <strong>peak contraction for 1-2 seconds</strong> at the top, squeezing your calf hard.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Keep your working leg straight (soft knee, not locked) and avoid bending at the knee to cheat the movement.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower</h4>
                    <p>Lower your heel with control below the level of your toes to get a <strong>full stretch</strong> in your calf. Don't bounce at the bottom - pause briefly before the next rep.</p>
                    <p><strong>üéØ Focus:</strong> The stretch at the bottom is crucial - this is where calf growth happens. Take 2-3 seconds on the descent.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="90">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== PHASE 1: WORKOUT B (Full Body - Mon/Wed/Fri) ===== -->
    <div class="workout-day phase-1" id="workout-b" style="display: none;">
        <div class="workout-header">
            <h2>üî• Workout B (Phase 1)</h2>
            <div class="workout-stats">
                <span>Exercises: <span id="wb-completed">0/5</span></span> |
                <span>Sets: <span id="wb-sets">0/16</span></span>
            </div>
        </div>

        <div class="section-title">üî• Full Body Warm-Up</div>

        <div class="exercise warm-up" data-exercise="wb-warmup-cycling">
            <div class="exercise-title">
                Light Cycling
                <span class="exercise-subtitle">3-5 minutes</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üö¥ Light Cycling</h4>
                    <p><strong>Why:</strong> To start a general warm up of your body in preparation for the full-body routine.</p>
                    <p><strong>How:</strong> Use a static bicycle and keep a comfortable, slow pace for a few minutes. Alternatively, you can use an elliptical trainer, a treadmill or just walk a little.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-glute-bridges">
            <div class="exercise-title">
                Glute Bridges
                <span class="exercise-subtitle">10-15 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üçë Glute Bridges (10-15 reps)</h4>
                    <p><strong>Why:</strong> To activate the glutes and posterior chain before deadlifts. Ensures proper glute recruitment during compound lifts.</p>
                    <p><strong>How:</strong> Lie on your back with knees bent and feet flat on the floor, hip-width apart. Press through your heels to lift your hips until your body forms a straight line from shoulders to knees. Squeeze your glutes hard at the top for 1 second, then lower back down with control.</p>
                    <p><strong>üí° Tip:</strong> Focus on feeling your glutes working, not your lower back or hamstrings. Keep your core engaged throughout.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-leg-swings-fb">
            <div class="exercise-title">
                Forward & Back Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶µ Forward & Back Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something beside you. Swing your leg front and back as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-leg-swings-ss">
            <div class="exercise-title">
                Side-to-Side Leg Swings
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Side-to-Side Leg Swings</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the hips and leg muscles for your leg movements.</p>
                    <p><strong>How:</strong> Keep your core tight and hold onto something in front of you. Swing your leg side to side as far as your leg will go.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-spiderman">
            <div class="exercise-title">
                Spiderman Lunge w/ Thoracic Extension
                <span class="exercise-subtitle">5 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üï∑Ô∏è Spiderman Lunge w/ Thoracic Extension</h4>
                    <p><strong>Why:</strong> To mobilize and warm up the thoracic spine and hips.</p>
                    <p><strong>How:</strong> Start in a plank position with your palms on the ground and shoulder-width apart. Take a lunge forward with one leg such that your foot is placed on the outside of the corresponding hand. The back leg can be bent with your knee on the ground.</p>
                    <p>Next, stay in this position and then rotate your torso and lift one arm towards the sky to try to create a straight line between your arms. Do this for both arms (rotate both ways) and then come back to the starting position and repeat with the other leg ‚Äì this counts as 1 rep.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-ankle">
            <div class="exercise-title">
                Wall Ankle Mobilization
                <span class="exercise-subtitle">5 per side (2 sec hold)</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>ü¶∂ Wall Ankle Mobilization</h4>
                    <p><strong>Why:</strong> To mobilize the ankles which tends to limit squat depth/mobility in most people.</p>
                    <p><strong>How:</strong> Position yourself in front of a wall with one foot ahead and one foot behind. Lean your body forward such that your front knee moves towards the wall (it can touch the wall at the end position). Hold the stretch for 2 seconds, then move back to the starting position.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Ensure the heel of your front foot remains on the ground throughout each rep. Repeat with both sides.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-wrist">
            <div class="exercise-title">
                Wrist Circles
                <span class="exercise-subtitle">10 each direction</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Wrist Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the wrist muscles which will be heavily involved in pressing exercises.</p>
                    <p><strong>How:</strong> Clasp your palms together and move your wrists in a circular motion for 10-15 reps in both directions.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-arm-circles">
            <div class="exercise-title">
                Arm Circles
                <span class="exercise-subtitle">10 forward, 10 back</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Arm Circles</h4>
                    <p><strong>Why:</strong> To warm up and mobilize the shoulder joint.</p>
                    <p><strong>How:</strong> Swing your arms forward in a circular motion for 10-15 reps and then repeat in the reverse direction.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-band-overs">
            <div class="exercise-title">
                Band Over-and-Backs
                <span class="exercise-subtitle">5 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Over-and-Backs</h4>
                    <p><strong>Why:</strong> To mobilize the chest/shoulder area and help with shoulder/scapular stability.</p>
                    <p><strong>How:</strong> Hold your band at a little wider than shoulder-width apart. Bring the band over your head and back behind your body while keeping your arms straight. Keep the tension even as you move the band behind you (don't "release the slack"), and then bring it back over your head into the starting position.</p>
                    <p><strong>üí° Tip:</strong> If this is too difficult, widen your hand position. When it gets too easy, narrow your hand position. Avoid arching your back by slightly contracting your core.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-band-pulls">
            <div class="exercise-title">
                Band Pull-Aparts
                <span class="exercise-subtitle">10 reps</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è Band Pull-Aparts</h4>
                    <p><strong>Why:</strong> To warm up the mid-back and rotator cuff musculature to help with your pressing.</p>
                    <p><strong>How:</strong> Hold your band at around shoulder-width apart with an overhand grip. Pull the band apart by squeezing your shoulder blades together. Keep your upper traps relaxed and focus on feeling your mid-back muscles working. Control back to the starting position and repeat.</p>
                    <p><strong>üí° Tip:</strong> You can use just one strand of the band OR a wider grip to make it easier, then narrow your grip overtime.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-band-rotation">
            <div class="exercise-title">
                Band External Rotation
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üîÑ Band External Rotation</h4>
                    <p><strong>Why:</strong> To warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Use either a band attached to a pole or a pulley system with the handle set up at elbow height. Stand beside the cable pulley or band and externally rotate the shoulder while keeping your elbow at 90 degrees and pinned to the side of your body. Control back to the starting position and repeat.</p>
                </div>
            </div>
        </div>

        <div class="exercise warm-up" data-exercise="wb-warmup-db-extensions">
            <div class="exercise-title">
                DB Shoulder Extensions
                <span class="exercise-subtitle">10-15 per side</span>
                <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
            </div>
            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üí™ DB Shoulder Extensions</h4>
                    <p><strong>Why:</strong> To further warm up the rotator cuff muscles.</p>
                    <p><strong>How:</strong> Using a light dumbbell in one arm, bring your arm up to shoulder height and bend your elbow to 90 degrees. Externally rotate your shoulder such that the dumbbell is lifted towards the ceiling, but keep your elbow locked in its position.</p>
                </div>
            </div>
        </div>

        <div class="section-title">üèãÔ∏è Working Sets</div>

        <!-- E1: Incline Dumbbell Press -->
        <div class="exercise" data-exercise="wb-e1">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wb-e1-title">E1: Incline Dumbbell Press</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E1: Incline Dumbbell Press', 'wb-e1')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E1: Incline Dumbbell Press', 'wb-e1')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wb-e1-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E1: Incline Dumbbell Press', 'wb-e1')">
                        </select>
                    </div>
                    <div class="exercise-meta">Upper Chest | 3 sets √ó 10-12 reps | Rest: 2-3 min | Standard exercise, optimal upper chest activation</div>
                    <div class="equipment">üìç Adjustable Bench (30¬∞) + Dumbbells</div>
                    <a href="Exercise-Videos/CHEST_Incline-Press_Dumbbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wb-e1-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Bench angle: 30 degrees</li>
                        <li>Retract shoulder blades</li>
                        <li>Press until dumbbells almost touch</li>
                        <li>Lower to chest level</li>
                        <li>Keep elbows at 45¬∞ angle to body</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No incline bench? ‚Üí Reverse Grip Flat Press</li>
                        <li>No dumbbells? ‚Üí Band Decline Push-ups</li>
                        <li>Have cables? ‚Üí Low-to-High Cable Fly</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Set an adjustable bench to <strong>30 degrees incline</strong>. Sit with dumbbells on your thighs, then lie back while bringing the dumbbells to shoulder level. Retract your shoulder blades and plant your feet flat on the floor.</p>
                    <p><strong>üí° Tip:</strong> Keep the angle at 30¬∞ - higher angles shift too much stress to shoulders instead of upper chest.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Press</h4>
                    <p>Press the dumbbells up and slightly together until they <strong>nearly touch at the top</strong>. Keep your elbows at a 45¬∞ angle to your body (not flared out to 90¬∞). Fully extend your arms at the top.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Don't let the dumbbells drift too far forward - keep them over your upper chest/collarbone area.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower</h4>
                    <p>Lower the dumbbells with control to <strong>chest level</strong>, getting a good stretch in your upper chest. Keep your shoulder blades retracted and maintain tension throughout the descent.</p>
                    <p><strong>üéØ Focus:</strong> Think about pressing through your upper chest, not your shoulders - you should feel this in your clavicular (upper) pecs.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E2: Deadlift -->
        <div class="exercise" data-exercise="wb-e2">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wb-e2-title">E2: Deadlift</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E2: Deadlift', 'wb-e2')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E2: Deadlift', 'wb-e2')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wb-e2-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E2: Deadlift', 'wb-e2')">
                        </select>
                    </div>
                    <div class="exercise-meta">Full Body (Posterior Chain) | 3 sets √ó 6-8 reps | Rest: 2-3 min | King of posterior chain exercises</div>
                    <div class="equipment">üìç Barbell</div>
                    <a href="Exercise-Videos/LEGS_Deadlift-Conventional_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wb-e2-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Feet hip-width apart</li>
                        <li>Bar over midfoot</li>
                        <li>Neutral spine (don't round back)</li>
                        <li>Hinge at hips, grip bar</li>
                        <li>Drive through floor, extend hips</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No barbell? ‚Üí Dumbbell Romanian Deadlift</li>
                        <li>Back issues? ‚Üí Trap Bar Deadlift</li>
                        <li>Beginner? ‚Üí Rack Pulls (elevated)</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Stand with feet hip-width apart, with the bar positioned <strong>over your midfoot</strong> (not toes). Hinge at the hips and bend down to grip the bar just outside your legs. Keep your chest up and create a neutral spine with a slight lower back arch.</p>
                    <p><strong>üí° Tip:</strong> Before lifting, take a deep breath and brace your core like someone is about to punch your stomach.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Lift</h4>
                    <p>Drive through the floor with your <strong>entire foot</strong> (especially heels) while simultaneously extending your hips and knees. Keep the bar close to your body, dragging it up your shins and thighs. Stand tall at the top with hips fully extended.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Never round your lower back - maintain a neutral spine throughout. If your back rounds, the weight is too heavy.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower</h4>
                    <p>Hinge at the hips first, pushing them back while keeping the bar close to your body. Lower with control until the plates touch the ground. <strong>Reset your position</strong> for each rep - don't bounce.</p>
                    <p><strong>üéØ Focus:</strong> Think about pushing the floor away from you, not pulling the bar up - this cues proper leg drive.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E3: Standing Overhead Press -->
        <div class="exercise" data-exercise="wb-e3">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wb-e3-title">E3: Standing Overhead Press</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E3: Standing Overhead Press', 'wb-e3')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E3: Standing Overhead Press', 'wb-e3')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wb-e3-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E3: Standing Overhead Press', 'wb-e3')">
                        </select>
                    </div>
                    <div class="exercise-meta">Shoulders (Front/Side Delts) | 3 sets √ó 8-10 reps | Rest: 2-3 min | Full body tension, best shoulder builder</div>
                    <div class="equipment">üìç Barbell</div>
                    <a href="Exercise-Videos/SHOULDERS_Overhead-Press-Standing_Barbell.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wb-e3-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Bar at collarbone level</li>
                        <li>Elbows slightly forward</li>
                        <li>Press straight up</li>
                        <li>Move head back to clear bar path</li>
                        <li>Lockout overhead with biceps by ears</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No barbell? ‚Üí Dumbbell Overhead Press</li>
                        <li>Seated version ‚Üí Seated Overhead Press</li>
                        <li>Want isolation? ‚Üí Arnold Press</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Stand with feet shoulder-width apart. Hold the barbell at <strong>collarbone level</strong> with hands just outside shoulder width. Keep your elbows slightly in front of the bar, core braced, and glutes squeezed.</p>
                    <p><strong>üí° Tip:</strong> Create a "shelf" with your front delts by keeping your elbows forward - the bar should rest comfortably here.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Press</h4>
                    <p>Press the bar <strong>straight up</strong> while moving your head slightly back to clear the bar path. Once the bar clears your forehead, push your head forward so the bar finishes directly overhead. Lock out your elbows with biceps by your ears.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Don't press the bar forward in an arc - press straight up. Keep your core tight and avoid excessive back arching.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower</h4>
                    <p>Lower the bar with control back to your <strong>collarbone/upper chest</strong>, moving your head back again to clear the bar path. Maintain tension in your shoulders at the bottom position.</p>
                    <p><strong>üéØ Focus:</strong> Think about pressing your body away from the bar, not just pressing the bar away from you - this engages your whole body.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="180">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E4: Pull-Ups -->
        <div class="exercise" data-exercise="wb-e4">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wb-e4-title">E4: Pull-Ups</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E4: Pull-Ups', 'wb-e4')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E4: Pull-Ups', 'wb-e4')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wb-e4-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E4: Pull-Ups', 'wb-e4')">
                        </select>
                    </div>
                    <div class="exercise-meta">Back (Lats) | 3 sets √ó 8-10 reps | Rest: 1.5-2 min | Bodyweight, full range of motion, optimal lat development</div>
                    <div class="equipment">üìç Pull-Up Bar</div>
                    <a href="Exercise-Videos/BACK_Pull-Up_Bodyweight.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wb-e4-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Shoulder-width overhand grip</li>
                        <li>Full hang at bottom (arms extended)</li>
                        <li>Pull chin over bar</li>
                        <li>Squeeze lats at top</li>
                        <li>Control the descent</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>Too hard? ‚Üí Band-Assisted Pull-Ups</li>
                        <li>No pull-up bar? ‚Üí Lat Pulldown</li>
                        <li>Want harder? ‚Üí Weighted Pull-Ups</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Grab the pull-up bar with an <strong>overhand grip</strong> (palms facing away) at shoulder-width or slightly wider. Hang with arms fully extended and engage your shoulders by pulling them down and back (depress and retract).</p>
                    <p><strong>üí° Tip:</strong> Don't just hang limp - create tension before you pull by engaging your lats and pulling your shoulders down.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨ÜÔ∏è STEP 2: Pull</h4>
                    <p>Pull yourself up by driving your <strong>elbows down and back</strong> toward your hips. Keep your chest up and pull until your chin clears the bar. Squeeze your shoulder blades together at the top for a 1-second hold.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Avoid kipping or swinging your legs to generate momentum - keep the movement controlled and strict.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚¨áÔ∏è STEP 3: Lower</h4>
                    <p>Lower yourself with control back to a <strong>full hang position</strong> with arms completely extended. Take 2-3 seconds on the descent to build strength in the eccentric (lowering) phase.</p>
                    <p><strong>üéØ Focus:</strong> Think about pulling your elbows to your pockets, not pulling your chin to the bar - this maximizes lat engagement.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="120">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- E5: Kneeling Face Pulls -->
        <div class="exercise" data-exercise="wb-e5">
            <div class="exercise-header">
                <div>
                    <div class="exercise-title">
                        <span id="wb-e5-title">E5: Kneeling Face Pulls</span>
                        <button class="tips-toggle" onclick="toggleTips(this)">üí° Tips</button>
                        <button class="detailed-steps-toggle" onclick="toggleDetailedSteps(this)">üìã Steps</button>
                        <button class="history-btn" onclick="showExerciseHistory('E5: Kneeling Face Pulls', 'wb-e5')">üìà History</button>
                    </div>
                    <div class="exercise-controls">
                        <select class="progression-method-selector" onchange="applyProgressionMethod(this, 'E5: Kneeling Face Pulls', 'wb-e5')">
                            <option value="">‚ö° Progression Methods</option>
                            <option value="weight">üîº Add Weight (+2.5 kg)</option>
                            <option value="slow-tempo">‚è±Ô∏è Slow Tempo (3-5s descent)</option>
                            <option value="paused">‚è∏Ô∏è Add Pauses (2-3s bottom)</option>
                            <option value="volume">üìä Increase Volume (+1-2 sets)</option>
                            <option value="reps">üìà Increase Reps (12-15 range)</option>
                            <option value="drop-sets">üìâ Drop Sets (to failure)</option>
                        </select>
                        <select id="wb-e5-variant-selector" class="exercise-variant-selector" onchange="changeExerciseVariant(this, 'E5: Kneeling Face Pulls', 'wb-e5')">
                        </select>
                    </div>
                    <div class="exercise-meta">Shoulders (Rear Delts) | 4 sets √ó 10-15 reps | Rest: 45-60s | Kneeling position ensures strict form</div>
                    <div class="equipment">üìç Cable Machine + Rope</div>
                    <a href="Exercise-Videos/SHOULDERS_Face-Pull-Kneeling_Cable.mp4" class="video-link">‚ñ∂ Watch Tutorial</a>
                </div>
            </div>
            <div id="wb-e5-progression-alert"></div>
            <div class="tips-content">
                <div class="form-cues">
                    <h4>Form Cues:</h4>
                    <ul>
                        <li>Rope at upper chest height</li>
                        <li>Pull handles to face level</li>
                        <li>Split handles apart at end</li>
                        <li>Squeeze rear delts and upper back</li>
                        <li>Keep elbows high throughout</li>
                    </ul>
                </div>
                <div class="alternatives">
                    <h4>‚ö° Equipment Alternatives:</h4>
                    <ul>
                        <li>No cables? ‚Üí Band Face Pulls</li>
                        <li>Want dumbbells? ‚Üí Bent-Over Reverse Fly</li>
                        <li>Standing version ‚Üí Standing Face Pulls</li>
                    </ul>
                </div>
            </div>

            <div class="detailed-steps-content">
                <div class="detailed-step">
                    <h4>üéØ STEP 1: Setup</h4>
                    <p>Attach a rope to a cable machine at <strong>upper chest/face height</strong>. Kneel on both knees and grab both ends of the rope with an overhand grip. Position yourself so there's tension on the cable with your arms extended.</p>
                    <p><strong>üí° Tip:</strong> Kneeling removes the ability to use leg drive, forcing you to isolate the rear delts and upper back.</p>
                </div>
                <div class="detailed-step">
                    <h4>‚ÜîÔ∏è STEP 2: Pull</h4>
                    <p>Pull the rope toward your face, keeping your <strong>elbows high</strong> (at shoulder level or above). As the handles reach your face, split the rope apart to the sides of your head. Squeeze your rear delts and upper back hard.</p>
                    <p><strong>‚ö†Ô∏è Important:</strong> Don't let your elbows drop - they should stay at or above shoulder height throughout the movement.</p>
                </div>
                <div class="detailed-step">
                    <h4>üîù STEP 3: Return</h4>
                    <p>Slowly return the handles back together and extend your arms to the starting position with control. Maintain <strong>constant tension</strong> - don't let the weight stack crash down between reps.</p>
                    <p><strong>üéØ Focus:</strong> Think about pulling the rope apart and rotating your palms up at the end - this maximizes external rotation and rear delt activation.</p>
                </div>
            </div>

            <div class="sets-tracker">
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 1</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 2</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 3</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
                <div class="set-row">
                    <input type="checkbox" class="set-check" data-rest="60">
                    <span class="set-label">Set 4</span>
                    <input type="number" placeholder="Weight (kg)" class="weight-input" min="0" step="0.5">
                    <input type="number" placeholder="Reps" class="reps-input" min="0" step="1">
                    <select class="rpe-select" onchange="updateRPEColor(this)">
                        <option value="">RPE</option>
                        <option value="6">6 - Easy</option>
                        <option value="7">7 - Moderate</option>
                        <option value="8">8 - Hard</option>
                        <option value="9">9 - Very Hard</option>
                        <option value="10">10 - Max</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Timer Widget -->
    <div class="timer" id="rest-timer" onclick="cancelTimer()">
        <div class="timer-label">REST TIME</div>
        <div class="timer-exercise" id="timer-exercise"></div>
        <div class="timer-display" id="timer-display">0:00</div>
        <div class="timer-hint">Tap to cancel</div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="bottom-btn sync-sheets" onclick="syncToSheets()">üì§ Sync</button>
        <button class="bottom-btn load-last" onclick="loadLastWorkout()">üì• Load</button>
        <button class="bottom-btn complete-workout" onclick="completeWorkout()">‚úì Finish</button>
    </div>

    <!-- Welcome / Phase Selection Modal -->
    <div class="modal active" id="welcome-modal" style="z-index: 10000;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="modal-title">üëã Welcome to BWS Workout Tracker</h2>
            </div>
            <div style="padding: 20px; line-height: 1.6;">
                <p style="margin-bottom: 20px; color: #ccc;">Choose your training program to get started:</p>

                <div onclick="selectInitialPhase('1')" style="background: #1a1a1a; border: 2px solid #333; border-radius: 12px; padding: 20px; margin-bottom: 15px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='#667eea'" onmouseout="this.style.borderColor='#333'">
                    <div style="font-size: 18px; font-weight: 700; color: #667eea; margin-bottom: 8px;">üìö Phase 1 - Beginner</div>
                    <div style="font-size: 13px; color: #aaa; line-height: 1.5;">
                        ‚Ä¢ 3 days/week (Mon/Wed/Fri)<br>
                        ‚Ä¢ Full body workouts<br>
                        ‚Ä¢ Workout A & B alternating<br>
                        ‚Ä¢ Perfect for building foundation
                    </div>
                </div>

                <div onclick="selectInitialPhase('2')" style="background: #1a1a1a; border: 2px solid #333; border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='#667eea'" onmouseout="this.style.borderColor='#333'">
                    <div style="font-size: 18px; font-weight: 700; color: #667eea; margin-bottom: 8px;">üí™ Phase 2 - Intermediate</div>
                    <div style="font-size: 13px; color: #aaa; line-height: 1.5;">
                        ‚Ä¢ 5 days/week (Mon/Tue/Thu/Fri/Sat)<br>
                        ‚Ä¢ Upper/Lower split<br>
                        ‚Ä¢ More volume & frequency<br>
                        ‚Ä¢ For experienced lifters
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: #0f0f0f; border-radius: 8px; font-size: 12px; color: #888;">
                    ‚ÑπÔ∏è You can change this later in Settings (‚öôÔ∏è)
                </div>
            </div>
        </div>
    </div>

    <!-- Plate Calculator Modal -->
    <div class="modal" id="plate-calculator">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üßÆ Plate Calculator</h2>
                <button class="modal-close" onclick="closePlateCalculator()">&times;</button>
            </div>
            <div class="calc-input-group">
                <label class="calc-label">Target Weight (kg)</label>
                <input type="number" id="calc-target-weight" class="calc-input" placeholder="e.g., 100" step="0.5">
            </div>
            <div class="calc-input-group">
                <label class="calc-label">Bar Weight (kg)</label>
                <input type="number" id="calc-bar-weight" class="calc-input" value="20" step="0.5">
            </div>
            <button class="settings-btn" onclick="calculatePlates()" style="margin-top: 10px;">Calculate</button>
            <div class="calc-result" id="calc-result">
                <div class="calc-result-title">Load Per Side:</div>
                <div class="calc-result-text" id="calc-result-text"></div>
            </div>
        </div>
    </div>

    <!-- RPE Guide Modal -->
    <div class="modal" id="rpe-guide-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üìä RPE - Rate of Perceived Exertion</h2>
                <button class="modal-close" onclick="closeRPEGuide()">&times;</button>
            </div>
            <div style="padding: 15px; color: #aaa; line-height: 1.6;">
                <p style="margin-bottom: 15px; color: #e0e0e0;"><strong>RPE measures how hard a set feels on a scale of 1-10.</strong></p>

                <div style="background: #1a1a2e; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid #f44336;">
                    <div style="color: #f44336; font-weight: bold; margin-bottom: 5px;">RPE 10 - Maximum Effort</div>
                    <div style="font-size: 13px; color: #bbb;">Absolute max - couldn't do another rep with perfect form</div>
                </div>

                <div style="background: #1a1a2e; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid #ff9800;">
                    <div style="color: #ff9800; font-weight: bold; margin-bottom: 5px;">RPE 9 - Very Hard</div>
                    <div style="font-size: 13px; color: #bbb;">Could do 1 more rep max (1 RIR - Rep In Reserve)</div>
                </div>

                <div style="background: #1a1a2e; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid #ff9800;">
                    <div style="color: #ff9800; font-weight: bold; margin-bottom: 5px;">RPE 8 - Hard</div>
                    <div style="font-size: 13px; color: #bbb;">Could do 2 more reps (2 RIR) - <strong>ideal for most sets</strong></div>
                </div>

                <div style="background: #1a1a2e; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid #ffc107;">
                    <div style="color: #ffc107; font-weight: bold; margin-bottom: 5px;">RPE 7 - Moderate</div>
                    <div style="font-size: 13px; color: #bbb;">Could do 3 more reps (3 RIR)</div>
                </div>

                <div style="background: #1a1a2e; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid #4caf50;">
                    <div style="color: #4caf50; font-weight: bold; margin-bottom: 5px;">RPE 6 - Easy</div>
                    <div style="font-size: 13px; color: #bbb;">Could do 4+ more reps - good for warm-up sets</div>
                </div>

                <div style="background: #1a1a2e; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid #888;">
                    <div style="color: #888; font-weight: bold; margin-bottom: 5px;">RPE 1-5 - Very Easy</div>
                    <div style="font-size: 13px; color: #bbb;">Light warm-up, easy movement</div>
                </div>

                <div style="background: #2e1a1a; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #667eea;">
                    <div style="color: #667eea; font-weight: bold; margin-bottom: 8px;">üí° How to Use RPE</div>
                    <ul style="font-size: 13px; color: #bbb; margin: 0; padding-left: 20px;">
                        <li><strong>Working sets:</strong> Aim for RPE 7-9 (leave 1-3 reps in reserve)</li>
                        <li><strong>Last set:</strong> Can push to RPE 9-10 if feeling good</li>
                        <li><strong>Warm-ups:</strong> Keep at RPE 5-6 (very easy)</li>
                        <li><strong>Avoid failure:</strong> Training to RPE 10 every set causes excessive fatigue</li>
                        <li><strong>Progressive overload:</strong> Same RPE with heavier weight = progress!</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Google Sheets Setup Modal -->
    <div class="modal" id="sheets-setup-modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title">üîó Connect Google Sheets</h2>
                <button class="modal-close" onclick="closeGoogleSheetsSetup()">&times;</button>
            </div>
            <div style="padding: 20px; color: #aaa; line-height: 1.8;">
                <div id="sheets-setup-step1">
                    <h3 style="color: #667eea; margin-bottom: 15px;">üìù Step 1: Prepare Horizontal Spreadsheet</h3>
                    <p style="margin-bottom: 15px; font-size: 14px;">This script works with <strong>horizontal layout</strong> where workouts grow left-to-right over time.</p>

                    <div style="background: #1a1a2e; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #667eea;">
                        <div style="font-weight: bold; color: #667eea; margin-bottom: 10px;">Required Tabs (exact names):</div>
                        <div style="font-weight: bold; color: #4caf50; margin-top: 12px; margin-bottom: 8px;">Phase 2 (4 tabs):</div>
                        <ul style="margin: 0; padding-left: 20px; font-size: 12px; line-height: 1.8;">
                            <li><code style="background: #0a0a0a; padding: 2px 6px; border-radius: 3px;">Upper Body 1 (Phase 2)</code></li>
                            <li><code style="background: #0a0a0a; padding: 2px 6px; border-radius: 3px;">Lower Body 1 (Phase 2)</code></li>
                            <li><code style="background: #0a0a0a; padding: 2px 6px; border-radius: 3px;">Upper Body 2 (Phase 2)</code></li>
                            <li><code style="background: #0a0a0a; padding: 2px 6px; border-radius: 3px;">Lower Body 2 (Phase 2)</code></li>
                        </ul>
                        <div style="font-weight: bold; color: #4caf50; margin: 12px 0 8px 0;">Phase 1 (optional):</div>
                        <ul style="margin: 0; padding-left: 20px; font-size: 12px; line-height: 1.8;">
                            <li><code style="background: #0a0a0a; padding: 2px 6px; border-radius: 3px;">Workout A (Phase 1)</code></li>
                            <li><code style="background: #0a0a0a; padding: 2px 6px; border-radius: 3px;">Workout B (Phase 1)</code></li>
                        </ul>
                    </div>

                    <div style="background: #1a2e1a; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #4caf50;">
                        <div style="font-weight: bold; color: #4caf50; margin-bottom: 8px;">üìä Required Structure (each tab):</div>
                        <code style="background: #0a0a0a; padding: 8px; border-radius: 4px; display: block; font-size: 9px; overflow-x: auto; white-space: pre; margin-bottom: 10px;">
Row 1:  | Tab Name | [DATE] | [DATE] | ...
Row 2:  |          | R | W  | R | W  | ...
Row 3:  | Exercise |   |    |   |    | ...
Row 4:  | SET 1    | 10| 25 | 12| 27 | ...
                        </code>
                        <p style="margin: 0; font-size: 11px; color: #888;">
                            ‚úÖ Row 1: Dates in merged cells (format: YYYY-MM-DD, e.g., "2025-12-11")<br>
                            ‚úÖ Row 2: R | W headers repeat for each date<br>
                            ‚úÖ Column A: Exercise names + SET labels (e.g., "SET 1: 8-10")
                        </p>
                    </div>

                    <div style="background: #2e1a1a; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #f44336;">
                        <div style="color: #f44336; font-weight: bold; margin-bottom: 8px;">‚ö†Ô∏è One-Time Setup Required</div>
                        <ol style="margin: 0; padding-left: 20px; font-size: 12px;">
                            <li style="margin-bottom: 6px;">For each existing workout column (R/W pair):</li>
                            <li style="margin-bottom: 6px; margin-left: 15px;">Select 2 cells in Row 1 above it</li>
                            <li style="margin-bottom: 6px; margin-left: 15px;">Right-click ‚Üí Merge cells</li>
                            <li style="margin-bottom: 6px; margin-left: 15px;">Enter date (YYYY-MM-DD, e.g., "2025-12-11")</li>
                        </ol>
                        <p style="margin: 8px 0 0 0; font-size: 11px; color: #aaa;">Future dates will be auto-created by PWA!</p>
                    </div>

                    <button onclick="showSheetsStep2()" style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; font-weight: bold;">
                        Continue to Step 2 ‚Üí
                    </button>
                </div>

                <div id="sheets-setup-step2" style="display: none;">
                    <h3 style="color: #667eea; margin-bottom: 15px;">‚öôÔ∏è Step 2: Set Up Apps Script</h3>
                    <ol style="margin: 0 0 20px 20px; padding: 0;">
                        <li style="margin-bottom: 10px;">In your Google Sheet, click <strong>Extensions ‚Üí Apps Script</strong></li>
                        <li style="margin-bottom: 10px;">Delete any existing code in the editor</li>
                        <li style="margin-bottom: 10px;">Copy the Apps Script code (see docs/GOOGLE-SHEETS-UPDATED-SCRIPT.md)</li>
                        <li style="margin-bottom: 10px;">Paste it into the Apps Script editor</li>
                        <li style="margin-bottom: 10px;">Click the <strong>Save</strong> icon (üíæ)</li>
                    </ol>
                    <div style="background: #1a1a2e; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #667eea;">
                        <div style="color: #667eea; font-weight: bold; margin-bottom: 8px;">üí° Need the Script Code?</div>
                        <p style="margin: 0; font-size: 13px;">The Apps Script code is in <code style="background: #0a0a0a; padding: 2px 6px; border-radius: 4px;">docs/Google-Sheets-Setup.md</code> in this repository.</p>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="showSheetsStep1()" style="flex: 1; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                            ‚Üê Back
                        </button>
                        <button onclick="showSheetsStep3()" style="flex: 2; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; font-weight: bold;">
                            Continue to Step 3 ‚Üí
                        </button>
                    </div>
                </div>

                <div id="sheets-setup-step3" style="display: none;">
                    <h3 style="color: #667eea; margin-bottom: 15px;">üöÄ Step 3: Deploy the Web App</h3>
                    <ol style="margin: 0 0 20px 20px; padding: 0;">
                        <li style="margin-bottom: 10px;">In Apps Script editor, click <strong>Deploy ‚Üí New deployment</strong></li>
                        <li style="margin-bottom: 10px;">Click the gear icon ‚öôÔ∏è next to "Select type"</li>
                        <li style="margin-bottom: 10px;">Choose <strong>"Web app"</strong></li>
                        <li style="margin-bottom: 10px;">Set <strong>"Execute as"</strong> to <strong>"Me"</strong></li>
                        <li style="margin-bottom: 10px;">Set <strong>"Who has access"</strong> to <strong>"Anyone"</strong></li>
                        <li style="margin-bottom: 10px;">Click <strong>"Deploy"</strong></li>
                        <li style="margin-bottom: 10px;">Authorize the script (you may see a security warning - click Advanced ‚Üí Go to [Your Script])</li>
                        <li style="margin-bottom: 10px;">Copy the <strong>Web app URL</strong> that appears</li>
                    </ol>
                    <div style="background: #2e1a1a; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #f44336;">
                        <div style="color: #f44336; font-weight: bold; margin-bottom: 8px;">‚ö†Ô∏è Important Security Note</div>
                        <p style="margin: 0; font-size: 13px;">This URL is private to you. Don't share it publicly - it allows writing to your Google Sheet!</p>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="showSheetsStep2()" style="flex: 1; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                            ‚Üê Back
                        </button>
                        <button onclick="showSheetsStep4()" style="flex: 2; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; font-weight: bold;">
                            Continue to Step 4 ‚Üí
                        </button>
                    </div>
                </div>

                <div id="sheets-setup-step4" style="display: none;">
                    <h3 style="color: #667eea; margin-bottom: 15px;">‚úÖ Step 4: Connect to This App</h3>
                    <p style="margin-bottom: 15px;">Paste your Google Apps Script Web App URL below:</p>
                    <input type="text" id="sheets-url-input" placeholder="https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec" style="width: 100%; padding: 12px; background: #1a1a1a; border: 1px solid #333; border-radius: 8px; color: #e0e0e0; font-size: 14px; margin-bottom: 15px; box-sizing: border-box;">

                    <div style="background: #1a1a2e; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #4caf50;">
                        <div style="color: #4caf50; font-weight: bold; margin-bottom: 8px;">üí° Where to Find Your URL?</div>
                        <p style="margin: 0; font-size: 13px;">After deploying, Apps Script shows a "Web app URL". It looks like: <code style="background: #0a0a0a; padding: 2px 6px; border-radius: 4px; font-size: 12px;">https://script.google.com/macros/s/[ID]/exec</code></p>
                    </div>

                    <div style="display: flex; gap: 10px;">
                        <button onclick="showSheetsStep3()" style="flex: 1; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                            ‚Üê Back
                        </button>
                        <button onclick="saveSheetsURL()" style="flex: 2; padding: 12px; background: #4caf50; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; font-weight: bold;">
                            üíæ Save & Test Connection
                        </button>
                    </div>
                </div>

                <div id="sheets-setup-success" style="display: none; text-align: center;">
                    <div style="font-size: 64px; margin-bottom: 20px;">‚úÖ</div>
                    <h3 style="color: #4caf50; margin-bottom: 15px;">Google Sheets Connected!</h3>
                    <p style="margin-bottom: 20px;">Your workout data will now sync to your Google Sheet.</p>
                    <button onclick="closeGoogleSheetsSetup()" style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; font-weight: bold;">
                        Done
                    </button>
                </div>

                <div id="sheets-setup-error" style="display: none;">
                    <div style="background: #2e1a1a; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #f44336;">
                        <div style="color: #f44336; font-weight: bold; margin-bottom: 8px;">‚ùå Connection Failed</div>
                        <p id="sheets-error-message" style="margin: 0; font-size: 13px;"></p>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="showSheetsStep4(); document.getElementById('sheets-setup-error').style.display='none';" style="flex: 1; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                            ‚Üê Try Again
                        </button>
                        <button onclick="closeGoogleSheetsSetup()" style="flex: 1; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Exercise History Modal -->
    <div class="modal" id="exercise-history-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="history-modal-title">Exercise History</h2>
                <button class="modal-close" onclick="closeHistoryModal()">&times;</button>
            </div>
            <div id="history-modal-content"></div>
        </div>
    </div>

    <!-- Exercise Progression Modal -->
    <div class="modal" id="progression-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="progression-modal-title">Change Exercise</h2>
                <button class="modal-close" onclick="closeProgressionModal()">&times;</button>
            </div>
            <div class="modal-tabs">
                <button class="modal-tab active" onclick="switchProgressionTab('easier')">Easier</button>
                <button class="modal-tab" onclick="switchProgressionTab('harder')">Harder</button>
                <button class="modal-tab" onclick="switchProgressionTab('alternate')">Alternate</button>
            </div>
            <div id="progression-modal-content"></div>
        </div>
    </div>

    <script>
        // ===== GOOGLE SHEETS CONFIGURATION =====
        // Google Sheets URL is now stored in localStorage for security
        // Users must set up their own Google Sheets integration
        function getSheetsURL() {
            return localStorage.getItem('sheets_web_app_url') || '';
        }

        function setSheetsURL(url) {
            localStorage.setItem('sheets_web_app_url', url);
        }

        // ===== EXERCISE PROGRESSION DATABASE (BOX-BASED STRUCTURE) =====
        const EXERCISE_PROGRESSION = {
            "E1: Incline Dumbbell Press": {
                defaultExercise: "Incline Dumbbell Press",
                defaultBox: "normal",

                // Exercise metadata
                muscleGroup: "Upper Chest",
                exerciseType: "Compound",
                sets: 4,
                reps: "8-10",
                rest: "2-3 min",

                // Progression methods (same exercise, different intensity)
                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo", desc: "3-5 second descent on each rep", tip: "Focus on controlling the weight down slowly" },
                    "paused": { name: "Paused Reps", desc: "2-3 second pause at bottom", tip: "Hold at stretch position to increase time under tension" },
                    "volume": { name: "Increase Volume", desc: "Add 1-2 extra sets", tip: "More total volume for muscle growth" },
                    "reps": { name: "Increase Reps", desc: "Move to 12-15 rep range", tip: "Higher reps for hypertrophy" },
                    "drop-sets": { name: "Drop Sets", desc: "To failure, then drop 20% weight and continue", tip: "Advanced intensity technique" }
                },

                // The 3 boxes with their exercises
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Floor Press",
                                muscleGroup: "Upper Chest",
                                exerciseType: "Compound",
                                note: "Safer on shoulders, reduced ROM",
                                desc: "Same movement on floor - safer, less ROM",
                                video: "Exercise-Videos/CHEST_Flat-Press_Dumbbell.mp4",
                                equipment: "üìç Flat floor space + 2 dumbbells",
                                formCues: [
                                    "Lie flat on floor with knees bent",
                                    "Retract shoulder blades",
                                    "Lower dumbbells until elbows touch floor",
                                    "Press up until arms fully extended",
                                    "Reduced ROM makes it easier on shoulders"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Have bench?", suggestion: "Reverse Grip Flat Press", reason: "More ROM for muscle growth" },
                                    { condition: "No dumbbells?", suggestion: "Band Decline Push-ups", reason: "Bodyweight alternative" }
                                ]
                            },
                            {
                                name: "Band Decline Push-ups",
                                muscleGroup: "Upper Chest",
                                exerciseType: "Compound",
                                note: "Bodyweight alternative, portable",
                                desc: "Bodyweight with band resistance",
                                video: "Exercise-Videos/CHEST_Decline-Close-Grip-Pushup_Bodyweight.mp4",
                                equipment: "üìç Flat bench OR box + resistance band",
                                formCues: [
                                    "Feet elevated on bench/box",
                                    "Band across upper back, hands on ends",
                                    "Hands shoulder-width apart",
                                    "Lower chest to floor with control",
                                    "Press explosively back up"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Have dumbbells?", suggestion: "Floor Press", reason: "Easier to progress with weights" },
                                    { condition: "No bands?", suggestion: "Regular decline push-ups", reason: "Pure bodyweight option" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Incline Dumbbell Press",
                                muscleGroup: "Upper Chest",
                                exerciseType: "Compound",
                                note: "Standard exercise, optimal upper chest activation",
                                desc: "Standard upper chest press at 30¬∞",
                                video: "Exercise-Videos/CHEST_Incline-Press_Dumbbell.mp4",
                                equipment: "üìç Adjustable bench (30¬∞) + 2 dumbbells",
                                isDefault: true,
                                formCues: [
                                    "Retract shoulder blades",
                                    "Press until dumbbells almost touch",
                                    "Lower to chest level",
                                    "Keep elbows at 45¬∞ angle to body"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No incline bench?", suggestion: "Reverse Grip Flat Press", reason: "Targets upper chest on flat bench" },
                                    { condition: "No dumbbells?", suggestion: "Band Decline Push-ups", reason: "Bodyweight with band resistance" },
                                    { condition: "Want harder?", suggestion: "Close Grip Incline Press", reason: "More tricep emphasis" }
                                ]
                            },
                            {
                                name: "Reverse Grip Flat Press",
                                muscleGroup: "Upper Chest",
                                exerciseType: "Compound",
                                note: "No incline bench needed, targets upper chest",
                                desc: "Upper chest emphasis, flat bench",
                                video: "Exercise-Videos/CHEST_Flat-Press_Dumbbell.mp4",
                                equipment: "üìç Flat bench + 2 dumbbells",
                                formCues: [
                                    "Palms facing toward you (supinated grip)",
                                    "Retract shoulder blades",
                                    "Lower dumbbells to lower chest",
                                    "Press straight up",
                                    "Emphasizes upper chest more than regular grip"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Have incline bench?", suggestion: "Incline Dumbbell Press", reason: "Better upper chest isolation" },
                                    { condition: "No dumbbells?", suggestion: "Floor Press", reason: "Easier on shoulders" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Close Grip Incline Press",
                                muscleGroup: "Upper Chest",
                                exerciseType: "Compound",
                                note: "Increased tricep involvement, harder variant",
                                desc: "Narrower grip for more tricep emphasis",
                                video: "Exercise-Videos/CHEST_Incline-Press_Dumbbell.mp4",
                                equipment: "üìç Adjustable bench (30¬∞) + 2 dumbbells",
                                formCues: [
                                    "Hands closer than shoulder-width",
                                    "Dumbbells touch throughout movement",
                                    "Elbows stay closer to body",
                                    "Press straight up",
                                    "More tricep activation than standard grip"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Incline Dumbbell Press", reason: "Standard grip is easier" },
                                    { condition: "No incline bench?", suggestion: "Single Arm Incline Press", reason: "Unilateral variation" }
                                ]
                            },
                            {
                                name: "Single Arm Incline Press",
                                muscleGroup: "Upper Chest",
                                exerciseType: "Compound",
                                note: "Unilateral, challenges core stability",
                                desc: "Unilateral for core stability challenge",
                                video: "Exercise-Videos/CHEST_Incline-Press_Dumbbell.mp4",
                                equipment: "üìç Adjustable bench (30¬∞) + 1 dumbbell",
                                formCues: [
                                    "One dumbbell only",
                                    "Brace core to resist rotation",
                                    "Free hand can be on bench for stability",
                                    "Press straight up without twisting torso",
                                    "Switch arms between sets"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Want bilateral?", suggestion: "Close Grip Incline Press", reason: "Both arms working together" },
                                    { condition: "Core too fatigued?", suggestion: "Incline Dumbbell Press", reason: "Less core demand" }
                                ]
                            }
                        ]
                    }
                }
            },
            "E2: Chest-Supported Row": {
                defaultExercise: "Chest-Supported Row",
                defaultBox: "normal",

                // Exercise metadata
                muscleGroup: "Mid-Back",
                exerciseType: "Compound",
                sets: 3,
                reps: "8-10",
                rest: "2 min",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s pull, 1s squeeze, 3s lower", tip: "Focus on control, reduce weight by 20-30%" },
                    "paused": { name: "Paused Reps", desc: "2-3s squeeze at top of each rep", tip: "Keep elbows high, shoulder blades together" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1-2 extra sets", tip: "Only if recovery is good" },
                    "increased-reps": { name: "Increased Reps", desc: "12-15 reps instead of 8-10", tip: "Reduce weight by 15-20%" },
                    "drop-sets": { name: "Drop Sets", desc: "After last set to failure, drop weight 20-30% and continue", tip: "Rest only 10-15s between drops" },
                    "rest-pause": { name: "Rest-Pause", desc: "Go to failure, rest 15s, continue for 3-5 more reps", tip: "Use on last set only" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Bent Over Band Row",
                                muscleGroup: "Mid-Back",
                                exerciseType: "Compound",
                                note: "Lighter resistance, easier setup",
                                desc: "Lighter resistance, easier setup",
                                video: "Exercise-Videos/BACK_Bent-Over-Row_Band.mp4",
                                equipment: "üìç Resistance band + anchor point",
                                formCues: [
                                    "Step on band, hinge at hips to 45 degrees",
                                    "Pull band to lower chest, elbows close to body",
                                    "Squeeze shoulder blades together at top",
                                    "Control the return, don't let band snap back"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bands?", suggestion: "Inverted Row (Bodyweight)", reason: "Bodyweight horizontal pull" },
                                    { condition: "Have dumbbells?", suggestion: "Single Arm DB Row (lighter weight)", reason: "Easier to control unilaterally" }
                                ]
                            },
                            {
                                name: "Inverted Row (Bodyweight)",
                                muscleGroup: "Mid-Back",
                                exerciseType: "Compound",
                                note: "Bodyweight horizontal pull, scalable with body angle",
                                desc: "Bodyweight horizontal pull",
                                video: "Exercise-Videos/BACK_Inverted-Row_Bedsheet.mp4",
                                equipment: "üìç Sturdy bar/bedsheet + door anchor",
                                formCues: [
                                    "Body straight, heels on ground, pull chest to bar",
                                    "Keep core tight, don't let hips sag",
                                    "Pull with elbows, not just arms",
                                    "Make easier: raise bar higher or bend knees"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bar?", suggestion: "Bedsheet Row (door anchor)", reason: "Same movement pattern" },
                                    { condition: "Too hard?", suggestion: "Bent Over Band Row", reason: "Can scale resistance easier" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Chest-Supported Row",
                                muscleGroup: "Mid-Back",
                                exerciseType: "Compound",
                                note: "Removes lower back fatigue, allows heavier weight",
                                desc: "Standard exercise, optimal mid-back activation",
                                video: "Exercise-Videos/BACK_Chest-Supported-Row_Dumbbell.mp4",
                                equipment: "üìç Incline bench (45¬∞) + 2 dumbbells",
                                formCues: [
                                    "Set bench to 45 degrees, lie chest down",
                                    "Pull dumbbells to hips, elbows high",
                                    "Squeeze shoulder blades together at top",
                                    "Lower with control, full stretch at bottom"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No incline bench?", suggestion: "Single Arm DB Row", reason: "Same muscles, different setup" },
                                    { condition: "Lower back issues?", suggestion: "Inverted Row", reason: "No spinal loading" },
                                    { condition: "Have cables?", suggestion: "Seated Cable Row", reason: "Constant tension" }
                                ],
                                isDefault: true
                            },
                            {
                                name: "Single Arm Dumbbell Row",
                                muscleGroup: "Mid-Back",
                                exerciseType: "Compound",
                                note: "Unilateral, can use heavier weight, addresses imbalances",
                                desc: "Unilateral for more weight",
                                video: "Exercise-Videos/BACK_Single-Arm-Row_Dumbbell.mp4",
                                equipment: "üìç Flat bench + 1 dumbbell",
                                formCues: [
                                    "Hand and knee on bench, other foot on floor",
                                    "Pull dumbbell to hip, not shoulder",
                                    "Keep torso parallel to ground, don't rotate",
                                    "Full stretch at bottom, squeeze at top"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bench?", suggestion: "Bent Over Band Row", reason: "Can do standing" },
                                    { condition: "Want bilateral?", suggestion: "Chest-Supported Row", reason: "Both arms together" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Pendlay Row",
                                muscleGroup: "Mid-Back",
                                exerciseType: "Compound",
                                note: "From floor each rep, more explosive power development",
                                desc: "From floor each rep, more explosive",
                                video: "",
                                equipment: "üìç Barbell + plates (or heavy dumbbells)",
                                formCues: [
                                    "Bar starts on floor each rep (dead stop)",
                                    "Explosive pull to chest, then controlled lower back to floor",
                                    "Torso parallel to ground, not upright",
                                    "Full reset between reps, no bouncing"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No barbell?", suggestion: "Chest-Supported Row with Pause", reason: "Can make dumbbells harder with tempo" },
                                    { condition: "Lower back fatigues?", suggestion: "Chest-Supported Row", reason: "Removes spinal loading" }
                                ]
                            },
                            {
                                name: "Chest-Supported Row with Pause",
                                muscleGroup: "Mid-Back",
                                exerciseType: "Compound",
                                note: "2-3s pause at top, extra time under tension",
                                desc: "2-3s pause at top for extra time under tension",
                                video: "",
                                equipment: "üìç Incline bench (45¬∞) + 2 dumbbells",
                                formCues: [
                                    "Same setup as regular chest-supported row",
                                    "Pull dumbbells to hips, HOLD for 2-3 seconds",
                                    "Keep tension in back during pause, don't relax",
                                    "Lower slowly (3 seconds) for maximum hypertrophy"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Chest-Supported Row", reason: "Remove pause, same movement" },
                                    { condition: "Want more power?", suggestion: "Pendlay Row", reason: "Explosive variation" }
                                ]
                            }
                        ]
                    }
                }
            },
            "E3: Lean-Away Cable Lateral Raises": {
                defaultExercise: "Lean-Away Cable Lateral Raises",
                defaultBox: "normal",

                // Exercise metadata
                muscleGroup: "Side Delts",
                exerciseType: "Isolation",
                sets: 3,
                reps: "10-12",
                rest: "45-60s",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (2-1-2)", desc: "2s raise, 1s hold, 2s lower", tip: "Focus on mind-muscle connection" },
                    "paused": { name: "Paused Reps", desc: "1-2s hold at top of each rep", tip: "Keep tension throughout the set" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1-2 extra sets", tip: "Side delts recover quickly" },
                    "increased-reps": { name: "Increased Reps", desc: "15-20 reps instead of 10-12", tip: "Great for metabolic stress" },
                    "drop-sets": { name: "Drop Sets", desc: "After failure, drop weight 30% and continue", tip: "Maximum pump, use sparingly" },
                    "21s": { name: "21s Method", desc: "7 bottom half, 7 top half, 7 full ROM", tip: "Brutal finisher, reduce weight by 40%" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Band Lateral Raises",
                                muscleGroup: "Side Delts",
                                exerciseType: "Isolation",
                                note: "Lighter resistance, easier to control",
                                desc: "Lighter resistance",
                                video: "Exercise-Videos/SHOULDERS_Lateral-Raise_Band.mp4",
                                equipment: "üìç Resistance band",
                                formCues: [
                                    "Step on band center, hands at sides",
                                    "Raise arms to shoulder height, slight bend in elbows",
                                    "Lead with elbows, not hands (pour a pitcher)",
                                    "Control the descent, resist the band"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bands?", suggestion: "Bodyweight Sliding Lateral Raises", reason: "Can do on smooth floor" },
                                    { condition: "Have dumbbells?", suggestion: "DB Lateral Raises (light weight)", reason: "Better progressive overload" }
                                ]
                            },
                            {
                                name: "Seated Dumbbell Lateral Raises",
                                muscleGroup: "Side Delts",
                                exerciseType: "Isolation",
                                note: "Seated position prevents body English, stricter form",
                                desc: "Seated for stricter form",
                                video: "Exercise-Videos/SHOULDERS_Lateral-Raise_Dumbbell.mp4",
                                equipment: "üìç Flat bench + 2 light dumbbells",
                                formCues: [
                                    "Sit upright, dumbbells at sides, slight forward lean",
                                    "Raise to shoulder height, thumbs slightly down",
                                    "Can't cheat by leaning back (you're seated)",
                                    "Lower slowly, keep constant tension"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bench?", suggestion: "Standing DB Lateral Raises", reason: "Same movement pattern" },
                                    { condition: "No dumbbells?", suggestion: "Band Lateral Raises", reason: "Easier resistance curve" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Lean-Away Cable Lateral Raises",
                                muscleGroup: "Side Delts",
                                exerciseType: "Isolation",
                                note: "Constant tension from cables, lean increases stretch",
                                desc: "Standard exercise, optimal side delt activation",
                                video: "Exercise-Videos/SHOULDERS_Lateral-Raise-Lean-Away_Cable.mp4",
                                equipment: "üìç Cable machine (low pulley) + D-handle",
                                formCues: [
                                    "Stand sideways to cable, grab handle with far hand",
                                    "Lean away from cable slightly (increases stretch)",
                                    "Raise arm to shoulder height, slight elbow bend",
                                    "Constant tension - don't let weight stack touch down"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No cables?", suggestion: "Standing DB Lateral Raises", reason: "Free weight alternative" },
                                    { condition: "No gym?", suggestion: "Band Lateral Raises", reason: "Home-friendly option" }
                                ],
                                isDefault: true
                            },
                            {
                                name: "Standing Dumbbell Lateral Raises",
                                muscleGroup: "Side Delts",
                                exerciseType: "Isolation",
                                note: "Classic side delt builder, easier to progressive overload",
                                desc: "Classic side delt builder",
                                video: "Exercise-Videos/SHOULDERS_Lateral-Raise-Standing_Dumbbell.mp4",
                                equipment: "üìç 2 dumbbells",
                                formCues: [
                                    "Stand with dumbbells at sides, slight forward lean",
                                    "Raise arms to shoulder height, lead with elbows",
                                    "Thumbs slightly down at top (pour a pitcher)",
                                    "Don't swing - strict form, control the weight"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Want constant tension?", suggestion: "Lean-Away Cable Lateral Raises", reason: "Cables never lose tension" },
                                    { condition: "Cheating too much?", suggestion: "Seated DB Lateral Raises", reason: "Eliminates momentum" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Lu Raises",
                                muscleGroup: "Side Delts",
                                exerciseType: "Isolation",
                                note: "Combines front and side raise, massive burn",
                                desc: "Front raise + lateral raise combo",
                                video: "",
                                equipment: "üìç 2 light dumbbells",
                                formCues: [
                                    "Raise dumbbells forward to eye level (front raise)",
                                    "From that position, spread arms out to sides",
                                    "Lower out to sides, then back to starting position",
                                    "Use LIGHT weight - this is extremely challenging"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Standing DB Lateral Raises", reason: "Single plane of motion" },
                                    { condition: "Want less fatigue?", suggestion: "Cable Lateral Raises with Pause", reason: "Can control difficulty with pause length" }
                                ]
                            },
                            {
                                name: "Cable Lateral Raises with Pause",
                                muscleGroup: "Side Delts",
                                exerciseType: "Isolation",
                                note: "2-3s pause at top, extreme time under tension",
                                desc: "Paused at top for extra burn",
                                video: "",
                                equipment: "üìç Cable machine (low pulley) + D-handle",
                                formCues: [
                                    "Same setup as regular cable lateral raises",
                                    "Raise to shoulder height, HOLD for 2-3 seconds",
                                    "Keep tension throughout pause, squeeze hard",
                                    "Lower slowly (2-3 seconds) for maximum hypertrophy"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No cables?", suggestion: "Lu Raises", reason: "Different intensity method" },
                                    { condition: "Too difficult?", suggestion: "Lean-Away Cable Lateral Raises", reason: "Remove pause, same movement" }
                                ]
                            }
                        ]
                    }
                }
            },
            "E4: Pull-Ups": {
                defaultExercise: "Pull-Ups",
                defaultBox: "normal",

                // Exercise metadata
                muscleGroup: "Lats/Upper Back",
                exerciseType: "Compound",
                sets: 3,
                reps: "6-8",
                rest: "2-3 min",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s pull, 1s hold, 3s lower", tip: "Focus on control, may reduce reps" },
                    "paused": { name: "Paused Reps", desc: "2s hold at top of each rep", tip: "Chin over bar, squeeze lats" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1 extra set", tip: "Challenging for pull-ups, ensure recovery" },
                    "increased-reps": { name: "Increased Reps", desc: "10-12 reps instead of 6-8", tip: "Build endurance, may need assistance" },
                    "weighted": { name: "Weighted Pull-Ups", desc: "Add weight belt with plates", tip: "Start with 2.5-5kg, progress slowly" },
                    "rest-pause": { name: "Rest-Pause", desc: "Go to failure, rest 15s, continue", tip: "Use on last set only" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Band Assisted Pull-Ups",
                                muscleGroup: "Lats/Upper Back",
                                exerciseType: "Compound",
                                note: "Band provides assistance, scalable difficulty",
                                desc: "Loop band for assistance",
                                video: "",
                                equipment: "üìç Pull-up bar + resistance band",
                                formCues: [
                                    "Loop heavy band over bar, step into it",
                                    "Band supports your weight at bottom",
                                    "Pull with full range of motion, chin over bar",
                                    "Use lighter band as you get stronger"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bands?", suggestion: "Lat Pulldown", reason: "Machine-based alternative" },
                                    { condition: "Have machine?", suggestion: "Assisted Pull-Up Machine", reason: "Precise assistance control" }
                                ]
                            },
                            {
                                name: "Lat Pulldown",
                                muscleGroup: "Lats/Upper Back",
                                exerciseType: "Compound",
                                note: "Seated, can control weight precisely",
                                desc: "Same movement, seated",
                                video: "Exercise-Videos/BACK_Lat-Pulldown_Cable.mp4",
                                equipment: "üìç Lat pulldown machine + wide bar",
                                formCues: [
                                    "Sit with thighs locked under pads",
                                    "Pull bar to upper chest, elbows down and back",
                                    "Lean back slightly (15-20 degrees)",
                                    "Control the return, full stretch at top"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No machine?", suggestion: "Band Assisted Pull-Ups", reason: "Similar pattern, bodyweight-based" },
                                    { condition: "Home gym?", suggestion: "Bedsheet Lat Pulldown", reason: "Bodyweight alternative" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Pull-Ups",
                                muscleGroup: "Lats/Upper Back",
                                exerciseType: "Compound",
                                note: "Bodyweight, full range of motion, optimal lat development",
                                desc: "Standard exercise, optimal lat/upper back activation",
                                video: "Exercise-Videos/BACK_Pull-Up_Bodyweight.mp4",
                                equipment: "üìç Pull-up bar",
                                formCues: [
                                    "Hands shoulder-width or slightly wider, overhand grip",
                                    "Pull until chin over bar, chest to bar",
                                    "Lower with control to full arm extension",
                                    "Don't swing - keep core tight, legs together"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bar?", suggestion: "Bedsheet Lat Pulldown", reason: "Door anchor alternative" },
                                    { condition: "Too difficult?", suggestion: "Band Assisted Pull-Ups", reason: "Build strength first" },
                                    { condition: "Have dumbbells?", suggestion: "DB Pullovers", reason: "Different lat exercise" }
                                ],
                                isDefault: true
                            },
                            {
                                name: "Neutral Grip Pull-Ups",
                                muscleGroup: "Lats/Upper Back",
                                exerciseType: "Compound",
                                note: "Palms facing each other, easier on elbows",
                                desc: "Neutral grip, easier on joints",
                                video: "",
                                equipment: "üìç Pull-up bar with parallel handles",
                                formCues: [
                                    "Palms facing each other (neutral grip)",
                                    "Pull chest to handles, squeeze shoulder blades",
                                    "More bicep involvement than wide grip",
                                    "Easier on shoulders and elbows"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No neutral handles?", suggestion: "Pull-Ups", reason: "Standard overhand grip" },
                                    { condition: "Elbow pain?", suggestion: "Single Arm Band Pulldown", reason: "Lower joint stress" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Weighted Pull-Ups",
                                muscleGroup: "Lats/Upper Back",
                                exerciseType: "Compound",
                                note: "Add weight belt for progressive overload",
                                desc: "Add belt with weight plates",
                                video: "",
                                equipment: "üìç Pull-up bar + weight belt + plates",
                                formCues: [
                                    "Attach weight belt with plates (start 2.5-5kg)",
                                    "Same form as regular pull-ups",
                                    "Progress slowly - add 1.25-2.5kg when you hit 8 reps",
                                    "Use full range of motion, don't shorten ROM"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No weight belt?", suggestion: "L-Sit Pull-Ups", reason: "Bodyweight progression" },
                                    { condition: "Too heavy?", suggestion: "Pull-Ups", reason: "Master bodyweight first" }
                                ]
                            },
                            {
                                name: "Archer Pull-Ups",
                                muscleGroup: "Lats/Upper Back",
                                exerciseType: "Compound",
                                note: "One arm emphasis, builds unilateral strength",
                                desc: "One arm emphasis",
                                video: "",
                                equipment: "üìç Pull-up bar",
                                formCues: [
                                    "Wide grip, pull toward one side",
                                    "One arm bends (pulling), other arm stays straight",
                                    "Alternate sides each rep",
                                    "Extremely challenging - master regular pull-ups first"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Weighted Pull-Ups", reason: "Bilateral loading easier to control" },
                                    { condition: "Want core work?", suggestion: "L-Sit Pull-Ups", reason: "Combines pull-up with core hold" }
                                ]
                            },
                            {
                                name: "L-Sit Pull-Ups",
                                muscleGroup: "Lats/Upper Back",
                                exerciseType: "Compound",
                                note: "Legs straight out during pull, massive core engagement",
                                desc: "Legs straight out during pull",
                                video: "",
                                equipment: "üìç Pull-up bar",
                                formCues: [
                                    "Hang from bar, raise legs straight out (90¬∞ at hips)",
                                    "Hold L-sit position while performing pull-ups",
                                    "Extremely challenging for core and hip flexors",
                                    "Start with knees bent if full L-sit too hard"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Core too weak?", suggestion: "Weighted Pull-Ups", reason: "Less core demand" },
                                    { condition: "Hip flexors fatigue?", suggestion: "Pull-Ups", reason: "Standard version" }
                                ]
                            }
                        ]
                    }
                }
            },
            "E5: Incline Overhead DB Extensions": {
                defaultExercise: "Incline Overhead DB Extensions",
                defaultBox: "normal",

                // Exercise metadata
                muscleGroup: "Triceps (Long Head)",
                exerciseType: "Isolation",
                sets: 3,
                reps: "12-15",
                rest: "1.5-2 min",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (2-1-2)", desc: "2s lower, 1s stretch, 2s raise", tip: "Focus on the stretch at bottom" },
                    "paused": { name: "Paused Reps", desc: "2s hold at bottom stretch", tip: "Feel the long head stretch behind head" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1 extra set", tip: "Triceps recover well, can handle volume" },
                    "increased-reps": { name: "Increased Reps", desc: "15-20 reps instead of 12-15", tip: "Great for tricep hypertrophy" },
                    "drop-sets": { name: "Drop Sets", desc: "After failure, drop weight 25% and continue", tip: "Maximum pump, use on last set" },
                    "increased-rom": { name: "Increased ROM", desc: "Go deeper at bottom for more stretch", tip: "Careful with elbow position" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Band Overhead Extension",
                                muscleGroup: "Triceps (Long Head)",
                                exerciseType: "Isolation",
                                note: "Lighter resistance, easier to control",
                                desc: "Lighter resistance",
                                video: "Exercise-Videos/ARMS_Tricep-Extension_Band.mp4",
                                equipment: "üìç Resistance band + anchor point",
                                formCues: [
                                    "Anchor band low, face away, hold overhead",
                                    "Elbows stay pointing forward, don't flare out",
                                    "Extend arms fully, squeeze triceps at top",
                                    "Control the return, feel the stretch"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bands?", suggestion: "Bodyweight Tricep Extensions", reason: "Wall or floor-based" },
                                    { condition: "Have dumbbells?", suggestion: "Standing Overhead DB Extension (light)", reason: "Better progressive overload" }
                                ]
                            },
                            {
                                name: "Bodyweight Tricep Extensions",
                                muscleGroup: "Triceps (Long Head)",
                                exerciseType: "Isolation",
                                note: "Bodyweight, scalable with body angle",
                                desc: "Wall or floor-based",
                                video: "Exercise-Videos/ARMS_Tricep-Extension_Bodyweight.mp4",
                                equipment: "üìç Wall or elevated surface",
                                formCues: [
                                    "Hands on wall at forehead height, lean in",
                                    "Bend elbows, lower forehead to wall",
                                    "Push back to start with triceps only",
                                    "Make easier: stand more upright, harder: lower angle"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Want resistance?", suggestion: "Band Overhead Extension", reason: "Can add load" },
                                    { condition: "Too easy?", suggestion: "Incline Overhead DB Extensions", reason: "Can increase weight" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Incline Overhead DB Extensions",
                                muscleGroup: "Triceps (Long Head)",
                                exerciseType: "Isolation",
                                note: "Incline position maximizes long head stretch",
                                desc: "Standard exercise, optimal tricep long head activation",
                                video: "Exercise-Videos/ARMS_Tricep-Extension-Incline_Dumbbell.mp4",
                                equipment: "üìç Incline bench (30-45¬∞) + 2 dumbbells",
                                formCues: [
                                    "Set bench to 30-45 degrees, lie back with dumbbells",
                                    "Start with arms extended overhead (not straight up)",
                                    "Lower dumbbells behind head, elbows stay in place",
                                    "Extend back to start, squeeze triceps at top"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No incline bench?", suggestion: "Flat Overhead DB Extensions", reason: "Similar movement, less stretch" },
                                    { condition: "No dumbbells?", suggestion: "Band Overhead Extension", reason: "Home-friendly option" },
                                    { condition: "Have cables?", suggestion: "Overhead Cable Extensions", reason: "Constant tension" }
                                ],
                                isDefault: true
                            },
                            {
                                name: "Standing Overhead DB Extension",
                                muscleGroup: "Triceps (Long Head)",
                                exerciseType: "Isolation",
                                note: "Single dumbbell, standing, easier setup",
                                desc: "Single DB, easier position",
                                video: "",
                                equipment: "üìç 1 dumbbell",
                                formCues: [
                                    "Hold one dumbbell with both hands overhead",
                                    "Lower behind head, elbows stay close to ears",
                                    "Extend back up, don't flare elbows out",
                                    "Keep core tight, don't arch lower back"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Want more stretch?", suggestion: "Incline Overhead DB Extensions", reason: "Incline position increases stretch" },
                                    { condition: "Lower back issues?", suggestion: "Incline Overhead DB Extensions", reason: "Bench provides back support" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Incline Overhead DB Extensions with Pause",
                                muscleGroup: "Triceps (Long Head)",
                                exerciseType: "Isolation",
                                note: "2s pause at bottom stretch, extreme tension",
                                desc: "2-second hold at stretch",
                                video: "",
                                equipment: "üìç Incline bench (30-45¬∞) + 2 dumbbells",
                                formCues: [
                                    "Same setup as regular incline overhead extension",
                                    "Lower dumbbells behind head, HOLD for 2 seconds",
                                    "Feel the deep stretch in long head",
                                    "Explode back up, squeeze at top"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Incline Overhead DB Extensions", reason: "Remove pause, same movement" },
                                    { condition: "Want more ROM?", suggestion: "Incline Overhead DB Extensions (deeper)", reason: "Increase stretch range" }
                                ]
                            },
                            {
                                name: "Incline Overhead DB Extensions (Increased ROM)",
                                muscleGroup: "Triceps (Long Head)",
                                exerciseType: "Isolation",
                                note: "Go deeper for more stretch, advanced variation",
                                desc: "Go deeper for more stretch",
                                video: "",
                                equipment: "üìç Incline bench (30-45¬∞) + 2 dumbbells",
                                formCues: [
                                    "Same setup, but lower dumbbells DEEPER behind head",
                                    "Maximum stretch on long head (feel it pull)",
                                    "Requires good shoulder mobility",
                                    "Use lighter weight - ROM is the challenge, not load"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Shoulder mobility limited?", suggestion: "Incline Overhead DB Extensions", reason: "Standard ROM safer" },
                                    { condition: "Want different stimulus?", suggestion: "Incline Overhead DB Extensions with Pause", reason: "Time under tension focus" }
                                ]
                            }
                        ]
                    }
                }
            },

            // ===== TUESDAY - LOWER BODY 1 =====
            "E1: Back Squat": {
                defaultExercise: "Back Squat",
                defaultBox: "normal",

                muscleGroup: "Quads/Glutes",
                exerciseType: "Compound",
                sets: 4,
                reps: "6-8",
                rest: "3 min",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s raise", tip: "Focus on control, reduce weight by 20-30%" },
                    "paused": { name: "Paused Squats", desc: "3s pause at bottom", tip: "Builds explosiveness out of the hole" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1-2 extra sets", tip: "Ensure recovery is adequate" },
                    "increased-reps": { name: "Increased Reps", desc: "10-12 reps instead of 6-8", tip: "Reduce weight by 15-20%" },
                    "drop-sets": { name: "Drop Sets", desc: "After last set, drop weight 25% and continue", tip: "Brutal for hypertrophy" },
                    "rest-pause": { name: "Rest-Pause", desc: "Go to failure, rest 20s, continue for 2-3 reps", tip: "Use on last set only" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Goblet Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "Front-loaded, easier on lower back, less weight needed",
                                desc: "Front-loaded, easier on back",
                                video: "Exercise-Videos/LEGS_Squat-Goblet-Paused_Dumbbell.mp4",
                                equipment: "üìç 1 dumbbell or kettlebell",
                                formCues: [
                                    "Hold dumbbell vertically at chest, elbows down",
                                    "Squat to parallel or below, chest up",
                                    "Push through whole foot, not just heels",
                                    "Great for learning squat pattern"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No dumbbells?", suggestion: "Band Squats", reason: "Lighter resistance" },
                                    { condition: "Want progression?", suggestion: "Back Squat (lighter weight)", reason: "Can load more weight" }
                                ]
                            },
                            {
                                name: "Box Squats",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "Reduces ROM, teaches proper depth, confidence builder",
                                desc: "Squat to box, reduced ROM",
                                video: "",
                                equipment: "üìç Squat rack + barbell + box/bench",
                                formCues: [
                                    "Set box to parallel height (or slightly above)",
                                    "Squat down until you lightly touch box, then stand",
                                    "Don't sit down fully, just touch and go",
                                    "Great for building confidence at depth"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too easy?", suggestion: "Back Squat", reason: "Full ROM progression" },
                                    { condition: "Lower back issues?", suggestion: "Goblet Squat", reason: "Less spinal loading" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Back Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "King of leg exercises, maximum strength and mass builder",
                                desc: "Standard exercise, optimal quad/glute activation",
                                video: "Exercise-Videos/LEGS_Squat-Back_Barbell.mp4",
                                equipment: "üìç Squat rack + barbell + safety bars",
                                formCues: [
                                    "Bar on upper traps (high bar) or rear delts (low bar)",
                                    "Feet shoulder-width, toes slightly out",
                                    "Brace core hard, squat to parallel or below",
                                    "Push through whole foot, knees track over toes"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No barbell?", suggestion: "Goblet Squat", reason: "Dumbbell alternative" },
                                    { condition: "Lower back issues?", suggestion: "Front Squat", reason: "More upright torso" },
                                    { condition: "No rack?", suggestion: "Bulgarian Split Squat", reason: "Unilateral alternative" }
                                ],
                                isDefault: true
                            },
                            {
                                name: "Front Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "More upright, quad-dominant, easier on lower back",
                                desc: "Front-loaded, more upright",
                                video: "",
                                equipment: "üìç Squat rack + barbell",
                                formCues: [
                                    "Bar on front delts, elbows high",
                                    "Crossed arms or clean grip",
                                    "Stay more upright than back squat",
                                    "Great for quad development"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Wrist mobility issues?", suggestion: "Goblet Squat", reason: "No wrist flexion needed" },
                                    { condition: "Want more weight?", suggestion: "Back Squat", reason: "Can load heavier" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Paused Back Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "3s pause at bottom, eliminates bounce reflex, builds strength",
                                desc: "3s pause at bottom",
                                video: "Exercise-Videos/LEGS_Squat-Paused_Band.mp4",
                                equipment: "üìç Squat rack + barbell + safety bars",
                                formCues: [
                                    "Squat to parallel, PAUSE for 3 seconds",
                                    "Stay tight during pause, don't relax",
                                    "Explode up from bottom",
                                    "Use 80-85% of regular squat weight"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Back Squat", reason: "Remove pause" },
                                    { condition: "Want tempo work?", suggestion: "Tempo Squats (5-0-1)", reason: "Different stimulus" }
                                ]
                            },
                            {
                                name: "1.5 Rep Squats",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "Down, halfway up, down, all the way up = 1 rep. Extreme time under tension",
                                desc: "1.5 reps per rep, insane volume",
                                video: "",
                                equipment: "üìç Squat rack + barbell + safety bars",
                                formCues: [
                                    "Squat to parallel, come halfway up",
                                    "Go back down to parallel, then stand fully",
                                    "That's 1 rep. Your quads will scream.",
                                    "Use 70-75% of regular squat weight"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Paused Back Squat", reason: "Less total volume" },
                                    { condition: "Different stimulus?", suggestion: "Tempo Squats", reason: "Focus on eccentric" }
                                ]
                            }
                        ]
                    }
                }
            },

            "E2: Bulgarian Split Squat": {
                defaultExercise: "Bulgarian Split Squat",
                defaultBox: "normal",

                muscleGroup: "Quads/Glutes",
                exerciseType: "Compound",
                sets: 3,
                reps: "8-10/leg",
                rest: "45-60s",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s raise", tip: "Incredible quad burn" },
                    "paused": { name: "Paused Reps", desc: "2s pause at bottom", tip: "Builds stability and strength" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1 extra set per leg", tip: "Unilateral work recovers well" },
                    "increased-reps": { name: "Increased Reps", desc: "12-15 reps instead of 8-10", tip: "Metabolic stress focus" },
                    "drop-sets": { name: "Drop Sets", desc: "After failure, drop weight 30% per leg", tip: "Maximum pump" },
                    "deficit": { name: "Deficit Bulgarian", desc: "Front foot on small platform", tip: "Increases ROM and difficulty" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Bodyweight Bulgarian Split Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "Bodyweight only, learn the movement pattern",
                                desc: "Bodyweight only",
                                video: "Exercise-Videos/LEGS_Bulgarian-Split-Squat_Bodyweight.mp4",
                                equipment: "üìç Flat bench or box (12-18\" high)",
                                formCues: [
                                    "Back foot elevated on bench",
                                    "Front foot far enough forward for vertical shin",
                                    "Lower until front thigh is parallel",
                                    "Push through front foot to stand"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too easy?", suggestion: "Bulgarian Split Squat with Dumbbells", reason: "Add external load" },
                                    { condition: "Balance issues?", suggestion: "Split Squat (both feet on ground)", reason: "More stable" }
                                ]
                            },
                            {
                                name: "Band Bulgarian Split Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "Light resistance, easier to control than dumbbells",
                                desc: "Light band resistance",
                                video: "Exercise-Videos/LEGS_Bulgarian-Split-Squat_Band.mp4",
                                equipment: "üìç Flat bench + resistance band",
                                formCues: [
                                    "Step on band with front foot",
                                    "Hold band handles at shoulders",
                                    "Same form as bodyweight version",
                                    "Band provides progressive resistance"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bands?", suggestion: "Bodyweight Bulgarian Split Squat", reason: "No equipment needed" },
                                    { condition: "Want more weight?", suggestion: "Dumbbell Bulgarian Split Squat", reason: "Better progressive overload" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Bulgarian Split Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "Best unilateral leg exercise, addresses imbalances",
                                desc: "Standard exercise, optimal quad/glute activation",
                                video: "Exercise-Videos/LEGS_Bulgarian-Split-Squat_Dumbbell.mp4",
                                equipment: "üìç Flat bench + 2 dumbbells",
                                formCues: [
                                    "Back foot elevated, hold dumbbells at sides",
                                    "Shorter stride = more quads, longer = more glutes",
                                    "Lower until front thigh parallel",
                                    "Torso can lean forward slightly"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No dumbbells?", suggestion: "Band Bulgarian Split Squat", reason: "Bands provide resistance" },
                                    { condition: "Balance issues?", suggestion: "Rear Foot Elevated Split Squat (lower elevation)", reason: "Easier to balance" }
                                ],
                                isDefault: true
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Deficit Bulgarian Split Squat",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "Front foot elevated on plate, increases ROM dramatically",
                                desc: "Front foot on platform, extreme ROM",
                                video: "",
                                equipment: "üìç 2 benches/boxes + 2 dumbbells + weight plate",
                                formCues: [
                                    "Place 2.5-5kg plate under front foot",
                                    "Increases range of motion significantly",
                                    "Extreme quad stretch at bottom",
                                    "Use lighter weight than regular Bulgarian"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Bulgarian Split Squat", reason: "Standard ROM" },
                                    { condition: "Want pause?", suggestion: "Paused Bulgarian Split Squat", reason: "Time under tension focus" }
                                ]
                            },
                            {
                                name: "Bulgarian Split Squat with Pause",
                                muscleGroup: "Quads/Glutes",
                                exerciseType: "Compound",
                                note: "2-3s pause at bottom, builds strength and stability",
                                desc: "Paused at bottom",
                                video: "",
                                equipment: "üìç Flat bench + 2 dumbbells",
                                formCues: [
                                    "Lower to parallel, HOLD for 2-3 seconds",
                                    "Maintain balance during pause",
                                    "Explode up from bottom",
                                    "Use 80% of regular Bulgarian weight"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Bulgarian Split Squat", reason: "Remove pause" },
                                    { condition: "Want more ROM?", suggestion: "Deficit Bulgarian Split Squat", reason: "Increase range" }
                                ]
                            }
                        ]
                    }
                }
            },

            "E3: Swiss Ball Leg Curls": {
                defaultExercise: "Swiss Ball Leg Curls",
                defaultBox: "normal",

                muscleGroup: "Hamstrings",
                exerciseType: "Isolation",
                sets: 4,
                reps: "8-12",
                rest: "1.5-2 min",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (2-1-2)", desc: "2s curl, 1s hold, 2s extend", tip: "Mind-muscle connection" },
                    "paused": { name: "Paused Reps", desc: "2s hold at peak contraction", tip: "Maximum hamstring activation" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1-2 extra sets", tip: "Hamstrings recover well" },
                    "increased-reps": { name: "Increased Reps", desc: "15-20 reps instead of 8-12", tip: "Burn those hamstrings" },
                    "single-leg": { name: "Single Leg Curls", desc: "One leg at a time", tip: "Extremely challenging, builds stability" },
                    "elevated": { name: "Feet Elevated", desc: "Place feet on elevated surface", tip: "Increases difficulty" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Glute Bridge",
                                muscleGroup: "Hamstrings",
                                exerciseType: "Isolation",
                                note: "Easier variation, still hits hamstrings and glutes",
                                desc: "Bodyweight, both feet on ground",
                                video: "",
                                equipment: "üìç Floor or mat",
                                formCues: [
                                    "Lie on back, feet flat on ground near glutes",
                                    "Drive through heels to lift hips",
                                    "Squeeze glutes at top",
                                    "Lower with control"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too easy?", suggestion: "Single Leg Glute Bridge", reason: "Unilateral progression" },
                                    { condition: "Have stability ball?", suggestion: "Swiss Ball Leg Curls", reason: "More hamstring focus" }
                                ]
                            },
                            {
                                name: "Band Leg Curls",
                                muscleGroup: "Hamstrings",
                                exerciseType: "Isolation",
                                note: "Lighter resistance, easier to control",
                                desc: "Lying with band around ankles",
                                video: "",
                                equipment: "üìç Resistance band + anchor point",
                                formCues: [
                                    "Lie face down, anchor band low",
                                    "Loop band around ankles",
                                    "Curl heels toward glutes",
                                    "Control the return"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No bands?", suggestion: "Glute Bridge", reason: "Bodyweight alternative" },
                                    { condition: "Have stability ball?", suggestion: "Swiss Ball Leg Curls", reason: "Better for progression" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Swiss Ball Leg Curls",
                                muscleGroup: "Hamstrings",
                                exerciseType: "Isolation",
                                note: "Challenging bodyweight movement, builds hamstring strength",
                                desc: "Standard exercise, optimal hamstring activation",
                                video: "",
                                equipment: "üìç Stability ball / Swiss ball",
                                formCues: [
                                    "Lie on back, heels on ball",
                                    "Lift hips off ground (glute bridge position)",
                                    "Curl ball toward body using hamstrings",
                                    "Extend legs while keeping hips up"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No stability ball?", suggestion: "Band Leg Curls", reason: "Band alternative" },
                                    { condition: "Have machine?", suggestion: "Lying Leg Curl Machine", reason: "Easier to load progressively" },
                                    { condition: "Too easy?", suggestion: "Single Leg Swiss Ball Curls", reason: "Unilateral progression" }
                                ],
                                isDefault: true
                            },
                            {
                                name: "Lying Leg Curl Machine",
                                muscleGroup: "Hamstrings",
                                exerciseType: "Isolation",
                                note: "Machine-based, easier progressive overload",
                                desc: "Machine-based leg curl",
                                video: "",
                                equipment: "üìç Lying leg curl machine",
                                formCues: [
                                    "Lie face down, pad on lower calves",
                                    "Curl heels to glutes, squeeze at top",
                                    "Control the descent",
                                    "Don't let hips lift off pad"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No machine?", suggestion: "Swiss Ball Leg Curls", reason: "Bodyweight alternative" },
                                    { condition: "Want instability?", suggestion: "Swiss Ball Leg Curls", reason: "More core engagement" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Single Leg Swiss Ball Curls",
                                muscleGroup: "Hamstrings",
                                exerciseType: "Isolation",
                                note: "One leg at a time, extreme difficulty and instability",
                                desc: "One leg, extreme challenge",
                                video: "",
                                equipment: "üìç Stability ball",
                                formCues: [
                                    "Same setup as regular Swiss ball curls",
                                    "Keep one leg extended off ball",
                                    "Curl with single leg",
                                    "Extremely challenging for hamstring and core"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Swiss Ball Leg Curls", reason: "Bilateral version" },
                                    { condition: "Want weighted?", suggestion: "Nordic Curls", reason: "Eccentric focus" }
                                ]
                            },
                            {
                                name: "Nordic Curls",
                                muscleGroup: "Hamstrings",
                                exerciseType: "Isolation",
                                note: "Eccentric-focused, elite hamstring builder, very difficult",
                                desc: "Eccentric-only hamstring destroyer",
                                video: "",
                                equipment: "üìç Partner or anchor for feet",
                                formCues: [
                                    "Kneel, have partner hold ankles down",
                                    "Keep body straight, lower torso forward slowly",
                                    "Resist with hamstrings as long as possible",
                                    "Catch yourself with hands, push back up"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Band-Assisted Nordic Curls", reason: "Band reduces difficulty" },
                                    { condition: "No partner?", suggestion: "Single Leg Swiss Ball Curls", reason: "Solo alternative" }
                                ]
                            }
                        ]
                    }
                }
            },

            "E4: Single Leg Weighted Calf Raise": {
                defaultExercise: "Single Leg Weighted Calf Raise",
                defaultBox: "normal",

                muscleGroup: "Calves",
                exerciseType: "Isolation",
                sets: 4,
                reps: "6-10/leg",
                rest: "1-1.5 min",

                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (2-1-2)", desc: "2s raise, 1s hold, 2s lower", tip: "Maximize time under tension" },
                    "paused": { name: "Paused Reps", desc: "2s hold at peak contraction", tip: "Peak calf activation" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1-2 extra sets per leg", tip: "Calves need high volume" },
                    "increased-reps": { name: "Increased Reps", desc: "15-20 reps instead of 6-10", tip: "Calves respond well to high reps" },
                    "drop-sets": { name: "Drop Sets", desc: "After failure, drop weight 40%", tip: "Calf pump is real" },
                    "stretch-hold": { name: "Stretch Hold", desc: "3s hold at bottom stretch", tip: "Increases ROM and flexibility" }
                },

                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [
                            {
                                name: "Bodyweight Single Leg Calf Raise",
                                muscleGroup: "Calves",
                                exerciseType: "Isolation",
                                note: "Bodyweight only, build the movement pattern",
                                desc: "Bodyweight only",
                                video: "Exercise-Videos/LEGS_Calf-Raise-Single_Bodyweight.mp4",
                                equipment: "üìç Step or platform",
                                formCues: [
                                    "Stand on one foot on edge of step",
                                    "Lower heel below step level (stretch)",
                                    "Raise up onto toes as high as possible",
                                    "Control the descent"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too easy?", suggestion: "Single Leg Weighted Calf Raise", reason: "Add dumbbell" },
                                    { condition: "Balance issues?", suggestion: "Two Leg Calf Raise", reason: "More stable" }
                                ]
                            },
                            {
                                name: "Seated Calf Raise Machine",
                                muscleGroup: "Calves",
                                exerciseType: "Isolation",
                                note: "Targets soleus (lower calf), easier than standing",
                                desc: "Seated, targets soleus",
                                video: "",
                                equipment: "üìç Seated calf raise machine",
                                formCues: [
                                    "Sit with balls of feet on platform",
                                    "Knees bent at 90 degrees",
                                    "Raise heels as high as possible",
                                    "Full stretch at bottom"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No machine?", suggestion: "Seated Calf Raise with Dumbbells", reason: "Place dumbbells on knees" },
                                    { condition: "Want standing?", suggestion: "Bodyweight Calf Raise", reason: "Targets gastrocnemius" }
                                ]
                            }
                        ]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [
                            {
                                name: "Single Leg Weighted Calf Raise",
                                muscleGroup: "Calves",
                                exerciseType: "Isolation",
                                note: "Unilateral, addresses imbalances, maximum ROM",
                                desc: "Standard exercise, optimal calf activation",
                                video: "Exercise-Videos/LEGS_Calf-Raise-Single_Bodyweight.mp4",
                                equipment: "üìç Step/platform + 1 dumbbell",
                                formCues: [
                                    "Stand on one foot, hold dumbbell in opposite hand",
                                    "Lower heel below platform (full stretch)",
                                    "Raise onto toes as high as possible",
                                    "Full range of motion is key"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No dumbbells?", suggestion: "Bodyweight Single Leg Calf Raise", reason: "Use body weight only" },
                                    { condition: "Want more weight?", suggestion: "Standing Calf Raise Machine", reason: "Can load heavier" }
                                ],
                                isDefault: true
                            },
                            {
                                name: "Standing Calf Raise Machine",
                                muscleGroup: "Calves",
                                exerciseType: "Isolation",
                                note: "Machine-based, can load heavier, both legs",
                                desc: "Machine-based, bilateral",
                                video: "Exercise-Videos/LEGS_Calf-Raise-Standing_Barbell.mp4",
                                equipment: "üìç Standing calf raise machine",
                                formCues: [
                                    "Shoulders under pads, balls of feet on platform",
                                    "Lower heels below platform level",
                                    "Raise up onto toes maximally",
                                    "Squeeze calves at top for 1 second"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No machine?", suggestion: "Single Leg Weighted Calf Raise", reason: "Unilateral with dumbbells" },
                                    { condition: "Want unilateral?", suggestion: "Single Leg Weighted Calf Raise", reason: "Address imbalances" }
                                ]
                            }
                        ]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [
                            {
                                name: "Single Leg Calf Raise with Pause",
                                muscleGroup: "Calves",
                                exerciseType: "Isolation",
                                note: "2-3s hold at top and bottom, extreme time under tension",
                                desc: "Paused at top and bottom",
                                video: "",
                                equipment: "üìç Step + 1 dumbbell",
                                formCues: [
                                    "Lower heel below platform, PAUSE 2s",
                                    "Raise to full toe raise, PAUSE 2s",
                                    "Control both phases",
                                    "Use lighter weight than regular"
                                ],
                                equipmentAlternatives: [
                                    { condition: "Too difficult?", suggestion: "Single Leg Weighted Calf Raise", reason: "Remove pauses" },
                                    { condition: "Want more weight?", suggestion: "Donkey Calf Raise", reason: "Can load heavier" }
                                ]
                            },
                            {
                                name: "Jump Rope Calf Focus",
                                muscleGroup: "Calves",
                                exerciseType: "Isolation",
                                note: "Plyometric, builds explosive calf power",
                                desc: "Explosive calf training",
                                video: "",
                                equipment: "üìç Jump rope",
                                formCues: [
                                    "Jump rope staying on balls of feet",
                                    "Minimal knee bend, calf-dominant",
                                    "Quick, explosive jumps",
                                    "Great for calf endurance and power"
                                ],
                                equipmentAlternatives: [
                                    { condition: "No rope?", suggestion: "Jumping Jacks (calf focus)", reason: "Similar explosive pattern" },
                                    { condition: "Want strength?", suggestion: "Single Leg Calf Raise with Pause", reason: "Strength-focused" }
                                ]
                            }
                        ]
                    }
                }
            },

            // ===== THURSDAY - UPPER BODY 2 =====
            "E1: Barbell Bench Press": {
                defaultExercise: "Barbell Bench Press",
                defaultBox: "normal",
                muscleGroup: "Chest/Triceps",
                exerciseType: "Compound",
                sets: 4,
                reps: "6-8",
                rest: "2.5-3 min",
                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s press", tip: "Reduce weight by 20-30%" },
                    "paused": { name: "Paused Reps", desc: "2-3s pause on chest", tip: "Eliminates bounce reflex" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1 extra set", tip: "Ensure recovery" },
                    "increased-reps": { name: "Increased Reps", desc: "10-12 reps", tip: "Reduce weight 15-20%" },
                    "drop-sets": { name: "Drop Sets", desc: "Drop 20-25% after failure", tip: "Last set only" },
                    "rest-pause": { name: "Rest-Pause", desc: "Failure, rest 20s, continue", tip: "Maximum intensity" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Dumbbell Bench Press",
                            muscleGroup: "Chest/Triceps",
                            exerciseType: "Compound",
                            note: "Easier to control, safer without spotter",
                            desc: "Dumbbells, safer solo",
                            video: "Exercise-Videos/CHEST_Flat-Press_Dumbbell.mp4",
                            equipment: "üìç Flat bench + 2 dumbbells",
                            formCues: ["Dumbbells start at chest level", "Press up and slightly together", "Lower with control to chest", "Easier to bail safely than barbell"],
                            equipmentAlternatives: [
                                { condition: "No dumbbells?", suggestion: "Close Grip Push-ups", reason: "Bodyweight alternative" },
                                { condition: "Have barbell?", suggestion: "Barbell Bench Press", reason: "Can load more weight" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Barbell Bench Press",
                            muscleGroup: "Chest/Triceps",
                            exerciseType: "Compound",
                            note: "King of chest exercises, maximum strength builder",
                            desc: "Standard, optimal chest/tricep activation",
                            video: "Exercise-Videos/CHEST_Bench-Press_Barbell.mp4",
                            equipment: "üìç Flat bench + barbell + safety rack",
                            formCues: ["Bar over eyes when lying", "Retract shoulder blades hard", "Arch lower back", "Bar touches chest every rep"],
                            equipmentAlternatives: [
                                { condition: "No barbell?", suggestion: "Dumbbell Bench Press", reason: "Free weight alternative" },
                                { condition: "No spotter?", suggestion: "Dumbbell Bench Press", reason: "Safer solo" }
                            ],
                            isDefault: true
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Paused Bench Press",
                            muscleGroup: "Chest/Triceps",
                            exerciseType: "Compound",
                            note: "2-3s pause on chest, builds explosive power",
                            desc: "Paused on chest",
                            video: "",
                            equipment: "üìç Flat bench + barbell + safety rack",
                            formCues: ["Lower to chest, PAUSE 2-3 seconds", "Stay tight during pause", "Explode up", "Use 85-90% of regular bench"],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Barbell Bench Press", reason: "Remove pause" }
                            ]
                        }]
                    }
                }
            },

            "E2: Seated Cable Row": {
                defaultExercise: "Seated Cable Row",
                defaultBox: "normal",
                muscleGroup: "Mid-Back/Lats",
                exerciseType: "Compound",
                sets: 3,
                reps: "10-12",
                rest: "2 min",
                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s pull, 1s squeeze, 3s release", tip: "Focus on scapular retraction" },
                    "paused": { name: "Paused Reps", desc: "2s hold at peak", tip: "Squeeze shoulder blades together" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1-2 sets", tip: "Back recovers well" },
                    "increased-reps": { name: "Increased Reps", desc: "15-20 reps", tip: "Great for back thickness" },
                    "drop-sets": { name: "Drop Sets", desc: "Drop 25% after failure", tip: "Massive pump" },
                    "rest-pause": { name: "Rest-Pause", desc: "Failure, rest 15s, continue", tip: "Last set only" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Band Rows",
                            muscleGroup: "Mid-Back/Lats",
                            exerciseType: "Compound",
                            note: "Light resistance, easier to control",
                            desc: "Band resistance",
                            video: "Exercise-Videos/BACK_Bent-Over-Row_Band.mp4",
                            equipment: "üìç Resistance band + anchor",
                            formCues: ["Anchor band at chest height", "Pull to torso, elbows back", "Squeeze shoulder blades", "Control the return"],
                            equipmentAlternatives: [
                                { condition: "No bands?", suggestion: "Inverted Rows", reason: "Bodyweight alternative" },
                                { condition: "Have cables?", suggestion: "Seated Cable Row", reason: "Better progressive overload" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Seated Cable Row",
                            muscleGroup: "Mid-Back/Lats",
                            exerciseType: "Compound",
                            note: "Constant tension, builds back thickness",
                            desc: "Standard, optimal back activation",
                            video: "Exercise-Videos/BACK_Seated-Row_Cable.mp4",
                            equipment: "üìç Cable machine + V-bar or straight bar",
                            formCues: ["Sit upright, chest out", "Pull to lower chest", "Elbows close to body", "Squeeze shoulder blades together"],
                            equipmentAlternatives: [
                                { condition: "No cables?", suggestion: "Dumbbell Rows", reason: "Free weight alternative" },
                                { condition: "Lower back issues?", suggestion: "Chest-Supported Row", reason: "No spinal loading" }
                            ],
                            isDefault: true
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Seated Cable Row with Pause",
                            muscleGroup: "Mid-Back/Lats",
                            exerciseType: "Compound",
                            note: "2-3s hold at peak contraction",
                            desc: "Paused at peak",
                            video: "",
                            equipment: "üìç Cable machine + V-bar",
                            formCues: ["Pull to chest, HOLD 2-3 seconds", "Maximum scapular retraction", "Don't let weight stack touch", "Use 80% of regular weight"],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Seated Cable Row", reason: "Remove pause" }
                            ]
                        }]
                    }
                }
            },

            "E3: Standing Overhead Press": {
                defaultExercise: "Standing Overhead Press",
                defaultBox: "normal",
                muscleGroup: "Shoulders/Triceps",
                exerciseType: "Compound",
                sets: 3,
                reps: "8-10",
                rest: "2 min",
                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s press", tip: "Shoulder stability focus" },
                    "paused": { name: "Paused Reps", desc: "2s pause at bottom", tip: "Eliminates stretch reflex" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1 set", tip: "Shoulders recover well" },
                    "increased-reps": { name: "Increased Reps", desc: "12-15 reps", tip: "Lighter weight" },
                    "drop-sets": { name: "Drop Sets", desc: "Drop 25% after failure", tip: "Shoulder pump" },
                    "push-press": { name: "Push Press", desc: "Use leg drive", tip: "Can lift more weight" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Seated Dumbbell Press",
                            muscleGroup: "Shoulders/Triceps",
                            exerciseType: "Compound",
                            note: "Seated, eliminates core demand",
                            desc: "Seated, less core work",
                            video: "",
                            equipment: "üìç Bench with back support + 2 dumbbells",
                            formCues: ["Sit with back support", "Press dumbbells overhead", "Don't bang together at top", "Control the descent"],
                            equipmentAlternatives: [
                                { condition: "No dumbbells?", suggestion: "Pike Push-ups", reason: "Bodyweight alternative" },
                                { condition: "Want standing?", suggestion: "Standing Dumbbell Press", reason: "More core engagement" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Standing Overhead Press",
                            muscleGroup: "Shoulders/Triceps",
                            exerciseType: "Compound",
                            note: "Full body tension, best shoulder builder",
                            desc: "Standard, optimal shoulder activation",
                            video: "Exercise-Videos/SHOULDERS_Overhead-Press-Standing_Barbell.mp4",
                            equipment: "üìç Barbell or dumbbells",
                            formCues: ["Stand with feet shoulder-width", "Brace core hard", "Press straight up, head moves back", "Lock out at top"],
                            equipmentAlternatives: [
                                { condition: "No barbell?", suggestion: "Dumbbell Press", reason: "Free weight alternative" },
                                { condition: "Core fatigues?", suggestion: "Seated Press", reason: "Removes core demand" }
                            ],
                            isDefault: true
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Push Press",
                            muscleGroup: "Shoulders/Triceps",
                            exerciseType: "Compound",
                            note: "Uses leg drive, can lift more weight",
                            desc: "Explosive with leg drive",
                            video: "",
                            equipment: "üìç Barbell",
                            formCues: ["Dip knees slightly", "Explode up with legs", "Press bar overhead", "Can use 10-20% more weight"],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Standing Overhead Press", reason: "Strict press" }
                            ]
                        }]
                    }
                }
            },

            "E4: Kneeling Face Pulls": {
                defaultExercise: "Kneeling Face Pulls",
                defaultBox: "normal",
                muscleGroup: "Rear Delts/Upper Back",
                exerciseType: "Isolation",
                sets: 3,
                reps: "12-15",
                rest: "45-60s",
                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (2-1-2)", desc: "2s pull, 1s hold, 2s release", tip: "Mind-muscle connection" },
                    "paused": { name: "Paused Reps", desc: "2s hold at face", tip: "Maximum rear delt activation" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1-2 sets", tip: "Rear delts need volume" },
                    "increased-reps": { name: "Increased Reps", desc: "20-25 reps", tip: "High rep rear delt work" },
                    "drop-sets": { name: "Drop Sets", desc: "Drop 40% after failure", tip: "Rear delt pump" },
                    "external-rotation": { name: "Add External Rotation", desc: "Rotate hands apart at face", tip: "Extra rotator cuff work" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Band Face Pulls",
                            muscleGroup: "Rear Delts/Upper Back",
                            exerciseType: "Isolation",
                            note: "Light resistance, easier to control",
                            desc: "Band resistance",
                            video: "",
                            equipment: "üìç Resistance band + anchor",
                            formCues: ["Anchor band at face height", "Pull to face, elbows high", "Squeeze rear delts", "Control the return"],
                            equipmentAlternatives: [
                                { condition: "No bands?", suggestion: "Reverse Flyes", reason: "Dumbbell alternative" },
                                { condition: "Have cables?", suggestion: "Cable Face Pulls", reason: "Better tension" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Kneeling Face Pulls",
                            muscleGroup: "Rear Delts/Upper Back",
                            exerciseType: "Isolation",
                            note: "Kneeling position ensures strict form",
                            desc: "Standard, optimal rear delt activation",
                            video: "Exercise-Videos/SHOULDERS_Face-Pull-Kneeling_Cable.mp4",
                            equipment: "üìç Cable machine + rope attachment",
                            formCues: ["Kneel in front of cable", "Pull rope to face", "Elbows stay high", "Pull rope apart at face"],
                            equipmentAlternatives: [
                                { condition: "No cables?", suggestion: "Band Face Pulls", reason: "Band alternative" },
                                { condition: "Want standing?", suggestion: "Standing Face Pulls", reason: "Different angle" }
                            ],
                            isDefault: true
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Face Pulls with External Rotation",
                            muscleGroup: "Rear Delts/Upper Back",
                            exerciseType: "Isolation",
                            note: "Add external rotation at end, hits rotator cuff",
                            desc: "With external rotation",
                            video: "",
                            equipment: "üìç Cable machine + rope",
                            formCues: ["Pull rope to face normally", "At face, rotate hands apart and back", "Extra rotator cuff engagement", "Use lighter weight"],
                            equipmentAlternatives: [
                                { condition: "Too complex?", suggestion: "Face Pulls", reason: "Standard version" }
                            ]
                        }]
                    }
                }
            },

            "E5: Incline Dumbbell Curls": {
                defaultExercise: "Incline Dumbbell Curls",
                defaultBox: "normal",
                muscleGroup: "Biceps",
                exerciseType: "Isolation",
                sets: 2,
                reps: "10-12",
                rest: "1-1.5 min",
                progressionMethods: {
                    "slow-tempo": { name: "Slow Tempo (2-1-2)", desc: "2s curl, 1s squeeze, 2s lower", tip: "Maximum bicep tension" },
                    "paused": { name: "Paused Reps", desc: "2s hold at peak", tip: "Peak contraction focus" },
                    "increased-volume": { name: "Increased Volume", desc: "Add 1 set", tip: "Biceps recover quickly" },
                    "increased-reps": { name: "Increased Reps", desc: "15-20 reps", tip: "High rep bicep burn" },
                    "drop-sets": { name: "Drop Sets", desc: "Drop 40% after failure", tip: "Bicep pump" },
                    "21s": { name: "21s Method", desc: "7 bottom, 7 top, 7 full", tip: "Brutal finisher" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Band Curls",
                            muscleGroup: "Biceps",
                            exerciseType: "Isolation",
                            note: "Light resistance, easier to control",
                            desc: "Band resistance",
                            video: "",
                            equipment: "üìç Resistance band",
                            formCues: ["Step on band center", "Curl up to shoulders", "Elbows stay still", "Squeeze at top"],
                            equipmentAlternatives: [
                                { condition: "No bands?", suggestion: "Bodyweight Curls (towel)", reason: "Use towel around leg" },
                                { condition: "Have dumbbells?", suggestion: "Standing Dumbbell Curls", reason: "Better progressive overload" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Incline Dumbbell Curls",
                            muscleGroup: "Biceps",
                            exerciseType: "Isolation",
                            note: "Maximum stretch on biceps, long head focus",
                            desc: "Standard, optimal bicep activation",
                            video: "",
                            equipment: "üìç Incline bench (45¬∞) + 2 dumbbells",
                            formCues: ["Set bench to 45 degrees", "Let arms hang straight down", "Curl without moving elbows forward", "Full stretch at bottom"],
                            equipmentAlternatives: [
                                { condition: "No incline bench?", suggestion: "Standing Dumbbell Curls", reason: "Vertical alternative" },
                                { condition: "No dumbbells?", suggestion: "Band Curls", reason: "Home-friendly" }
                            ],
                            isDefault: true
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Incline Dumbbell Curls with Pause",
                            muscleGroup: "Biceps",
                            exerciseType: "Isolation",
                            note: "2-3s pause at peak contraction",
                            desc: "Paused at peak",
                            video: "",
                            equipment: "üìç Incline bench (45¬∞) + 2 dumbbells",
                            formCues: ["Same setup as regular incline curls", "Curl up, HOLD 2-3 seconds at peak", "Squeeze biceps hard during hold", "Use 80% of regular weight"],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Incline Dumbbell Curls", reason: "Remove pause" }
                            ]
                        }]
                    }
                }
            },

            // ===== FRIDAY - LOWER BODY 2 =====
            "E1: Deadlift (Conventional)": {
                defaultExercise: "Deadlift (Conventional)",
                defaultBox: "normal",
                muscleGroup: "Hamstrings/Glutes/Back",
                exerciseType: "Compound",
                sets: 3,
                reps: "6-8",
                rest: "3 min",
                progressionMethods: {
                    "weight": { name: "Add Weight (+2.5-5 kg)", desc: "Increase barbell load", tip: "Small jumps for deadlift - form is critical" },
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s raise", tip: "Focus on control, reduce weight by 20-30%" },
                    "paused": { name: "Paused Deadlifts (2s at knee)", desc: "Pause at knee level for 2 seconds", tip: "Builds strength off floor, use 80-85% weight" },
                    "increased-volume": { name: "Increased Volume (+1 set)", desc: "Add 1 extra set", tip: "More total work, but manage fatigue" },
                    "increased-reps": { name: "Increased Reps (8-10)", desc: "Aim for 8-10 reps instead", tip: "Build work capacity before adding weight" },
                    "deficit": { name: "Deficit Deadlifts", desc: "Stand on 1-2 inch platform", tip: "Increases range of motion, harder off floor" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Romanian Deadlift (Dumbbells)",
                            muscleGroup: "Hamstrings/Glutes",
                            exerciseType: "Compound",
                            note: "Less technical than conventional, lighter load",
                            desc: "Easier variation, good for learning hip hinge",
                            video: "Exercise-Videos/LEGS_Romanian-Deadlift_Dumbbell.mp4",
                            equipment: "üìç 2 dumbbells",
                            formCues: [
                                "Dumbbells at thighs, palms facing body",
                                "Slight knee bend, hinge at hips",
                                "Lower dumbbells to mid-shin, feel hamstring stretch",
                                "Push hips forward to stand, squeeze glutes at top"
                            ],
                            equipmentAlternatives: [
                                { condition: "No dumbbells?", suggestion: "Band Deadlifts", reason: "Lighter resistance" },
                                { condition: "Want progression?", suggestion: "Conventional Deadlift (lighter weight)", reason: "Work up to barbell" }
                            ]
                        }, {
                            name: "Trap Bar Deadlift",
                            muscleGroup: "Hamstrings/Glutes/Quads",
                            exerciseType: "Compound",
                            note: "Easier on lower back, more upright position",
                            desc: "Beginner-friendly deadlift variation",
                            video: "",
                            equipment: "üìç Trap bar (hex bar) + weight plates",
                            formCues: [
                                "Step inside trap bar, feet hip-width",
                                "Grip handles at sides, chest up",
                                "Push through floor with legs (like squat)",
                                "Stand tall, squeeze glutes at top"
                            ],
                            equipmentAlternatives: [
                                { condition: "No trap bar?", suggestion: "Goblet Squat", reason: "Similar movement pattern" },
                                { condition: "Want harder?", suggestion: "Conventional Deadlift", reason: "Classic barbell variation" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Deadlift (Conventional)",
                            isDefault: true,
                            muscleGroup: "Hamstrings/Glutes/Back",
                            exerciseType: "Compound",
                            note: "King of posterior chain exercises",
                            desc: "Standard barbell deadlift",
                            video: "Exercise-Videos/LEGS_Deadlift-Conventional_Barbell.mp4",
                            equipment: "üìç Barbell with weight plates on lifting platform OR squat rack",
                            formCues: [
                                "Mid-foot under bar, hip-width stance",
                                "Overhand grip outside shins, chest up",
                                "Back straight, shoulders slightly ahead of bar",
                                "Push through heels, bar close to legs",
                                "Stand tall, squeeze glutes at top"
                            ],
                            equipmentAlternatives: [
                                { condition: "No barbell?", suggestion: "Romanian Deadlift (Dumbbells)", reason: "Similar hinge pattern" },
                                { condition: "Lower back issues?", suggestion: "Trap Bar Deadlift", reason: "More upright position" }
                            ]
                        }, {
                            name: "Sumo Deadlift",
                            muscleGroup: "Hamstrings/Glutes/Quads",
                            exerciseType: "Compound",
                            note: "Wide stance variation, more quad involvement",
                            desc: "Alternative deadlift style",
                            video: "",
                            equipment: "üìç Barbell with weight plates",
                            formCues: [
                                "Wide stance, toes pointed out 30-45¬∞",
                                "Grip inside legs (hands closer than conventional)",
                                "Chest up, back straight, hips lower than conventional",
                                "Push knees out, drive through whole foot"
                            ],
                            equipmentAlternatives: [
                                { condition: "Prefer conventional?", suggestion: "Conventional Deadlift", reason: "Classic variation" },
                                { condition: "No barbell?", suggestion: "Goblet Squat (wide stance)", reason: "Similar movement pattern" }
                            ]
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Deficit Deadlift",
                            muscleGroup: "Hamstrings/Glutes/Back",
                            exerciseType: "Compound",
                            note: "Standing on platform increases range of motion",
                            desc: "Advanced progression for conventional",
                            video: "",
                            equipment: "üìç Barbell + 1-2 inch platform or weight plates to stand on",
                            formCues: [
                                "Stand on 1-2 inch platform/plates",
                                "Same setup as conventional deadlift",
                                "Greater ROM = harder off floor",
                                "Use 85-90% of conventional weight"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Conventional Deadlift", reason: "Standard ROM" },
                                { condition: "No platform?", suggestion: "Paused Deadlifts", reason: "Different intensity method" }
                            ]
                        }, {
                            name: "Paused Deadlift (2s at knee)",
                            muscleGroup: "Hamstrings/Glutes/Back",
                            exerciseType: "Compound",
                            note: "Pause at knee height for 2 seconds",
                            desc: "Builds strength at sticking point",
                            video: "",
                            equipment: "üìç Barbell with weight plates",
                            formCues: [
                                "Pull to knee height, PAUSE 2 seconds",
                                "Maintain tension, don't relax",
                                "Continue to lockout after pause",
                                "Use 80-85% of regular weight"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Conventional Deadlift", reason: "Remove pause" }
                            ]
                        }]
                    }
                }
            },

            "E2: Leg Press": {
                defaultExercise: "Leg Press",
                defaultBox: "normal",
                muscleGroup: "Quads/Glutes",
                exerciseType: "Compound",
                sets: 3,
                reps: "10-12",
                rest: "2-3 min",
                progressionMethods: {
                    "weight": { name: "Add Weight (+5-10 kg)", desc: "Increase sled load", tip: "Can handle more weight than squats" },
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s raise", tip: "Time under tension, reduce weight 20-30%" },
                    "paused": { name: "Paused Reps (2s bottom)", desc: "Pause at bottom for 2 seconds", tip: "Removes bounce, harder on quads" },
                    "increased-volume": { name: "Increased Volume (+1 set)", desc: "Add 1 extra set", tip: "More quad growth stimulus" },
                    "increased-reps": { name: "Increased Reps (12-15)", desc: "Aim for 12-15 reps instead", tip: "Build work capacity" },
                    "drop-sets": { name: "Drop Sets", desc: "After failure, reduce weight 20-30% and continue", tip: "Intense finisher, use sparingly" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Single Leg Press",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Unilateral variation, lighter total load",
                            desc: "One leg at a time",
                            video: "",
                            equipment: "üìç Leg press machine",
                            formCues: [
                                "One foot on platform, center of sled",
                                "Lower with control, knee tracks over toes",
                                "Press through whole foot to lockout",
                                "Alternate legs or complete all reps one side first"
                            ],
                            equipmentAlternatives: [
                                { condition: "No leg press?", suggestion: "Bulgarian Split Squats", reason: "Similar unilateral pattern" },
                                { condition: "Want bilateral?", suggestion: "Leg Press (both legs)", reason: "Standard variation" }
                            ]
                        }, {
                            name: "Goblet Squat",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Front-loaded, easier on lower back",
                            desc: "Dumbbell alternative to leg press",
                            video: "Exercise-Videos/LEGS_Squat-Goblet-Paused_Dumbbell.mp4",
                            equipment: "üìç 1 dumbbell or kettlebell",
                            formCues: [
                                "Hold dumbbell vertically at chest",
                                "Squat to parallel or below, chest up",
                                "Push through whole foot, elbows inside knees",
                                "Good substitute if no leg press available"
                            ],
                            equipmentAlternatives: [
                                { condition: "Want more load?", suggestion: "Back Squat", reason: "Can load heavier" },
                                { condition: "Have leg press?", suggestion: "Leg Press", reason: "Isolate legs better" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Leg Press",
                            isDefault: true,
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Great for quad growth, no spinal load",
                            desc: "Standard leg press machine",
                            video: "",
                            equipment: "üìç Leg press machine (45¬∞ angled OR horizontal)",
                            formCues: [
                                "Feet hip-width on platform, mid-foot position",
                                "Lower with control until knees at 90¬∞ (or slightly past)",
                                "Push through whole foot, don't round lower back",
                                "Don't lock knees hard at top, keep slight bend"
                            ],
                            equipmentAlternatives: [
                                { condition: "No leg press?", suggestion: "Goblet Squat", reason: "Similar quad focus" },
                                { condition: "Want free weights?", suggestion: "Front Squat", reason: "More core engagement" }
                            ]
                        }, {
                            name: "Hack Squat (Machine)",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Similar to leg press, more upright angle",
                            desc: "Alternative machine exercise",
                            video: "",
                            equipment: "üìç Hack squat machine",
                            formCues: [
                                "Back against pad, shoulders under pads",
                                "Feet shoulder-width on platform",
                                "Lower until thighs parallel (or deeper)",
                                "Press through heels and mid-foot to stand"
                            ],
                            equipmentAlternatives: [
                                { condition: "No hack squat?", suggestion: "Leg Press", reason: "Similar machine movement" },
                                { condition: "Want barbell?", suggestion: "Front Squat", reason: "Free weight alternative" }
                            ]
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Leg Press (Heels Elevated)",
                            muscleGroup: "Quads",
                            exerciseType: "Compound",
                            note: "Heels on small platform increases quad activation",
                            desc: "Advanced quad-focused variation",
                            video: "",
                            equipment: "üìç Leg press machine + small platform/block for heels",
                            formCues: [
                                "Place heels on 1-2 inch platform/block",
                                "Toes point slightly out, balls of feet on sled",
                                "Increases quad stretch at bottom",
                                "More quad dominant than standard leg press"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Leg Press (standard)", reason: "Standard foot position" }
                            ]
                        }, {
                            name: "Paused Leg Press (3s bottom)",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Pause at bottom for 3 seconds",
                            desc: "Removes stretch reflex",
                            video: "",
                            equipment: "üìç Leg press machine",
                            formCues: [
                                "Lower to bottom position, PAUSE 3 seconds",
                                "Maintain tension, don't relax",
                                "Press back up after pause",
                                "Use 80-85% of regular weight"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Leg Press", reason: "Remove pause" }
                            ]
                        }]
                    }
                }
            },

            "E3: Reverse Lunges": {
                defaultExercise: "Reverse Lunges",
                defaultBox: "normal",
                muscleGroup: "Quads/Glutes",
                exerciseType: "Compound",
                sets: 3,
                reps: "8-10 per leg",
                rest: "45-60s",
                progressionMethods: {
                    "weight": { name: "Add Weight (+2.5 kg per DB)", desc: "Increase dumbbell weight", tip: "Small jumps for unilateral work" },
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s raise", tip: "Control and balance challenge" },
                    "paused": { name: "Paused Lunges (2s bottom)", desc: "Pause at bottom for 2 seconds", tip: "Removes momentum, harder balance" },
                    "increased-volume": { name: "Increased Volume (+1 set)", desc: "Add 1 extra set", tip: "More leg growth stimulus" },
                    "increased-reps": { name: "Increased Reps (10-12/leg)", desc: "Aim for 10-12 reps per leg", tip: "Build endurance before adding weight" },
                    "drop-sets": { name: "Drop Sets", desc: "After failure, reduce weight 20-30% and continue", tip: "Brutal quad burner" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Reverse Lunges (Bodyweight)",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "No weight, focus on form and balance",
                            desc: "Easiest variation",
                            video: "Exercise-Videos/LEGS_Reverse-Lunge-Sliding_Bodyweight.mp4",
                            equipment: "üìç Just bodyweight",
                            formCues: [
                                "Step back with one leg, lower to 90¬∞",
                                "Front thigh parallel to floor",
                                "Push through front heel to return",
                                "Hands on hips or out for balance"
                            ],
                            equipmentAlternatives: [
                                { condition: "Want progression?", suggestion: "Reverse Lunges (Dumbbells)", reason: "Add external load" },
                                { condition: "Balance issues?", suggestion: "Split Squats (Stationary)", reason: "Don't step back and forth" }
                            ]
                        }, {
                            name: "Split Squats (Stationary)",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Feet stay in position, easier balance",
                            desc: "Static lunge position",
                            video: "Exercise-Videos/LEGS_Split-Squat-Stationary_Band.mp4",
                            equipment: "üìç Bodyweight or 2 dumbbells",
                            formCues: [
                                "Start in lunge position, feet don't move",
                                "Lower back knee toward floor",
                                "Front thigh parallel, push through front heel",
                                "Easier balance than reverse lunges"
                            ],
                            equipmentAlternatives: [
                                { condition: "Want movement?", suggestion: "Reverse Lunges", reason: "More dynamic" },
                                { condition: "Want harder?", suggestion: "Bulgarian Split Squats", reason: "Rear foot elevated" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Reverse Lunges",
                            isDefault: true,
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Easier on knees than forward lunges",
                            desc: "Standard dumbbell reverse lunges",
                            video: "Exercise-Videos/LEGS_Reverse-Lunge_Dumbbell.mp4",
                            equipment: "üìç 2 dumbbells OR barbell on back OR bodyweight",
                            formCues: [
                                "Step back with one leg, lower to 90¬∞",
                                "Front thigh parallel, chest up",
                                "Push through front heel to return to standing",
                                "Alternate legs or complete all reps one side"
                            ],
                            equipmentAlternatives: [
                                { condition: "No dumbbells?", suggestion: "Bodyweight Reverse Lunges", reason: "Build up strength first" },
                                { condition: "Want harder?", suggestion: "Bulgarian Split Squats", reason: "Rear foot elevated" }
                            ]
                        }, {
                            name: "Walking Lunges",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Move forward with each rep, more dynamic",
                            desc: "Alternative lunge variation",
                            video: "",
                            equipment: "üìç 2 dumbbells OR barbell on back OR bodyweight",
                            formCues: [
                                "Step forward into lunge, lower back knee",
                                "Front thigh parallel, push up and step forward",
                                "Continuous movement forward (need space)",
                                "More balance challenge than reverse"
                            ],
                            equipmentAlternatives: [
                                { condition: "Limited space?", suggestion: "Reverse Lunges", reason: "Stay in one spot" },
                                { condition: "Want stationary?", suggestion: "Split Squats", reason: "Feet don't move" }
                            ]
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Bulgarian Split Squat",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Rear foot elevated, more quad load on front leg",
                            desc: "Advanced single-leg exercise",
                            video: "Exercise-Videos/LEGS_Bulgarian-Split-Squat_Dumbbell.mp4",
                            equipment: "üìç Bench or box (knee height) + 2 dumbbells",
                            formCues: [
                                "Rear foot on bench behind you, front foot 2-3 feet forward",
                                "Lower until front thigh parallel (or deeper)",
                                "Push through front heel to stand",
                                "Most of weight on front leg"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Reverse Lunges", reason: "Both feet on ground" },
                                { condition: "Balance issues?", suggestion: "Split Squats (stationary)", reason: "More stable" }
                            ]
                        }, {
                            name: "Deficit Reverse Lunges",
                            muscleGroup: "Quads/Glutes",
                            exerciseType: "Compound",
                            note: "Stand on platform, increases range of motion",
                            desc: "Advanced progression",
                            video: "",
                            equipment: "üìç 2-4 inch platform + 2 dumbbells",
                            formCues: [
                                "Stand on 2-4 inch platform",
                                "Step back and down (greater ROM)",
                                "Front thigh below parallel",
                                "Increases quad and glute stretch"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Reverse Lunges (standard)", reason: "Standard ROM" }
                            ]
                        }]
                    }
                }
            },

            "E4: Seated Weighted Calf Raise": {
                defaultExercise: "Seated Weighted Calf Raise",
                defaultBox: "normal",
                muscleGroup: "Calves (Soleus)",
                exerciseType: "Isolation",
                sets: 4,
                reps: "10-15",
                rest: "1-1.5 min",
                progressionMethods: {
                    "weight": { name: "Add Weight (+2.5-5 kg)", desc: "Increase load on thighs", tip: "Calves need progressive overload too" },
                    "slow-tempo": { name: "Slow Tempo (3-1-3)", desc: "3s lower, 1s pause, 3s raise", tip: "Full ROM, maximize stretch and contraction" },
                    "paused": { name: "Paused Reps (2s stretch)", desc: "Pause at bottom stretch for 2 seconds", tip: "Intense stretch, builds muscle" },
                    "increased-volume": { name: "Increased Volume (+1 set)", desc: "Add 1 extra set", tip: "Calves can handle high volume" },
                    "increased-reps": { name: "Increased Reps (15-20)", desc: "Aim for 15-20 reps instead", tip: "Calves respond well to high reps" },
                    "drop-sets": { name: "Drop Sets", desc: "After failure, reduce weight 30% and continue", tip: "Great calf finisher" }
                },
                boxes: {
                    easy: {
                        label: "Easy",
                        icon: "üîΩ",
                        exercises: [{
                            name: "Seated Calf Raise (Bodyweight)",
                            muscleGroup: "Calves (Soleus)",
                            exerciseType: "Isolation",
                            note: "No added weight, just bodyweight",
                            desc: "Easiest variation",
                            video: "Exercise-Videos/LEGS_Calf-Raise-Seated_Bodyweight.mp4",
                            equipment: "üìç Bench or chair + platform/step for toes",
                            formCues: [
                                "Sit on bench, balls of feet on platform",
                                "Knees at 90¬∞, hands on thighs for light pressure",
                                "Lower heels as far as possible (full stretch)",
                                "Raise as high as possible, pause at top"
                            ],
                            equipmentAlternatives: [
                                { condition: "Want progression?", suggestion: "Seated Calf Raise (Weighted)", reason: "Add dumbbell or barbell on thighs" }
                            ]
                        }]
                    },
                    normal: {
                        label: "Normal",
                        icon: "üìç",
                        exercises: [{
                            name: "Seated Weighted Calf Raise",
                            isDefault: true,
                            muscleGroup: "Calves (Soleus)",
                            exerciseType: "Isolation",
                            note: "Targets soleus (knee bent calf muscle)",
                            desc: "Standard weighted variation",
                            video: "Exercise-Videos/LEGS_Calf-Raise-Seated_Bodyweight.mp4",
                            equipment: "üìç Seated calf raise machine OR bench + barbell/dumbbells on thighs",
                            formCues: [
                                "Balls of feet on platform, weight on thighs/knees",
                                "Lower heels as far as possible (full stretch)",
                                "Pause at bottom, feel the stretch",
                                "Raise as high as possible, pause at top"
                            ],
                            equipmentAlternatives: [
                                { condition: "No machine?", suggestion: "Barbell or dumbbells on thighs", reason: "DIY setup on bench" },
                                { condition: "Want standing?", suggestion: "Standing Calf Raise", reason: "Targets gastrocnemius more" }
                            ]
                        }, {
                            name: "Seated Calf Raise Machine",
                            muscleGroup: "Calves (Soleus)",
                            exerciseType: "Isolation",
                            note: "Dedicated machine for seated calf raises",
                            desc: "Machine variation",
                            video: "",
                            equipment: "üìç Seated calf raise machine",
                            formCues: [
                                "Adjust pad to rest on thighs just above knees",
                                "Balls of feet on platform, heels hanging",
                                "Full ROM: maximum stretch at bottom, maximum contraction at top",
                                "Slow controlled reps, no bouncing"
                            ],
                            equipmentAlternatives: [
                                { condition: "No machine?", suggestion: "Seated Weighted Calf Raise (bench + weight)", reason: "Manual setup works great" }
                            ]
                        }]
                    },
                    hard: {
                        label: "Hard",
                        icon: "üîº",
                        exercises: [{
                            name: "Seated Calf Raise (Paused 3s stretch)",
                            muscleGroup: "Calves (Soleus)",
                            exerciseType: "Isolation",
                            note: "Pause 3 seconds at bottom stretch",
                            desc: "Advanced intensity technique",
                            video: "",
                            equipment: "üìç Seated calf raise machine OR bench + weight on thighs",
                            formCues: [
                                "Same setup as regular seated calf raise",
                                "Lower to full stretch, HOLD 3 seconds",
                                "Maximize stretch tension on soleus",
                                "Use 85-90% of regular weight"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Seated Weighted Calf Raise", reason: "Remove pause" }
                            ]
                        }, {
                            name: "Single Leg Seated Calf Raise",
                            muscleGroup: "Calves (Soleus)",
                            exerciseType: "Isolation",
                            note: "One leg at a time, harder balance and load per calf",
                            desc: "Unilateral progression",
                            video: "",
                            equipment: "üìç Bench + 1 dumbbell on thigh",
                            formCues: [
                                "One foot on platform, dumbbell on that thigh",
                                "Other leg relaxed or crossed over",
                                "Same full ROM as bilateral",
                                "Complete all reps one side, then switch"
                            ],
                            equipmentAlternatives: [
                                { condition: "Too difficult?", suggestion: "Seated Weighted Calf Raise (both legs)", reason: "Bilateral is easier" }
                            ]
                        }]
                    }
                }
            }
        };

        // ===== PROGRESSION TRACKING DATA =====
        let exerciseHistory = {}; // Will be loaded from localStorage
        let progressionAlerts = {}; // Stores alerts for each exercise

        // Display today's date
        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const today = new Date();
        const todayDayName = days[today.getDay()].toLowerCase(); // e.g., "friday"
        document.getElementById('today-date').textContent =
            `${days[today.getDay()]}, ${months[today.getMonth()]} ${today.getDate()}`;

        // Day navigation
        const navBtns = document.querySelectorAll('.nav-btn');
        const workoutDays = document.querySelectorAll('.workout-day');

        // Day selection will be handled by the phase initialization code
        // No need for redundant initialization here

        navBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const dayId = btn.dataset.day;

                // Get parent nav to determine which buttons to update
                const parentNav = btn.closest('.nav');
                const buttonsInNav = parentNav.querySelectorAll('.nav-btn');

                // Remove active from buttons in same nav
                buttonsInNav.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Hide all workout days and show only the selected one
                workoutDays.forEach(d => {
                    d.style.display = 'none';
                    d.classList.remove('active');
                });

                const selectedDay = document.getElementById(dayId);
                if (selectedDay) {
                    selectedDay.style.display = 'block';
                    selectedDay.classList.add('active');
                    updateStats(dayId);
                }
            });
        });

        // Phase selector functionality
        const phaseBtns = document.querySelectorAll('.phase-btn');
        let currentPhase = localStorage.getItem('selected-phase') || '2'; // Load saved phase or default to Phase 2

        phaseBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                phaseBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentPhase = btn.dataset.phase;

                // Save phase selection to localStorage
                localStorage.setItem('selected-phase', currentPhase);

                // Close settings panel after selection
                const panel = document.getElementById('settings-panel');
                panel.classList.remove('active');

                // Remove all active classes first
                workoutDays.forEach(d => d.classList.remove('active'));

                // Toggle between Phase 1 and Phase 2 workouts
                if (currentPhase === '1') {
                    // Hide Phase 2 day navigation, show Phase 1 navigation
                    document.getElementById('day-nav').style.display = 'none';
                    document.getElementById('phase1-nav').style.display = 'flex';

                    // Hide ALL Phase 2 workouts
                    document.querySelectorAll('.workout-day:not(.phase-1)').forEach(el => {
                        el.style.display = 'none';
                        el.classList.remove('active');
                    });

                    // Show Phase 1 workouts but only activate Workout A
                    document.getElementById('workout-a').style.display = 'block';
                    document.getElementById('workout-a').classList.add('active');
                    document.getElementById('workout-b').style.display = 'none';
                    document.getElementById('workout-b').classList.remove('active');

                    // Update Phase 1 navigation buttons
                    document.querySelectorAll('#phase1-nav .nav-btn').forEach(b => b.classList.remove('active'));
                    document.querySelector('#phase1-nav .nav-btn[data-day="workout-a"]').classList.add('active');

                    updateStats('workout-a');
                } else {
                    // Hide Phase 1 navigation, show Phase 2 day navigation
                    document.getElementById('day-nav').style.display = 'flex';
                    document.getElementById('phase1-nav').style.display = 'none';

                    // Hide ALL Phase 1 workouts
                    document.querySelectorAll('.phase-1').forEach(el => {
                        el.style.display = 'none';
                        el.classList.remove('active');
                    });

                    // Hide all Phase 2 days first, then show today's day
                    document.querySelectorAll('.workout-day:not(.phase-1)').forEach(el => {
                        el.style.display = 'none';
                        el.classList.remove('active');
                    });

                    // Show today's workout day
                    const todayWorkout = document.getElementById(todayDayName);
                    if (todayWorkout) {
                        todayWorkout.style.display = 'block';
                        todayWorkout.classList.add('active');
                    }

                    // Update Phase 2 navigation buttons to today
                    navBtns.forEach(b => b.classList.remove('active'));
                    const todayNavBtn = document.querySelector(`.nav-btn[data-day="${todayDayName}"]`);
                    if (todayNavBtn) {
                        todayNavBtn.classList.add('active');
                    }

                    updateStats(todayDayName);
                }
            });
        });

        // Rest timer functionality
        let timerInterval = null;
        let timeLeft = 0;

        document.querySelectorAll('.set-check').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    const restTime = parseInt(this.dataset.rest) || 60;

                    // Find exercise name and set number
                    const setRow = this.closest('.set-row');
                    const exercise = this.closest('.exercise');
                    const titleSpan = exercise ? exercise.querySelector('.exercise-title span') : null;
                    const exerciseTitle = titleSpan ? titleSpan.textContent.trim() : '';
                    const setLabel = setRow ? setRow.querySelector('.set-label').textContent : '';

                    // Check if this is the last set of the exercise
                    const allSetsInExercise = exercise.querySelectorAll('.set-check');
                    const currentSetIndex = Array.from(allSetsInExercise).indexOf(this);
                    const isLastSet = currentSetIndex === allSetsInExercise.length - 1;

                    if (isLastSet) {
                        // Last set - show "Exercise Complete" with 60-90s rest before next exercise
                        startRestTimer(90, exerciseTitle, '‚úÖ Exercise Complete');
                    } else {
                        // Normal inter-set rest
                        startRestTimer(restTime, exerciseTitle, setLabel);
                    }
                }

                // Always save progress and update stats whether checking or unchecking
                saveProgress();

                // Find which day this checkbox belongs to and update its stats
                const workoutDay = this.closest('.workout-day');
                if (workoutDay) {
                    updateStats(workoutDay.id);
                }
            });
        });

        function startRestTimer(seconds = 120, exerciseName = '', setName = '') {
            if (timerInterval) clearInterval(timerInterval);

            timeLeft = seconds;
            const timerEl = document.getElementById('rest-timer');
            const displayEl = document.getElementById('timer-display');
            const exerciseEl = document.getElementById('timer-exercise');

            // Set exercise name if provided
            if (exerciseName && setName) {
                exerciseEl.textContent = `${exerciseName} - ${setName}`;
            } else {
                exerciseEl.textContent = '';
            }

            timerEl.classList.add('active');

            timerInterval = setInterval(() => {
                timeLeft--;
                const mins = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                displayEl.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerEl.classList.remove('active');
                    vibrate();
                }
            }, 1000);
        }

        function cancelTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            const timerEl = document.getElementById('rest-timer');
            timerEl.classList.remove('active');
        }

        function vibrate() {
            if ('vibrate' in navigator) {
                navigator.vibrate([200, 100, 200]);
            }
        }

        function updateStats(day = 'monday') {
            const dayEl = document.getElementById(day);
            if (!dayEl) return;

            const exercises = dayEl.querySelectorAll('[data-exercise]');
            const totalExercises = exercises.length;
            let completedExercises = 0;
            let totalSets = 0;
            let completedSets = 0;

            exercises.forEach(ex => {
                const sets = ex.querySelectorAll('.set-check');
                const checked = ex.querySelectorAll('.set-check:checked');
                totalSets += sets.length;
                completedSets += checked.length;
                if (checked.length === sets.length && sets.length > 0) {
                    completedExercises++;
                }
            });

            // Handle Phase 1 workout IDs (workout-a ‚Üí wa, workout-b ‚Üí wb)
            let dayPrefix = day.substring(0,3);
            if (day === 'workout-a') dayPrefix = 'wa';
            if (day === 'workout-b') dayPrefix = 'wb';

            const exStat = document.getElementById(`${dayPrefix}-completed`);
            const setStat = document.getElementById(`${dayPrefix}-sets`);

            if (exStat) exStat.textContent = `${completedExercises}/${totalExercises}`;
            if (setStat) setStat.textContent = `${completedSets}/${totalSets}`;
        }

        function saveProgress() {
            const data = {};
            document.querySelectorAll('.set-check').forEach((cb, i) => {
                data[`check-${i}`] = cb.checked;
            });
            document.querySelectorAll('.weight-input, .reps-input').forEach((input, i) => {
                data[`input-${i}`] = input.value;
            });
            document.querySelectorAll('.rpe-select').forEach((select, i) => {
                data[`rpe-${i}`] = select.value;
            });
            localStorage.setItem('bws-progress', JSON.stringify(data));
        }

        function loadProgress() {
            const saved = localStorage.getItem('bws-progress');
            if (!saved) return;

            const data = JSON.parse(saved);
            document.querySelectorAll('.set-check').forEach((cb, i) => {
                if (data[`check-${i}`]) cb.checked = true;
            });
            document.querySelectorAll('.weight-input, .reps-input').forEach((input, i) => {
                if (data[`input-${i}`]) input.value = data[`input-${i}`];
            });
            document.querySelectorAll('.rpe-select').forEach((select, i) => {
                if (data[`rpe-${i}`]) {
                    select.value = data[`rpe-${i}`];
                    updateRPEColor(select);
                }
            });
            updateStats();
        }

        function completeWorkout() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.zIndex = '10001';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 400px;">
                    <div class="modal-header">
                        <h2 class="modal-title">‚úì Complete Workout?</h2>
                    </div>
                    <div style="padding: 20px;">
                        <p style="color: #ccc; margin-bottom: 20px;">Mark today's workout as complete?</p>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="this.closest('.modal').remove()" style="flex: 1; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Cancel</button>
                            <button onclick="confirmCompleteWorkout()" style="flex: 1; padding: 12px; background: #4caf50; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Complete</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function confirmCompleteWorkout() {
            // Close confirmation modal
            document.querySelector('.modal.active').remove();

            // Show success message
            const successModal = document.createElement('div');
            successModal.className = 'modal active';
            successModal.style.zIndex = '10001';
            successModal.innerHTML = `
                <div class="modal-content" style="max-width: 400px;">
                    <div class="modal-header">
                        <h2 class="modal-title">üí™ Great Job!</h2>
                    </div>
                    <div style="padding: 20px;">
                        <p style="color: #ccc; margin-bottom: 15px;">Remember:</p>
                        <ul style="color: #aaa; margin: 0 0 20px 20px; padding: 0;">
                            <li style="margin-bottom: 8px;">Log your lifts</li>
                            <li style="margin-bottom: 8px;">Eat protein</li>
                            <li>Sleep 7-9 hours</li>
                        </ul>
                        <button onclick="this.closest('.modal').remove()" style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Got It!</button>
                    </div>
                </div>
            `;
            document.body.appendChild(successModal);
            saveProgress();
        }

        // ===== GOOGLE SHEETS INTEGRATION =====

        async function syncToSheets() {
            const sheetsURL = getSheetsURL();
            if (!sheetsURL) {
                if (confirm('‚ö†Ô∏è Google Sheets not connected!\n\nWould you like to set it up now?')) {
                    showGoogleSheetsSetup();
                }
                return;
            }

            const workoutData = collectWorkoutData();
            if (workoutData.length === 0) {
                alert('No workout data to sync. Complete at least one set first!');
                return;
            }

            const syncBtn = document.querySelector('.sync-sheets');
            if (syncBtn) {
                syncBtn.textContent = '‚è≥ Syncing...';
                syncBtn.disabled = true;
            }

            try {
                // Send each completed set to Google Sheets
                for (const entry of workoutData) {
                    const response = await fetch(sheetsURL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(entry)
                    });
                }

                alert('‚úÖ Workout synced to Google Sheets!\n\n' + workoutData.length + ' sets logged.');

                // Store sync timestamp
                localStorage.setItem('last-sync', new Date().toISOString());
            } catch (error) {
                console.error('Sync error:', error);
                alert('‚ùå Failed to sync to Google Sheets.\n\nCheck:\n- Internet connection\n- Web App URL is correct\n- Google Sheet is accessible');
            } finally {
                if (syncBtn) {
                    syncBtn.textContent = 'üì§ Sync to Sheets';
                    syncBtn.disabled = false;
                }
            }
        }

        function collectWorkoutData() {
            const workoutData = [];
            const currentDate = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
            const currentDay = days[new Date().getDay()];

            // Find active workout day
            const activeDay = document.querySelector('.workout-day.active');
            if (!activeDay) return workoutData;

            // Get all exercises in the active day
            const exercises = activeDay.querySelectorAll('.exercise[data-exercise]');

            exercises.forEach(exercise => {
                const exerciseTitle = exercise.querySelector('.exercise-title')?.textContent || '';

                // Only include working sets (not warm-up exercises)
                if (exerciseTitle && !exerciseTitle.includes('Warm-Up')) {
                    const setRows = exercise.querySelectorAll('.set-row');

                    setRows.forEach((row, index) => {
                        const checkbox = row.querySelector('.set-check');
                        const weightInput = row.querySelector('.weight-input');
                        const repsInput = row.querySelector('.reps-input');
                        const rpeSelect = row.querySelector('.rpe-select');

                        // Only include completed sets with data
                        if (checkbox?.checked && weightInput?.value && repsInput?.value) {
                            const rpeValue = rpeSelect?.value || '';
                            const notes = rpeValue ? `RPE: ${rpeValue}` : '';

                            workoutData.push({
                                date: currentDate,
                                day: currentDay,
                                exercise: exerciseTitle.trim(),
                                set: index + 1,
                                weight: parseFloat(weightInput.value),
                                reps: parseInt(repsInput.value),
                                notes: notes
                            });
                        }
                    });
                }
            });

            return workoutData;
        }

        async function loadLastWorkout() {
            const sheetsURL = getSheetsURL();
            if (!sheetsURL) {
                if (confirm('‚ö†Ô∏è Google Sheets not connected!\n\nLoad Last Workout requires Google Sheets integration. Would you like to set it up now?')) {
                    showGoogleSheetsSetup();
                }
                return;
            }

            const loadBtn = document.querySelector('.load-last');
            if (loadBtn) {
                loadBtn.textContent = '‚è≥ Loading...';
                loadBtn.disabled = true;
            }

            try {
                const response = await fetch(sheetsURL);
                const data = await response.json();

                if (data.status === 'success' && data.workouts && data.workouts.length > 0) {
                    showLastWorkoutData(data.workouts);
                } else {
                    alert('No previous workout data found in Google Sheets.');
                }
            } catch (error) {
                console.error('Load error:', error);
                alert('‚ùå Failed to load from Google Sheets.\n\nCheck:\n- Internet connection\n- Web App URL is correct\n- You have synced at least one workout');
            } finally {
                if (loadBtn) {
                    loadBtn.textContent = 'üì• Load Last Workout';
                    loadBtn.disabled = false;
                }
            }
        }

        function showLastWorkoutData(workouts) {
            // Get active workout day
            const activeDay = document.querySelector('.workout-day.active');
            if (!activeDay) return;

            const exercises = activeDay.querySelectorAll('.exercise[data-exercise]');
            let foundMatches = 0;

            exercises.forEach(exercise => {
                const exerciseTitle = exercise.querySelector('.exercise-title')?.textContent || '';

                // Find matching exercises from last workout (last 7 days)
                const sevenDaysAgo = new Date();
                sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);

                const matchingWorkouts = workouts.filter(w => {
                    const workoutDate = new Date(w.date);
                    return w.exercise === exerciseTitle && workoutDate >= sevenDaysAgo;
                });

                if (matchingWorkouts.length > 0) {
                    // Prefill weight inputs with last workout's weights
                    const setRows = exercise.querySelectorAll('.set-row');
                    setRows.forEach((row, index) => {
                        const weightInput = row.querySelector('.weight-input');
                        const repsInput = row.querySelector('.reps-input');

                        if (matchingWorkouts[index]) {
                            const lastWeight = matchingWorkouts[index].weight;
                            const lastReps = matchingWorkouts[index].reps;

                            weightInput.placeholder = `${lastWeight} kg (last time)`;
                            repsInput.placeholder = `${lastReps} reps`;

                            // Suggest progressive overload if hit top of rep range
                            const exerciseMeta = exercise.querySelector('.exercise-meta')?.textContent || '';
                            const repRange = exerciseMeta.match(/(\d+)-(\d+) reps/);

                            if (repRange && lastReps >= parseInt(repRange[2])) {
                                const suggested = lastWeight + 2.5;
                                weightInput.placeholder = `${suggested} kg (recommended +2.5)`;
                            }

                            foundMatches++;
                        }
                    });
                }
            });

            if (foundMatches > 0) {
                alert(`‚úÖ Loaded last workout!\n\n${foundMatches} exercises prefilled.\n\nCheck the weight placeholders for suggestions.`);
            } else {
                alert('No matching exercises found from your last workout.');
            }
        }

        async function testSheetsConnection() {
            const sheetsURL = getSheetsURL();
            if (!sheetsURL) {
                alert('‚ö†Ô∏è Google Sheets not connected!\n\nPlease set up Google Sheets first.');
                return;
            }

            alert('Testing connection to Google Sheets...');

            try {
                const response = await fetch(sheetsURL);
                const data = await response.json();

                if (data.status === 'success') {
                    alert('‚úÖ Connected to Google Sheets!\n\nYour setup is working correctly.\n\nWorkouts found: ' + (data.workouts?.length || 0));
                } else {
                    alert('‚ö†Ô∏è Connection issue:\n\n' + (data.message || 'Unknown error'));
                }
            } catch (error) {
                alert('‚ùå Connection failed!\n\nError: ' + error.message + '\n\nCheck:\n- Web App URL is correct\n- Internet connection\n- Deployment is set to "Anyone"');
            }
        }

        // ===== GOOGLE SHEETS SETUP WIZARD =====

        function showGoogleSheetsSetup() {
            const modal = document.getElementById('sheets-setup-modal');
            if (modal) {
                // Reset to step 1 and hide all other steps
                showSheetsStep1();
                modal.classList.add('active');

                // Update button status
                updateSheetsButtonStatus();
            }
        }

        function closeGoogleSheetsSetup() {
            const modal = document.getElementById('sheets-setup-modal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function showSheetsStep1() {
            hideAllSheetsSteps();
            document.getElementById('sheets-setup-step1').style.display = 'block';
        }

        function showSheetsStep2() {
            hideAllSheetsSteps();
            document.getElementById('sheets-setup-step2').style.display = 'block';
        }

        function showSheetsStep3() {
            hideAllSheetsSteps();
            document.getElementById('sheets-setup-step3').style.display = 'block';
        }

        function showSheetsStep4() {
            hideAllSheetsSteps();
            const step4 = document.getElementById('sheets-setup-step4');
            step4.style.display = 'block';

            // Pre-fill URL if already exists
            const existingURL = getSheetsURL();
            if (existingURL) {
                document.getElementById('sheets-url-input').value = existingURL;
            }
        }

        function hideAllSheetsSteps() {
            document.getElementById('sheets-setup-step1').style.display = 'none';
            document.getElementById('sheets-setup-step2').style.display = 'none';
            document.getElementById('sheets-setup-step3').style.display = 'none';
            document.getElementById('sheets-setup-step4').style.display = 'none';
            document.getElementById('sheets-setup-success').style.display = 'none';
            document.getElementById('sheets-setup-error').style.display = 'none';
        }

        async function saveSheetsURL() {
            const urlInput = document.getElementById('sheets-url-input');
            const url = urlInput.value.trim();

            if (!url) {
                alert('Please enter your Google Apps Script URL');
                return;
            }

            // Basic validation
            if (!url.startsWith('https://script.google.com/macros/s/') || !url.endsWith('/exec')) {
                alert('‚ö†Ô∏è Invalid URL format!\n\nThe URL should look like:\nhttps://script.google.com/macros/s/YOUR_ID/exec');
                return;
            }

            // Save the URL
            setSheetsURL(url);

            // Test the connection
            try {
                const response = await fetch(url);
                const data = await response.json();

                if (data.status === 'success') {
                    // Success!
                    hideAllSheetsSteps();
                    document.getElementById('sheets-setup-success').style.display = 'block';
                    updateSheetsButtonStatus();
                } else {
                    // Connection issue
                    hideAllSheetsSteps();
                    document.getElementById('sheets-setup-error').style.display = 'block';
                    document.getElementById('sheets-error-message').textContent =
                        'The URL is valid but returned an error: ' + (data.message || 'Unknown error');
                }
            } catch (error) {
                // Failed to connect
                hideAllSheetsSteps();
                document.getElementById('sheets-setup-error').style.display = 'block';
                document.getElementById('sheets-error-message').textContent =
                    'Could not connect to Google Sheets. Please check:\n\n' +
                    '‚Ä¢ URL is correct (copy-paste from Apps Script)\n' +
                    '‚Ä¢ Deployment is set to "Who has access: Anyone"\n' +
                    '‚Ä¢ Internet connection is working\n\n' +
                    'Error: ' + error.message;
            }
        }

        function updateSheetsButtonStatus() {
            const sheetsURL = getSheetsURL();
            const setupBtn = document.getElementById('sheets-setup-btn');
            const testBtn = document.getElementById('test-sheets-btn');
            const statusIcon = document.getElementById('sheets-status-icon');
            const statusText = document.getElementById('sheets-status-text');

            if (sheetsURL) {
                // Connected
                statusIcon.textContent = '‚úÖ';
                statusText.textContent = 'Google Sheets Connected';
                testBtn.style.display = 'block';
            } else {
                // Not connected
                statusIcon.textContent = 'üîó';
                statusText.textContent = 'Connect Google Sheets';
                testBtn.style.display = 'none';
            }
        }

        function toggleSettings() {
            const panel = document.getElementById('settings-panel');
            panel.classList.toggle('active');
        }

        function clearLocalData() {
            // Create custom modal for clear confirmation
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.zIndex = '10001';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h2 class="modal-title">‚ö†Ô∏è Clear Local Data</h2>
                    </div>
                    <div style="padding: 20px;">
                        <p style="color: #ccc; margin-bottom: 15px;">This will clear:</p>
                        <ul style="color: #aaa; margin-bottom: 20px; padding-left: 20px;">
                            <li>Saved weights/reps/RPE</li>
                            <li>Checked sets</li>
                            <li>Collapsible states</li>
                            <li>Phase selection</li>
                        </ul>
                        <div style="background: #1a1a1a; border: 2px solid #333; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" id="clear-sheets-checkbox" style="margin-right: 10px; width: 18px; height: 18px; cursor: pointer;">
                                <span style="color: #f39c12; font-weight: 600;">Also disconnect Google Sheets</span>
                            </label>
                            <p style="font-size: 12px; color: #888; margin: 8px 0 0 28px;">
                                (Your data in Google Sheets will NOT be deleted)
                            </p>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="this.closest('.modal').remove()" style="flex: 1; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Cancel</button>
                            <button onclick="confirmClearData()" style="flex: 1; padding: 12px; background: #e74c3c; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Clear Data</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function confirmClearData() {
            const clearSheets = document.getElementById('clear-sheets-checkbox').checked;

            // Clear workout data
            localStorage.removeItem('bws-progress');
            localStorage.removeItem('last-sync');
            localStorage.removeItem('info-states');
            localStorage.removeItem('selected-phase');

            // Optionally clear Google Sheets connection
            if (clearSheets) {
                localStorage.removeItem('sheets_web_app_url');
            }

            // Uncheck all checkboxes and clear inputs
            document.querySelectorAll('.set-check').forEach(cb => cb.checked = false);
            document.querySelectorAll('.weight-input, .reps-input').forEach(input => {
                input.value = '';
                input.placeholder = input.classList.contains('weight-input') ? 'Weight (kg)' : 'Reps';
            });
            document.querySelectorAll('.rpe-select').forEach(select => {
                select.value = '';
                select.classList.remove('rpe-easy', 'rpe-moderate', 'rpe-hard');
            });

            // Collapse all info sections
            document.querySelectorAll('.tips-content').forEach(content => {
                content.classList.remove('expanded');
            });
            document.querySelectorAll('.tips-toggle').forEach(btn => {
                btn.innerHTML = '‚ÑπÔ∏è Info';
            });

            updateStats();

            // Remove modal and reload
            document.querySelector('.modal').remove();
            location.reload();
        }

        // Save on input change
        document.querySelectorAll('.weight-input, .reps-input').forEach(input => {
            input.addEventListener('change', saveProgress);
        });

        // ===== RPE TRACKER FUNCTIONS =====
        function updateRPEColor(selectElement) {
            const value = parseInt(selectElement.value);

            // Remove all RPE classes
            selectElement.classList.remove('rpe-easy', 'rpe-moderate', 'rpe-hard');

            // Add appropriate class based on value
            if (value >= 1 && value <= 6) {
                selectElement.classList.add('rpe-easy');
            } else if (value >= 7 && value <= 8) {
                selectElement.classList.add('rpe-moderate');
            } else if (value >= 9 && value <= 10) {
                selectElement.classList.add('rpe-hard');
            }

            // Save progress when RPE changes
            saveProgress();
        }

        // Add event listeners for RPE selects
        document.querySelectorAll('.rpe-select').forEach(select => {
            select.addEventListener('change', function() {
                updateRPEColor(this);
            });
        });

        // ===== COLLAPSIBLE FORM CUES FUNCTIONS =====
        function toggleTips(button) {
            const exercise = button.closest('.exercise');
            const infoContent = exercise.querySelector('.tips-content');
            const exerciseId = exercise.getAttribute('data-exercise');

            // Toggle the expanded class
            infoContent.classList.toggle('expanded');

            // Update button text
            if (infoContent.classList.contains('expanded')) {
                button.innerHTML = '‚ÑπÔ∏è Hide';
            } else {
                button.innerHTML = '‚ÑπÔ∏è Info';
            }

            // Save state to localStorage
            saveInfoState(exerciseId, infoContent.classList.contains('expanded'));
        }

        function toggleDetailedSteps(button) {
            const exercise = button.closest('.exercise');
            const stepsContent = exercise.querySelector('.detailed-steps-content');
            const exerciseId = exercise.getAttribute('data-exercise');

            // Toggle the expanded class
            stepsContent.classList.toggle('expanded');

            // Update button text
            if (stepsContent.classList.contains('expanded')) {
                button.innerHTML = 'üìã Hide';
            } else {
                button.innerHTML = 'üìã Steps';
            }

            // Save state to localStorage
            saveDetailedStepsState(exerciseId, stepsContent.classList.contains('expanded'));
        }

        function saveDetailedStepsState(exerciseId, isExpanded) {
            const key = `detailedSteps_${exerciseId}`;
            localStorage.setItem(key, isExpanded);
        }

        function loadDetailedStepsState(exerciseId) {
            const key = `detailedSteps_${exerciseId}`;
            return localStorage.getItem(key) === 'true';
        }

        function loadDetailedStepsStates() {
            document.querySelectorAll('.exercise').forEach(exercise => {
                const exerciseId = exercise.getAttribute('data-exercise');
                const stepsContent = exercise.querySelector('.detailed-steps-content');
                const button = exercise.querySelector('.detailed-steps-toggle');

                if (stepsContent && button && loadDetailedStepsState(exerciseId)) {
                    stepsContent.classList.add('expanded');
                    button.innerHTML = 'üìã Hide';
                }
            });
        }

        function saveInfoState(exerciseId, isExpanded) {
            const infoStates = JSON.parse(localStorage.getItem('info-states') || '{}');
            infoStates[exerciseId] = isExpanded;
            localStorage.setItem('info-states', JSON.stringify(infoStates));
        }

        function loadInfoStates() {
            const infoStates = JSON.parse(localStorage.getItem('info-states') || '{}');

            document.querySelectorAll('.exercise[data-exercise]').forEach(exercise => {
                const exerciseId = exercise.getAttribute('data-exercise');
                const infoContent = exercise.querySelector('.tips-content');
                const button = exercise.querySelector('.tips-toggle');

                if (infoStates[exerciseId] && infoContent && button) {
                    infoContent.classList.add('expanded');
                    button.innerHTML = '‚ÑπÔ∏è Hide';
                }
            });
        }

        // ===== PLATE CALCULATOR FUNCTIONS =====
        function openPlateCalculator() {
            const modal = document.getElementById('plate-calculator');
            modal.classList.add('active');

            // Close settings panel
            const settingsPanel = document.getElementById('settings-panel');
            settingsPanel.classList.remove('active');
        }

        function closePlateCalculator() {
            const modal = document.getElementById('plate-calculator');
            modal.classList.remove('active');

            // Clear result
            const resultDiv = document.getElementById('calc-result');
            resultDiv.classList.remove('active');
        }

        function showRPEGuide() {
            const modal = document.getElementById('rpe-guide-modal');
            modal.classList.add('active');

            // Close settings panel
            const settingsPanel = document.getElementById('settings-panel');
            settingsPanel.classList.remove('active');
        }

        function closeRPEGuide() {
            const modal = document.getElementById('rpe-guide-modal');
            modal.classList.remove('active');
        }

        function calculatePlates() {
            const targetWeight = parseFloat(document.getElementById('calc-target-weight').value);
            const barWeight = parseFloat(document.getElementById('calc-bar-weight').value) || 20;

            if (!targetWeight || targetWeight <= barWeight) {
                alert('Please enter a valid target weight greater than the bar weight.');
                return;
            }

            // Calculate weight needed per side
            const weightPerSide = (targetWeight - barWeight) / 2;

            // Available plates in kg (sorted largest to smallest)
            const plates = [20, 15, 10, 5, 2.5, 1.25];
            const plateCounts = {};
            let remaining = weightPerSide;

            // Greedy algorithm to find plate combination
            for (const plate of plates) {
                const count = Math.floor(remaining / plate);
                if (count > 0) {
                    plateCounts[plate] = count;
                    remaining = Math.round((remaining - (count * plate)) * 100) / 100; // Round to avoid floating point errors
                }
            }

            // Build result HTML
            let resultHTML = `<strong>Target: ${targetWeight}kg total</strong><br>`;
            resultHTML += `<strong>Per side: ${weightPerSide}kg</strong><br><br>`;

            if (remaining > 0.1) {
                resultHTML += `<span style="color: #ffa726;">‚ö†Ô∏è Cannot make exactly ${weightPerSide}kg per side.<br>`;
                resultHTML += `Closest: ${(weightPerSide - remaining).toFixed(2)}kg per side (${barWeight + 2 * (weightPerSide - remaining)}kg total)</span><br><br>`;
            }

            resultHTML += '<ul class="plate-list">';

            let hasPlates = false;
            for (const [plate, count] of Object.entries(plateCounts)) {
                if (count > 0) {
                    hasPlates = true;
                    resultHTML += `<li class="plate-item">‚Ä¢ ${count} √ó ${plate}kg plate${count > 1 ? 's' : ''}</li>`;
                }
            }

            if (!hasPlates) {
                resultHTML += '<li class="plate-item">No plates needed (bar only)</li>';
            }

            resultHTML += '</ul>';

            // Display result
            document.getElementById('calc-result-text').innerHTML = resultHTML;
            document.getElementById('calc-result').classList.add('active');
        }

        // Close modal when clicking outside
        document.getElementById('plate-calculator').addEventListener('click', function(e) {
            if (e.target === this) {
                closePlateCalculator();
            }
        });

        // ===== PROGRESSION TRACKING FUNCTIONS =====

        // Load exercise history from localStorage
        function loadExerciseHistory() {
            const saved = localStorage.getItem('exercise-history');
            if (saved) {
                exerciseHistory = JSON.parse(saved);
            }
        }

        // Save exercise history to localStorage
        function saveExerciseHistory() {
            localStorage.setItem('exercise-history', JSON.stringify(exerciseHistory));
        }

        // Analyze progression for an exercise
        function analyzeProgression(exerciseName) {
            const history = exerciseHistory[exerciseName] || [];
            if (history.length === 0) {
                return { type: 'none', message: 'No history yet - track your first workout!' };
            }

            // Get last workout
            const lastWorkout = history[history.length - 1];
            const lastDate = new Date(lastWorkout.date);
            const daysSince = Math.floor((new Date() - lastDate) / (1000 * 60 * 60 * 24));

            // Check for plateau (same weight for 3+ workouts)
            if (history.length >= 3) {
                const lastThree = history.slice(-3);
                const sameWeight = lastThree.every(w => w.weight === lastThree[0].weight);
                if (sameWeight) {
                    return {
                        type: 'plateau',
                        message: `Plateau detected: Same weight (${lastThree[0].weight}kg) for 3+ workouts`,
                        suggestion: 'Try deload week or switch to alternate exercise'
                    };
                }
            }

            // Check for strength decrease
            if (history.length >= 2) {
                const lastTwo = history.slice(-2);
                const weightDecreased = lastTwo[1].weight < lastTwo[0].weight;
                const repsDecreased = lastTwo[1].weight === lastTwo[0].weight && lastTwo[1].reps < lastTwo[0].reps;

                if (weightDecreased || repsDecreased) {
                    return {
                        type: 'regression',
                        message: 'Strength decreased from last workout',
                        suggestion: 'Check recovery: sleep, nutrition, stress. Consider deload.'
                    };
                }
            }

            // Check if hit top of rep range (should increase weight)
            const repRange = getRepRange(exerciseName);
            if (repRange && lastWorkout.reps >= repRange.max) {
                const suggestedWeight = lastWorkout.weight + 2.5;
                return {
                    type: 'progress',
                    message: `Hit ${lastWorkout.reps} reps at ${lastWorkout.weight}kg`,
                    suggestion: `Try ${suggestedWeight}kg today (+2.5kg)`
                };
            }

            // Normal progression
            return {
                type: 'normal',
                message: `Last: ${lastWorkout.weight}kg √ó ${lastWorkout.reps} reps (RPE ${lastWorkout.rpe || 'N/A'}) - ${daysSince} days ago`
            };
        }

        // Get rep range for exercise from exercise-meta
        function getRepRange(exerciseName) {
            const exercises = document.querySelectorAll('.exercise');
            for (let ex of exercises) {
                const titleEl = ex.querySelector('.exercise-title');
                if (titleEl && titleEl.textContent.includes(exerciseName)) {
                    const metaEl = ex.querySelector('.exercise-meta');
                    if (metaEl) {
                        const match = metaEl.textContent.match(/(\d+)-(\d+)\s+reps/);
                        if (match) {
                            return { min: parseInt(match[1]), max: parseInt(match[2]) };
                        }
                    }
                }
            }
            return null;
        }

        // Show progression alert for an exercise
        function showProgressionAlert(exerciseId, analysis) {
            const alertDiv = document.getElementById(`${exerciseId}-progression-alert`);
            if (!alertDiv) return;

            if (analysis.type === 'none') {
                alertDiv.innerHTML = '';
                return;
            }

            let alertClass = '';
            let icon = '';

            if (analysis.type === 'progress') {
                alertClass = 'good';
                icon = '‚úÖ';
            } else if (analysis.type === 'plateau') {
                alertClass = 'warning';
                icon = '‚ö†Ô∏è';
            } else if (analysis.type === 'regression') {
                alertClass = 'danger';
                icon = '‚¨áÔ∏è';
            } else {
                alertClass = '';
                icon = 'üìä';
            }

            let html = `<div class="progression-alert ${alertClass}">`;
            html += `<div class="progression-alert-title">${icon} ${analysis.message}</div>`;
            if (analysis.suggestion) {
                html += `<div class="progression-alert-text">${analysis.suggestion}</div>`;
            }
            html += `</div>`;

            alertDiv.innerHTML = html;
        }

        // Show exercise history modal
        function showExerciseHistory(exerciseName, exerciseId) {
            const modal = document.getElementById('exercise-history-modal');
            const titleEl = document.getElementById('history-modal-title');
            const contentEl = document.getElementById('history-modal-content');

            titleEl.textContent = `${exerciseName} - History`;

            const history = exerciseHistory[exerciseName] || [];

            if (history.length === 0) {
                contentEl.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">No workout history yet. Complete some sets to start tracking!</p>';
            } else {
                // Show last 8 workouts
                const recent = history.slice(-8).reverse();

                // Calculate stats
                const weights = history.map(h => h.weight);
                const reps = history.map(h => h.reps);
                const rpes = history.filter(h => h.rpe).map(h => h.rpe);
                const volumes = history.map(h => h.weight * h.reps);

                const bestWeight = Math.max(...weights);
                const bestVolume = Math.max(...volumes);
                const avgRPE = rpes.length > 0 ? (rpes.reduce((a, b) => a + b, 0) / rpes.length).toFixed(1) : 'N/A';

                let html = '<table class="history-table">';
                html += '<thead><tr><th>Date</th><th>Weight</th><th>Reps</th><th>RPE</th><th>Trend</th></tr></thead>';
                html += '<tbody>';

                recent.forEach((workout, index) => {
                    const prevWorkout = index < recent.length - 1 ? recent[index + 1] : null;
                    let trend = '‚û°Ô∏è';
                    let trendClass = 'trend-same';

                    if (prevWorkout) {
                        const currentVolume = workout.weight * workout.reps;
                        const prevVolume = prevWorkout.weight * prevWorkout.reps;
                        if (currentVolume > prevVolume) {
                            trend = '‚¨ÜÔ∏è';
                            trendClass = 'trend-up';
                        } else if (currentVolume < prevVolume) {
                            trend = '‚¨áÔ∏è';
                            trendClass = 'trend-down';
                        }
                    }

                    html += `<tr>`;
                    html += `<td>${workout.date}</td>`;
                    html += `<td>${workout.weight}kg</td>`;
                    html += `<td>${workout.reps}</td>`;
                    html += `<td>${workout.rpe || '-'}</td>`;
                    html += `<td class="${trendClass}">${trend}</td>`;
                    html += `</tr>`;
                });

                html += '</tbody></table>';

                // Add stats
                html += '<div class="history-stats">';
                html += `<div class="history-stat-box">`;
                html += `<div class="history-stat-value">${bestWeight}kg</div>`;
                html += `<div class="history-stat-label">Best Weight</div>`;
                html += `</div>`;
                html += `<div class="history-stat-box">`;
                html += `<div class="history-stat-value">RPE ${avgRPE}</div>`;
                html += `<div class="history-stat-label">Avg RPE</div>`;
                html += `</div>`;
                html += '</div>';

                contentEl.innerHTML = html;
            }

            modal.classList.add('active');
        }

        function closeHistoryModal() {
            document.getElementById('exercise-history-modal').classList.remove('active');
        }

        // Switch progression (show alternatives modal)
        function switchProgression(selectElement, exerciseName, exerciseId) {
            const value = selectElement.value;

            if (value === 'current') {
                return; // Do nothing
            }

            // Handle reset to original
            if (value === 'reset') {
                resetToOriginal(exerciseName, exerciseId);
                selectElement.value = 'current';
                return;
            }

            // Show modal with alternatives
            showProgressionModal(exerciseName, exerciseId, value);

            // Reset select to current
            selectElement.value = 'current';
        }

        function resetToOriginal(exerciseName, exerciseId) {
            // Get original exercise info from EXERCISE_ALTERNATIVES
            const originalInfo = EXERCISE_ALTERNATIVES[exerciseName];

            // Update exercise title back to original
            const titleEl = document.getElementById(`${exerciseId}-title`);
            if (titleEl) {
                titleEl.textContent = exerciseName;
            }

            // Update video link back to original
            if (originalInfo && originalInfo.originalVideo) {
                const exercise = document.querySelector(`[data-exercise="${exerciseId}"]`);
                const videoLink = exercise.querySelector('.video-link');
                if (videoLink) {
                    videoLink.href = originalInfo.originalVideo;
                }
            }

            // Remove from localStorage
            const alternates = JSON.parse(localStorage.getItem('exercise-alternates') || '{}');
            delete alternates[exerciseId];
            localStorage.setItem('exercise-alternates', JSON.stringify(alternates));

            alert(`Exercise reset to original: ${exerciseName}`);
        }

        function showProgressionModal(exerciseName, exerciseId, type) {
            const modal = document.getElementById('progression-modal');
            const titleEl = document.getElementById('progression-modal-title');
            const contentEl = document.getElementById('progression-modal-content');

            titleEl.textContent = `Change Exercise - ${type.charAt(0).toUpperCase() + type.slice(1)}`;

            const alternatives = EXERCISE_ALTERNATIVES[exerciseName];

            if (!alternatives || !alternatives[type]) {
                contentEl.innerHTML = '<p style="color: #888; padding: 20px;">No alternatives available for this exercise yet.</p>';
            } else {
                const options = alternatives[type];
                let html = '';

                options.forEach(option => {
                    html += `<div class="alternative-option" onclick="selectAlternative('${exerciseName}', '${exerciseId}', '${option.name}', '${option.video}')">`;
                    html += `<div class="alternative-option-title">${option.name}</div>`;
                    html += `<div class="alternative-option-desc">${option.desc}</div>`;
                    html += `</div>`;
                });

                contentEl.innerHTML = html;
            }

            // Update tabs
            document.querySelectorAll('.modal-tab').forEach(tab => tab.classList.remove('active'));
            modal.classList.add('active');
        }

        function switchProgressionTab(type) {
            // This would switch between easier/harder/alternate tabs
            // For now, just visual feedback
            document.querySelectorAll('.modal-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function selectAlternative(originalExercise, exerciseId, newExercise, videoPath) {
            // Update exercise title
            const titleEl = document.getElementById(`${exerciseId}-title`);
            if (titleEl) {
                titleEl.textContent = `${originalExercise.split(':')[0]}: ${newExercise}`;
            }

            // Update video link if available
            if (videoPath) {
                const exercise = document.querySelector(`[data-exercise="${exerciseId}"]`);
                const videoLink = exercise.querySelector('.video-link');
                if (videoLink) {
                    videoLink.href = videoPath;
                }
            }

            // Save to localStorage
            const alternates = JSON.parse(localStorage.getItem('exercise-alternates') || '{}');
            alternates[exerciseId] = {
                original: originalExercise,
                current: newExercise,
                video: videoPath
            };
            localStorage.setItem('exercise-alternates', JSON.stringify(alternates));

            closeProgressionModal();

            // Show success modal
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.zIndex = '10001';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 400px;">
                    <div class="modal-header">
                        <h2 class="modal-title">‚úÖ Exercise Changed</h2>
                    </div>
                    <div style="padding: 20px;">
                        <p style="color: #ccc; margin-bottom: 15px;">Exercise changed to:</p>
                        <div style="background: #1a1a2e; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #667eea;">
                            <p style="margin: 0; color: #667eea; font-weight: 600;">${newExercise}</p>
                        </div>
                        <p style="font-size: 13px; color: #888; margin-bottom: 20px;">This will be saved and remembered for future workouts.</p>
                        <button onclick="this.closest('.modal').remove()" style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Got It!</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function closeProgressionModal() {
            document.getElementById('progression-modal').classList.remove('active');
        }

        // ===== NEW TWO-DROPDOWN SYSTEM =====

        // Apply progression method (same exercise, different challenge)
        function applyProgressionMethod(selectElement, baseExerciseName, exerciseId) {
            const method = selectElement.value;

            if (!method) {
                return; // No selection
            }

            const exerciseData = EXERCISE_PROGRESSION[baseExerciseName];
            if (!exerciseData || !exerciseData.progressionMethods || !exerciseData.progressionMethods[method]) {
                alert('This progression method is not available yet.');
                selectElement.value = '';
                return;
            }

            const methodInfo = exerciseData.progressionMethods[method];

            // Update title with method tag
            const titleEl = document.getElementById(`${exerciseId}-title`);
            const currentTitle = titleEl.textContent;
            const baseName = currentTitle.split(' (')[0]; // Remove any existing method tag
            titleEl.textContent = `${baseName} (${methodInfo.name})`;

            // Save to localStorage
            const methods = JSON.parse(localStorage.getItem('progression-methods') || '{}');
            methods[exerciseId] = {
                method: method,
                methodName: methodInfo.name,
                tip: methodInfo.tip
            };
            localStorage.setItem('progression-methods', JSON.stringify(methods));

            // Show tip
            alert(`${methodInfo.name} applied!\n\nüí° Tip: ${methodInfo.tip}\n\nThis method will be saved for future workouts.`);

            // Reset select
            selectElement.value = '';
        }

        // Update form cues and equipment alternatives when exercise changes
        function updateFormCues(exerciseId, exerciseData) {
            const exercise = document.querySelector(`[data-exercise="${exerciseId}"]`);
            if (!exercise) return;

            const infoContent = exercise.querySelector('.tips-content');
            if (!infoContent) return;

            // Update form cues
            const formCuesDiv = infoContent.querySelector('.form-cues');
            if (formCuesDiv) {
                const allUls = formCuesDiv.querySelectorAll('ul');
                const formCuesUl = allUls[1]; // Second UL is the form cues

                if (formCuesUl && exerciseData.formCues && exerciseData.formCues.length > 0) {
                    let html = '';
                    exerciseData.formCues.forEach(cue => {
                        html += `<li>${cue}</li>`;
                    });
                    formCuesUl.innerHTML = html;
                }
            }

            // Update equipment alternatives
            const alternativesDiv = infoContent.querySelector('.alternatives');
            if (alternativesDiv) {
                const alternativesUl = alternativesDiv.querySelector('ul');
                if (alternativesUl && exerciseData.equipmentAlternatives && exerciseData.equipmentAlternatives.length > 0) {
                    let html = '';
                    exerciseData.equipmentAlternatives.forEach(alt => {
                        html += `<li>${alt.condition} ‚Üí ${alt.suggestion} <em>(${alt.reason})</em></li>`;
                    });
                    alternativesUl.innerHTML = html;
                } else if (alternativesUl) {
                    alternativesUl.innerHTML = '<li>No equipment alternatives available</li>';
                }
            }

            console.log('Form cues and alternatives updated for', exerciseData.name);
        }

        // Change exercise variant (different exercise entirely) - BOX-BASED
        function changeExerciseVariant(selectElement, baseExerciseName, exerciseId) {
            const value = selectElement.value;

            if (!value || value === 'current') {
                return; // Do nothing
            }

            // Parse the selection (format: "boxName-exerciseIndex")
            const [boxName, indexStr] = value.split('-');
            const exerciseIndex = parseInt(indexStr);

            const exerciseData = EXERCISE_PROGRESSION[baseExerciseName];
            if (!exerciseData || !exerciseData.boxes || !exerciseData.boxes[boxName]) {
                alert('This exercise variant is not available yet.');
                selectElement.value = 'current';
                return;
            }

            const box = exerciseData.boxes[boxName];
            const selectedExercise = box.exercises[exerciseIndex];

            if (!selectedExercise) {
                alert('Exercise not found.');
                selectElement.value = 'current';
                return;
            }

            // Update exercise title
            const titleEl = document.getElementById(`${exerciseId}-title`);
            const prefix = baseExerciseName.split(':')[0]; // Keep "E1", "E2", etc.
            titleEl.textContent = `${prefix}: ${selectedExercise.name}`;

            // Update video link and equipment
            const exercise = document.querySelector(`[data-exercise="${exerciseId}"]`);

            if (!exercise) {
                console.error('Exercise element not found:', exerciseId);
                return;
            }

            // Always update video link
            const videoLink = exercise.querySelector('.video-link');
            if (videoLink) {
                console.log('Updating video from', videoLink.href, 'to', selectedExercise.video);
                if (selectedExercise.video) {
                    videoLink.href = selectedExercise.video;
                    videoLink.style.display = 'inline-block';
                } else {
                    videoLink.href = '#';
                    videoLink.style.display = 'none';
                }
            } else {
                console.error('Video link element not found');
            }

            // Always update equipment
            const equipmentDiv = exercise.querySelector('.equipment');
            if (equipmentDiv && selectedExercise.equipment) {
                console.log('Updating equipment to:', selectedExercise.equipment);
                equipmentDiv.textContent = selectedExercise.equipment;
            }

            // Update exercise metadata (muscle group, type, note)
            const metaDiv = exercise.querySelector('.exercise-meta');
            if (metaDiv && selectedExercise.muscleGroup) {
                const exerciseData = EXERCISE_PROGRESSION[baseExerciseName];
                let metaText = `${selectedExercise.muscleGroup}`;
                if (selectedExercise.exerciseType) {
                    metaText += ` (${selectedExercise.exerciseType})`;
                }
                metaText += ` | ${exerciseData.sets} sets √ó ${exerciseData.reps} reps | Rest: ${exerciseData.rest}`;
                if (selectedExercise.note) {
                    metaText += ` | ${selectedExercise.note}`;
                }
                metaDiv.textContent = metaText;
            }

            // Update form cues
            updateFormCues(exerciseId, selectedExercise);

            // Save to localStorage
            const variants = JSON.parse(localStorage.getItem('exercise-variants') || '{}');
            variants[exerciseId] = {
                baseExercise: baseExerciseName,
                currentBox: boxName,
                currentExercise: selectedExercise.name,
                video: selectedExercise.video,
                equipment: selectedExercise.equipment,
                formCues: selectedExercise.formCues || [],
                equipmentAlternatives: selectedExercise.equipmentAlternatives || [],
                muscleGroup: selectedExercise.muscleGroup,
                exerciseType: selectedExercise.exerciseType,
                note: selectedExercise.note
            };
            localStorage.setItem('exercise-variants', JSON.stringify(variants));

            // Clear any progression method
            const methods = JSON.parse(localStorage.getItem('progression-methods') || '{}');
            delete methods[exerciseId];
            localStorage.setItem('progression-methods', JSON.stringify(methods));

            alert(`Exercise changed to: ${selectedExercise.name}\n\n${selectedExercise.desc}\n\nEquipment: ${selectedExercise.equipment}\n\nThe dropdown will update to show contextual options.`);

            // Repopulate dropdown with contextual options
            populateVariantDropdown(baseExerciseName, exerciseId);
        }

        // Reset to default exercise - NOT NEEDED with box structure
        // (Clicking default exercise acts as reset)

        // Populate variant dropdown - BOX-BASED structure (Easy, Normal, Hard)
        function populateVariantDropdown(baseExerciseName, exerciseId) {
            const selectEl = document.getElementById(`${exerciseId}-variant-selector`);
            if (!selectEl) return;

            const exerciseData = EXERCISE_PROGRESSION[baseExerciseName];
            if (!exerciseData) {
                selectEl.innerHTML = '<option value="current">üîÑ Change Exercise (N/A)</option>';
                return;
            }

            // Get current state from localStorage
            const variants = JSON.parse(localStorage.getItem('exercise-variants') || '{}');
            const currentState = variants[exerciseId];
            const currentBox = currentState ? currentState.currentBox : exerciseData.defaultBox;
            const currentExercise = currentState ? currentState.currentExercise : exerciseData.defaultExercise;

            let html = '<option value="current">üîÑ Change Exercise</option>';

            // Loop through each box (easy, normal, hard)
            Object.entries(exerciseData.boxes).forEach(([boxKey, boxData]) => {
                const isCurrentBox = (boxKey === currentBox);

                if (isCurrentBox) {
                    // Current box - show as "Alternatives (BoxName)" and filter out current exercise
                    const otherExercises = boxData.exercises.filter(ex => ex.name !== currentExercise);
                    if (otherExercises.length > 0) {
                        html += `<optgroup label="${boxData.icon} Alternatives (${boxData.label})">`;
                        boxData.exercises.forEach((ex, i) => {
                            if (ex.name !== currentExercise) {
                                html += `<option value="${boxKey}-${i}">${ex.name}</option>`;
                            }
                        });
                        html += '</optgroup>';
                    }
                } else {
                    // Not current box - show original label and all exercises
                    html += `<optgroup label="${boxData.icon} ${boxData.label}">`;
                    boxData.exercises.forEach((ex, i) => {
                        html += `<option value="${boxKey}-${i}">${ex.name}</option>`;
                    });
                    html += '</optgroup>';
                }
            });

            selectEl.innerHTML = html;
        }

        // Initialize variant dropdowns on page load
        function initializeVariantDropdowns() {
            // Initialize all exercises across all days
            const exercises = [
                // Monday - Upper Body 1
                { name: 'E1: Incline Dumbbell Press', id: 'mon-e1' },
                { name: 'E2: Chest-Supported Row', id: 'mon-e2' },
                { name: 'E3: Lean-Away Cable Lateral Raises', id: 'mon-e3' },
                { name: 'E4: Pull-Ups', id: 'mon-e4' },
                { name: 'E5: Incline Overhead DB Extensions', id: 'mon-e5' },

                // Tuesday - Lower Body 1
                { name: 'E1: Back Squat', id: 'tue-e1' },
                { name: 'E2: Bulgarian Split Squat', id: 'tue-e2' },
                { name: 'E3: Swiss Ball Leg Curls', id: 'tue-e3' },
                { name: 'E4: Single Leg Weighted Calf Raise', id: 'tue-e4' },

                // Thursday - Upper Body 2
                { name: 'E1: Barbell Bench Press', id: 'thu-e1' },
                { name: 'E2: Seated Cable Row', id: 'thu-e2' },
                { name: 'E3: Standing Overhead Press', id: 'thu-e3' },
                { name: 'E4: Kneeling Face Pulls', id: 'thu-e4' },
                { name: 'E5: Incline Dumbbell Curls', id: 'thu-e5' },

                // Friday - Lower Body 2
                { name: 'E1: Deadlift (Conventional)', id: 'fri-e1' },
                { name: 'E2: Leg Press', id: 'fri-e2' },
                { name: 'E3: Reverse Lunges', id: 'fri-e3' },
                { name: 'E4: Seated Weighted Calf Raise', id: 'fri-e4' },

                // Saturday - Accessory Day
                { name: 'E1: Weighted Cable Crunch', id: 'sat-e1' },
                { name: 'E2: Lying Leg Raises', id: 'sat-e2' },
                { name: 'E3: Hollow Body Holds', id: 'sat-e3' },
                { name: 'E4: Thread the Needle Plank', id: 'sat-e4' },

                // Phase 1 - Workout A (Full Body)
                { name: 'E1: Barbell Bench Press', id: 'wa-e1' },
                { name: 'E2: Back Squat', id: 'wa-e2' },
                { name: 'E3: Chest-Supported Row', id: 'wa-e3' },
                { name: 'E4: Dumbbell Lateral Raises', id: 'wa-e4' },
                { name: 'E5: Single Leg Weighted Calf Raise', id: 'wa-e5' },

                // Phase 1 - Workout B (Full Body)
                { name: 'E1: Incline Dumbbell Press', id: 'wb-e1' },
                { name: 'E2: Deadlift', id: 'wb-e2' },
                { name: 'E3: Standing Overhead Press', id: 'wb-e3' },
                { name: 'E4: Pull-Ups', id: 'wb-e4' },
                { name: 'E5: Kneeling Face Pulls', id: 'wb-e5' }
            ];

            const variants = JSON.parse(localStorage.getItem('exercise-variants') || '{}');
            const methods = JSON.parse(localStorage.getItem('progression-methods') || '{}');

            exercises.forEach(({ name: baseExerciseName, id: exerciseId }) => {
                const savedVariant = variants[exerciseId];

                if (savedVariant && savedVariant.currentExercise) {
                    // Update title to show saved exercise
                    const titleEl = document.getElementById(`${exerciseId}-title`);
                    const prefix = baseExerciseName.split(':')[0];
                    titleEl.textContent = `${prefix}: ${savedVariant.currentExercise}`;

                    const exercise = document.querySelector(`[data-exercise="${exerciseId}"]`);

                    // Always update video link
                    const videoLink = exercise.querySelector('.video-link');
                    if (videoLink) {
                        if (savedVariant.video) {
                            videoLink.href = savedVariant.video;
                            videoLink.style.display = 'inline-block';
                        } else {
                            videoLink.href = '#';
                            videoLink.style.display = 'none';
                        }
                    }

                    // Always update equipment
                    const equipmentDiv = exercise.querySelector('.equipment');
                    if (equipmentDiv && savedVariant.equipment) {
                        equipmentDiv.textContent = savedVariant.equipment;
                    }

                    // Restore form cues and equipment alternatives
                    if (savedVariant.formCues || savedVariant.equipmentAlternatives) {
                        updateFormCues(exerciseId, {
                            name: savedVariant.currentExercise,
                            formCues: savedVariant.formCues || [],
                            equipmentAlternatives: savedVariant.equipmentAlternatives || []
                        });
                    }

                    // Restore exercise metadata
                    if (savedVariant.muscleGroup) {
                        const metaDiv = exercise.querySelector('.exercise-meta');
                        if (metaDiv) {
                            const exerciseData = EXERCISE_PROGRESSION[baseExerciseName];
                            let metaText = `${savedVariant.muscleGroup}`;
                            if (savedVariant.exerciseType) {
                                metaText += ` (${savedVariant.exerciseType})`;
                            }
                            metaText += ` | ${exerciseData.sets} sets √ó ${exerciseData.reps} reps | Rest: ${exerciseData.rest}`;
                            if (savedVariant.note) {
                                metaText += ` | ${savedVariant.note}`;
                            }
                            metaDiv.textContent = metaText;
                        }
                    }
                }

                // Populate the dropdown with contextual options
                populateVariantDropdown(baseExerciseName, exerciseId);

                // Restore any saved progression methods
                if (methods[exerciseId]) {
                    const titleEl = document.getElementById(`${exerciseId}-title`);
                    const currentTitle = titleEl.textContent;
                    const baseName = currentTitle.split(' (')[0];
                    titleEl.textContent = `${baseName} (${methods[exerciseId].methodName})`;
                }
            });
        }

        // Enhanced collectWorkoutData to include progression tracking
        const originalCollectWorkoutData = collectWorkoutData;
        collectWorkoutData = function() {
            const workoutData = originalCollectWorkoutData();

            // Also update exercise history
            workoutData.forEach(entry => {
                if (!exerciseHistory[entry.exercise]) {
                    exerciseHistory[entry.exercise] = [];
                }

                // Add to history (one entry per workout, not per set)
                const existingEntry = exerciseHistory[entry.exercise].find(h => h.date === entry.date && h.set === entry.set);
                if (!existingEntry) {
                    const rpeMatch = entry.notes.match(/RPE:\s*(\d+)/);
                    exerciseHistory[entry.exercise].push({
                        date: entry.date,
                        weight: entry.weight,
                        reps: entry.reps,
                        rpe: rpeMatch ? parseInt(rpeMatch[1]) : null,
                        set: entry.set
                    });
                }
            });

            saveExerciseHistory();
            return workoutData;
        };

        // Enhanced loadLastWorkout to show progression alerts
        const originalLoadLastWorkout = loadLastWorkout;
        loadLastWorkout = async function() {
            await originalLoadLastWorkout();

            // After loading, analyze and show progression alerts
            setTimeout(() => {
                const activeDay = document.querySelector('.workout-day.active');
                if (!activeDay) return;

                const exercises = activeDay.querySelectorAll('.exercise[data-exercise]');
                exercises.forEach(exercise => {
                    const exerciseId = exercise.getAttribute('data-exercise');
                    const titleEl = exercise.querySelector('.exercise-title');
                    if (titleEl) {
                        const exerciseName = titleEl.textContent.trim().split('\n')[0].trim();
                        // Extract just the exercise name (e.g., "E1: Incline Dumbbell Press")
                        const cleanName = exerciseName.replace(/üìà\s*History.*|Current.*|Easier.*|Harder.*|Alternate.*/g, '').trim();

                        if (cleanName) {
                            const analysis = analyzeProgression(cleanName);
                            showProgressionAlert(exerciseId, analysis);
                        }
                    }
                });
            }, 500);
        };

        // Close modals on outside click
        document.getElementById('exercise-history-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeHistoryModal();
            }
        });

        document.getElementById('progression-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProgressionModal();
            }
        });

        document.getElementById('rpe-guide-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeRPEGuide();
            }
        });

        document.getElementById('plate-calculator').addEventListener('click', function(e) {
            if (e.target === this) {
                closePlateCalculator();
            }
        });

        // Load exercise history on page load
        loadExerciseHistory();

        // Load saved progress on page load
        loadProgress();
        updateStats();
        loadInfoStates(); // Load collapsed/expanded states
        loadDetailedStepsStates(); // Load detailed steps states

        // Load exercise alternates
        function loadExerciseAlternates() {
            const alternates = JSON.parse(localStorage.getItem('exercise-alternates') || '{}');
            Object.keys(alternates).forEach(exerciseId => {
                const alternate = alternates[exerciseId];
                const titleEl = document.getElementById(`${exerciseId}-title`);
                if (titleEl) {
                    titleEl.textContent = `${alternate.original.split(':')[0]}: ${alternate.current}`;
                }

                // Update video link
                if (alternate.video) {
                    const exercise = document.querySelector(`[data-exercise="${exerciseId}"]`);
                    const videoLink = exercise?.querySelector('.video-link');
                    if (videoLink) {
                        videoLink.href = alternate.video;
                    }
                }
            });
        }

        loadExerciseAlternates();
        initializeVariantDropdowns(); // Initialize the smart dropdown system

        // Add event listeners to variant dropdowns for Easy/Normal/Hard selection
        document.querySelectorAll('.variant-dropdown').forEach(dropdown => {
            dropdown.addEventListener('change', function() {
                const exerciseId = this.dataset.exercise;
                const difficulty = this.value; // 'easy', 'normal', or 'hard'
                const exerciseElement = document.getElementById(exerciseId);

                if (!exerciseElement) return;

                // Get the exercise name from the title
                const titleEl = exerciseElement.querySelector('h3');
                if (!titleEl) return;

                const baseExerciseName = titleEl.textContent.trim();

                // Look up exercise data
                const exerciseData = EXERCISE_PROGRESSION[baseExerciseName];
                if (!exerciseData || !exerciseData.boxes[difficulty]) {
                    alert(`No ${difficulty} variant available for this exercise yet.`);
                    this.value = 'normal'; // Reset to normal
                    return;
                }

                // Get the first exercise from the selected difficulty box
                const selectedBox = exerciseData.boxes[difficulty];
                const newExercise = selectedBox.exercises[0]; // Use first exercise in that difficulty level

                if (!newExercise) {
                    alert(`No ${difficulty} variant available for this exercise yet.`);
                    this.value = 'normal';
                    return;
                }

                // Update the exercise title
                const prefix = baseExerciseName.split(':')[0]; // Get "E1", "E2", etc.
                titleEl.textContent = `${prefix}: ${newExercise.name}`;

                // Update the video link if available
                const videoLink = exerciseElement.querySelector('.video-link');
                if (videoLink && newExercise.video) {
                    videoLink.href = newExercise.video;
                    videoLink.style.display = 'inline-block';
                } else if (videoLink) {
                    videoLink.style.display = 'none';
                }

                // Update form tips if they exist
                const formTips = exerciseElement.querySelector('.form-tips');
                if (formTips && newExercise.formCues && newExercise.formCues.length > 0) {
                    const cuesHTML = newExercise.formCues.map(cue => `<li>${cue}</li>`).join('');
                    formTips.innerHTML = `<strong>Form:</strong> ${newExercise.formCues[0]}`; // Phase 1 has simple format
                }

                // Save selection to localStorage
                const variants = JSON.parse(localStorage.getItem('exercise-variants') || '{}');
                variants[exerciseId] = {
                    currentBox: difficulty,
                    currentExercise: newExercise.name,
                    video: newExercise.video || '',
                    equipment: newExercise.equipment || '',
                    formCues: newExercise.formCues || [],
                    muscleGroup: newExercise.muscleGroup || '',
                    exerciseType: newExercise.exerciseType || ''
                };
                localStorage.setItem('exercise-variants', JSON.stringify(variants));

                // Show notification
                alert(`‚úÖ Exercise changed to: ${newExercise.name}\n\nDifficulty: ${selectedBox.label}\n${newExercise.note ? '\n' + newExercise.note : ''}`);
            });
        });

        // ===== WELCOME MODAL - FIRST TIME PHASE SELECTION =====
        function selectInitialPhase(phase) {
            // Save phase selection
            localStorage.setItem('selected-phase', phase);

            // Hide welcome modal
            document.getElementById('welcome-modal').classList.remove('active');

            // Trigger phase change
            const phaseBtns = document.querySelectorAll('.phase-btn');
            phaseBtns.forEach(btn => {
                if (btn.dataset.phase === phase) {
                    btn.click();
                }
            });

            // Check if Google Sheets is already connected
            const sheetsURL = getSheetsURL();
            if (!sheetsURL) {
                // Prompt user to connect Google Sheets with custom modal
                setTimeout(() => {
                    showSheetsPromptModal();
                }, 500);
            }
        }

        function showSheetsPromptModal() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.zIndex = '10001';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h2 class="modal-title">üìä Connect Google Sheets?</h2>
                    </div>
                    <div style="padding: 20px;">
                        <p style="color: #ccc; margin-bottom: 20px;">Sync your workouts to Google Sheets for:</p>
                        <div style="background: #1a1a2e; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                <span style="font-size: 20px; margin-right: 10px;">‚úÖ</span>
                                <span style="color: #aaa;">Sync workouts across devices</span>
                            </div>
                            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                <span style="font-size: 20px; margin-right: 10px;">‚úÖ</span>
                                <span style="color: #aaa;">Load previous weights/reps</span>
                            </div>
                            <div style="display: flex; align-items: center;">
                                <span style="font-size: 20px; margin-right: 10px;">‚úÖ</span>
                                <span style="color: #aaa;">Track progress over time</span>
                            </div>
                        </div>
                        <p style="font-size: 13px; color: #888; margin-bottom: 20px;">You can skip this and set it up later in Settings.</p>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="this.closest('.modal').remove()" style="flex: 1; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Skip</button>
                            <button onclick="this.closest('.modal').remove(); showGoogleSheetsSetup();" style="flex: 2; padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">Set Up Now</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Check if user has already selected a phase on page load
        (function checkFirstTime() {
            const savedPhase = localStorage.getItem('selected-phase');
            const welcomeModal = document.getElementById('welcome-modal');

            if (savedPhase) {
                // User has already selected, hide welcome modal
                welcomeModal.classList.remove('active');

                // Set the correct phase button as active and trigger the view
                const phaseBtns = document.querySelectorAll('.phase-btn');
                phaseBtns.forEach(btn => {
                    if (btn.dataset.phase === savedPhase) {
                        btn.classList.add('active');
                        // Trigger click to show correct phase view
                        setTimeout(() => btn.click(), 100);
                    } else {
                        btn.classList.remove('active');
                    }
                });
            } else {
                // First time user - show welcome modal
                welcomeModal.classList.add('active');
            }

            // Update Google Sheets button status
            updateSheetsButtonStatus();
        })();

        // Install prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('PWA install available');
        });
    </script>
</body>
</html>
